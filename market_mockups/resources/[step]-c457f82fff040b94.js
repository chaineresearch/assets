(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{55204:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/publish/[step]",function(){return r(31825)}])},41308:function(e,t,r){"use strict";function n(e,t){return t.filter((function(t){return t.name===e}))[0]}r.d(t,{R:function(){return n}})},55152:function(e,t,r){"use strict";function n(e){var t=decodeURI(e).trim().toLowerCase();return t.startsWith("javascript:")||t.startsWith("data:")||t.startsWith("vbscript:")?"about:blank":e}r.d(t,{N:function(){return n}})},31825:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Mt}});var n=r(85893),a=r(67294),i=r(47568),s=r(26042),o=r(69396),c=r(34051),l=r.n(c),u=r(82580),d=r(48387),p=JSON.parse('{"Pu":{"T":"Metadata","X":[{"name":"nft","label":"Data NFT","type":"nft","help":"All metadata is stored on-chain in a newly deployed ERC-721 contract representing this asset, created with this name, symbol, description and image.","required":true},{"name":"type","label":"Asset Type","type":"boxSelection","options":["Dataset","Algorithm","Data Stream"],"required":true},{"name":"name","label":"Title","placeholder":"e.g. Shapes of Desert Plants","required":true},{"name":"description","label":"Description","help":"Add a thorough description with as much detail as possible. You can use [Markdown](https://daringfireball.net/projects/markdown/basics). You can change the description at any time. If you provide personal data, please note that it will remain in the transaction history. For more information on how personal data is handled within the metadata, please refer to our [privacy policy](/privacy/en).","type":"textarea","required":true},{"name":"author","label":"Author","placeholder":"e.g. Jelly McJellyfish","help":"Give proper attribution for your dataset. You are welcome to use a pseudonym, and you can change your author name at any time. Please note that it will remain in the transaction history. For more information on how personal data is handled within the metadata, please refer to our [privacy policy](/privacy/en).","required":true},{"name":"tags","label":"Tags","placeholder":"e.g. logistics, ai","help":"Separate tags with comma."},{"name":"dockerImage","label":"Docker Image","help":"Please select an image to run your algorithm.","type":"boxSelection","options":["populated from algorithmContainerPresets in Publish/_constants"],"required":true},{"name":"dockerImageCustom","label":"Docker Image URL","placeholder":"e.g. oceanprotocol/algo_dockers or https://example.com/image_path","help":"Provide the name of a public Docker image or the full url if you have it hosted in a 3rd party repo","required":true},{"name":"dockerImageCustomTag","label":"Docker Image Tag","placeholder":"e.g. latest","help":"Provide the tag for your Docker image.","required":true},{"name":"dockerImageCustomEntrypoint","label":"Docker Entrypoint","placeholder":"e.g. python $ALGO","help":"Provide the entrypoint for your algorithm.","required":true},{"name":"termsAndConditions","label":"Terms & Conditions","type":"checkbox","options":["I agree to the Terms and Conditions"],"required":true}]},"uZ":{"T":"Access","X":[{"name":"dataTokenOptions","label":"Datatoken","type":"datatoken","help":"The datatoken used for accessing this asset will be created with this name & symbol.","required":true},{"name":"providerUrl","label":"Provider URL","type":"providerUrl","help":"Enter the URL for your custom [provider](https://github.com/oceanprotocol/provider/) or leave as is to use the default one. If you change your provider URL after adding your file, please add & validate your file again.","placeholder":"e.g. https://provider.oceanprotocol.com/","required":true},{"name":"streamFiles","label":"Datastream Endpoint URL","placeholder":"e.g. https://file.com/samplefile.json","help":"This URL will be stored encrypted after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.** For a compute data set, your file should match the file type required by the algorithm, and should not exceed 1 GB in file size. ","prominentHelp":true,"type":"files","required":true},{"name":"streamDocs","label":"Datastream API Docs URL","placeholder":"e.g. https://file.com/samplefile.json","help":"This file should reveal the data structure of your data set, e.g. by including the header and one line of a CSV file. This file URL will be publicly available after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.**","prominentHelp":true,"type":"files"},{"name":"files","label":"File","placeholder":"e.g. https://file.com/file.json","help":"This URL will be stored encrypted after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.** For a compute dataset, your file should match the file type required by the algorithm, and should not exceed 1 GB in file size. ","prominentHelp":true,"type":"files","required":true},{"name":"links","label":"Sample file","placeholder":"e.g. https://file.com/samplefile.json","help":"This file should reveal the data structure of your dataset, e.g. by including the header and one line of a CSV file. This file URL will be publicly available after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.**","prominentHelp":true,"type":"files"},{"name":"algorithmPrivacy","label":"Algorithm Privacy","type":"checkbox","options":["Keep my algorithm private"],"help":"By default, your algorithm can be downloaded for free or a fixed price, in addition to running in compute jobs. Enabling this option will prevent downloading, so your algorithm can only be run as part of a compute job on a dataset.","required":false},{"name":"access","label":"Access Type","help":"Choose how you want your files to be accessible for the specified price.","type":"boxSelection","options":["Access","Compute","Stream"],"required":true,"disclaimer":"Please do not provide downloadable personal data without the consent of the data subjects.","disclaimerValues":["Download"]},{"name":"timeout","label":"Timeout","help":"Define how long buyers should be able to download the dataset again after the initial purchase.","type":"select","options":["Forever","1 day","1 week","1 month","1 year"],"sortOptions":false,"required":true}]},"D":{"T":"Pricing"},"RN":{"T":"Preview"},"I8":{"T":"Submit"}}'),m=r(38099),h=r(16224),f=r(828),v=r(41349),g=r(2021),x=r(51638),b=r.n(x);function y(e){var t=e.meta;return t.error?(0,n.jsx)("div",{className:b().error,children:t.error}):null}var k=r(74833),w=r.n(k),Z=r(41308),_=r(22426),j=r(60775),F=r.n(j);function T(e){var t,r,a=e.approvedBaseTokens,i=(0,u.u6)(),s=i.values,o=i.setFieldValue;return(null===a||void 0===a?void 0:a.length)>0&&(0,n.jsx)(_.Z,{name:"coinselect",className:F().coinSelect,type:"select",options:null===a||void 0===a?void 0:a.map((function(e){return e.symbol})),value:null===(t=s.pricing)||void 0===t||null===(r=t.baseToken)||void 0===r?void 0:r.symbol,onChange:function(e){var t=a.find((function(t){return t.symbol===e.target.value}));o("pricing.baseToken",t)}})}function C(e){var t,r,a,i,c=e.approvedBaseTokens,l=e.content,d=(0,f.Z)((0,u.U$)("pricing.price"),2),p=d[0],m=d[1],h=(0,u.u6)().values,x=h.services[0].dataTokenOptions;return(0,n.jsx)("div",{className:w().price,children:"free"===h.pricing.type?(0,n.jsx)("div",{className:w().free,children:(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("freeAgreement",l.fields)),{component:g.Z,name:"pricing.freeAgreement"}))}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:w().grid,children:[(0,n.jsxs)("div",{className:w().form,children:[(0,n.jsx)(g.Z,(0,s.Z)({type:"number",min:"1",placeholder:"0",prefix:(null===c||void 0===c?void 0:c.length)>1?(0,n.jsx)(T,{approvedBaseTokens:c}):null===(t=h.pricing)||void 0===t||null===(r=t.baseToken)||void 0===r?void 0:r.symbol},p)),(0,n.jsx)(y,{meta:m})]}),(0,n.jsx)("div",{className:w().datatoken,children:(0,n.jsxs)("h4",{children:["= ",(0,n.jsx)("strong",{children:"1"})," ",x.symbol," ",(0,n.jsx)(v.Z,{price:p.value,symbol:null===(a=h.pricing)||void 0===a||null===(i=a.baseToken)||void 0===i?void 0:i.symbol,className:w().conversion})]})})]})})})}var N=r(91838),I=r(22649),P=r.n(I),R=r(46879),A=r(10307),D=r(42228),E=r(90482),O=function(e){var t=e.title,r=e.name,a=e.tooltip,i=e.value;return(0,n.jsx)(g.Z,{label:(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)(N.Z,{content:a})]}),value:i,name:r,postfix:"%",readOnly:!0,size:"small"})};function q(e){var t=e.tooltips,r=(0,a.useState)(""),i=r[0],s=r[1],o=(0,A.$6)().chainId,c=(0,D.c8)().appConfig;return(0,a.useEffect)((function(){(0,R.cA)(o||1).then((function(e){s((null===e||void 0===e?void 0:e.swapOceanFee)?new E.Z(e.swapOceanFee).mul(100).toString():"0")}))}),[o]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:P().fees,children:[(0,n.jsx)(O,{title:"Community Swap Fee",name:"communityFee",tooltip:t.communityFee,value:i}),(0,n.jsx)(O,{title:"Marketplace Fee",name:"marketplaceFee",tooltip:t.marketplaceFee,value:null===c||void 0===c?void 0:c.publisherMarketFixedSwapFee})]})})}var S=r(15495),M=r.n(S);function L(e){var t=e.approvedBaseTokens,r=e.content;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{children:r.info}),(0,n.jsx)("h4",{className:M().title,children:"Price"}),(0,n.jsx)(C,{approvedBaseTokens:t}),(0,n.jsx)(q,{tooltips:r.tooltips})]})}var H=r(32468),U=r.n(H);function V(e){var t=e.content,r=(0,u.u6)(),i=r.values,s=r.setFieldValue;return(0,a.useEffect)((function(){i.pricing.freeAgreement?(s("pricing.price",1),s("pricing.amountDataToken",1e3)):(s("pricing.price",0),s("pricing.amountDataToken",0))}),[s,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{children:t.info}),(0,n.jsx)("h4",{className:U().title,children:"Price"}),(0,n.jsx)(C,{content:t})]})}var X,B=JSON.parse('{"U":{"B":{"title":"Fixed","info":"Set your price for accessing this dataset. The datatoken for this dataset will be worth the entered amount of the selected base token.","tooltips":{"communityFee":"Goes to Ocean DAO for teams to improve the tools, build apps, do outreach, and more. A small fraction is used to burn OCEAN. This fee is collected when downloading or using an asset in a compute job.","marketplaceFee":"Goes to the marketplace owner that is hosting and providing the marketplace and is collected when downloading or using an asset in a compute job. In Ocean Market, it is treated as network revenue that goes to the Ocean community."}},"g":{"title":"Free","info":"Set your dataset as free. The datatoken for this dataset will be given for free via creating a faucet.","fields":[{"name":"freeAgreement","type":"checkbox","options":["I want this asset to be free. I understand network fees are still to be paid"]}]}}}');function K(){var e=(0,D.c8)().appConfig,t=(0,A.$6)(),r=t.approvedBaseTokens,i=t.chainId,s=(0,u.u6)(),o=s.values,c=s.setFieldValue,l=o.pricing.type,d=(null===r||void 0===r?void 0:r.find((function(e){return e.name.toLowerCase().includes("ocean")})))||(null===r||void 0===r?void 0:r[0]),p=!!(null===r||void 0===r?void 0:r.find((function(e){var t,r;return(null===e||void 0===e?void 0:e.address)===(null===o||void 0===o||null===(t=o.pricing)||void 0===t||null===(r=t.baseToken)||void 0===r?void 0:r.address)})));(0,a.useEffect)((function(){(null===r||void 0===r?void 0:r.length)&&(p||c("pricing.baseToken",d))}),[r,i,d,p,c,o.pricing.baseToken]);var h=(0,a.useCallback)((function(){return["true"===e.allowFixedPricing?{title:B.U.B.title,content:(0,n.jsx)(L,{approvedBaseTokens:r,content:B.U.B})}:void 0,"true"===e.allowFreePricing?{title:B.U.g.title,content:(0,n.jsx)(V,{content:B.U.g})}:void 0].filter((function(e){return void 0!==e}))}),[e.allowFixedPricing,e.allowFreePricing,r]),f=(0,a.useState)(h()),v=f[0],g=f[1];return(0,a.useEffect)((function(){g(h())}),[h]),(0,n.jsx)(m.Z,{items:v,handleTabChange:function(e){var t=e.toLowerCase();c("pricing.type",t),c("pricing.price",0),c("pricing.freeAgreement",!1),c("pricing.baseToken",d),"free"!==t&&c("pricing.amountDataToken",1e3)},defaultIndex:"free"===l?1:0,className:U().pricing,showRadio:!0})}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}var z,$=function(e){return a.createElement("svg",W({width:"1em",height:"1em",viewBox:"0 0 15 12",xmlns:"http://www.w3.org/2000/svg"},e),X||(X=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.846.356H0v2.859h2.846V.356Zm0 4.288H0v2.858h2.846V4.644ZM0 9h2.846v2.858H0V9ZM8.538.356H5.692v2.859h2.846V.356ZM5.692 4.644h2.846v2.858H5.692V4.644ZM8.538 9H5.692v2.858h2.846V9ZM11.384.356h2.846v2.859h-2.846V.356Zm2.846 4.288h-2.846v2.858h2.846V4.644ZM11.384 9h2.846v2.858h-2.846V9Z"})))};function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(this,arguments)}var J,Y=function(e){return a.createElement("svg",G({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),z||(z=a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{d:"M0 0h24v24H0z"}),a.createElement("g",{transform:"translate(2.063 2.813)",fillRule:"nonzero"},a.createElement("circle",{fill:"#185ABC",cx:1.65,cy:1.65,r:1.65}),a.createElement("circle",{fill:"#185ABC",cx:1.65,cy:9.13,r:1.65}),a.createElement("circle",{fill:"#185ABC",cx:1.65,cy:16.61,r:1.65}),a.createElement("circle",{fill:"#185ABC",cx:17.694,cy:9.131,r:2.063}),a.createElement("path",{d:"M4.89 10.12h3.487c.138-.238.287-.47.447-.692l.21-.302a8.29 8.29 0 0 1-.637-1.004H4.89c.076.259.123.525.14.793v.422a3.405 3.405 0 0 1-.14.783Z",fill:"#669DF6"}),a.createElement("path",{d:"m11.438 6.094-.229-.411-.278-.462-.437-.874C9.242 1.837 7.95.683 5.346.683H4.89c.094.326.141.664.14 1.004.001.34-.046.678-.14 1.004h.457c1.61 0 2.316.512 3.29 2.289l.238.432.239.481c1.44 2.912 2.484 4.016 4.899 4.257a4.319 4.319 0 0 1-.12-1.004c.002-.34.049-.677.14-1.004h.06c-1.173-.11-1.849-.622-2.654-2.048Z",fill:"#185ABC"}),a.createElement("path",{d:"m9.61 11.486-.239.451-.378.764-.238.451-.229.412c-.914 1.616-1.63 2.088-3.18 2.088H4.89c.078.258.125.524.14.793v.372a3.486 3.486 0 0 1-.14.793h.716c2.395-.07 3.687-1.235 4.968-3.654l.537-1.075.209-.391.179-.332c.144-.25.303-.492.477-.722a5.652 5.652 0 0 1-1.69-1.004 7.76 7.76 0 0 0-.675 1.054Z",fill:"#669DF6"})))))};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}var ee=function(e){return a.createElement("svg",Q({width:"1em",height:"1em",viewBox:"0 0 15 9",xmlns:"http://www.w3.org/2000/svg"},e),J||(J=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.57.512a.75.75 0 0 0-1.14.976L3.013 4.5.431 7.512a.75.75 0 0 0 1.138.976l3-3.5a.75.75 0 0 0 0-.976l-3-3.5ZM9 4.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5H9Z"})))},te=r(78445),re=r.n(te),ne=r(39822),ae=(0,Z.R)("type",p.Pu.X).options;function ie(){var e=(0,D.c8)().siteContent,t=(0,u.u6)(),r=t.values,i=t.setFieldValue,c=[{name:ae[0].toLowerCase(),title:ae[0],checked:r.metadata.type===ae[0].toLowerCase(),icon:(0,n.jsx)($,{})},{name:ae[1].toLowerCase(),title:ae[1],checked:r.metadata.type===ae[1].toLowerCase(),icon:(0,n.jsx)(ee,{})},{name:ae[2].toLowerCase(),title:ae[2],checked:r.metadata.type===ae[2].toLowerCase(),icon:(0,n.jsx)(Y,{})}],l=Ke.map((function(e){return{name:"".concat(e.image,":").concat(e.tag),title:"".concat(e.image,":").concat(e.tag),checked:r.metadata.dockerImage==="".concat(e.image,":").concat(e.tag)}}));return(0,a.useEffect)((function(){i("services[0].access","algorithm"===r.metadata.type?"compute":"access"),i("services[0].algorithmPrivacy","algorithm"===r.metadata.type)}),[r.metadata.type]),l.push({name:"custom",title:"Custom",checked:!1}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("nft",p.Pu.X)),{component:g.Z,name:"metadata.nft"})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("type",p.Pu.X)),{component:g.Z,name:"metadata.type",options:c})),"compute"===r.services[0].access&&(0,n.jsx)(ne.Z,{className:re().fieldWarning,state:"info",text:e.warning.ctd}),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("name",p.Pu.X)),{component:g.Z,name:"metadata.name"})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("description",p.Pu.X)),{component:g.Z,name:"metadata.description",rows:7})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("author",p.Pu.X)),{component:g.Z,name:"metadata.author"})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("tags",p.Pu.X)),{component:g.Z,name:"metadata.tags"})),"algorithm"===r.metadata.type&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("dockerImage",p.Pu.X)),{component:g.Z,name:"metadata.dockerImage",options:l})),"custom"===r.metadata.dockerImage&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("dockerImageCustom",p.Pu.X)),{component:g.Z,name:"metadata.dockerImageCustom"})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("dockerImageCustomTag",p.Pu.X)),{component:g.Z,name:"metadata.dockerImageCustomTag"})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("dockerImageCustomEntrypoint",p.Pu.X)),{component:g.Z,name:"metadata.dockerImageCustomEntrypoint"}))]})]}),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("termsAndConditions",p.Pu.X)),{component:g.Z,name:"metadata.termsAndConditions"})),(0,n.jsx)("a",{className:re().termsLink,href:"/terms",rel:"noopener noreferrer",target:"_blank",children:"View Terms and Conditions"})]})}var se=r(48954),oe=r(45521);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(this,arguments)}var le=function(e){return a.createElement("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 89.03",style:{enableBackground:"new 0 0 122.88 89.03"},xmlSpace:"preserve",width:"1em",height:"1em"},e),a.createElement("path",{d:"M61.44 21.18c12.88 0 23.33 10.45 23.33 23.33 0 12.88-10.45 23.33-23.33 23.33S38.11 57.4 38.11 44.51c0-12.88 10.44-23.33 23.33-23.33zm44.34 66.79c-.54.63-1.28.97-2.04 1.03-.77.06-1.58-.18-2.23-.72-.65-.54-1-1.29-1.06-2.05v-.01c-.05-.77.18-1.57.72-2.22 5.2-6.07 9.14-12.52 11.76-19.16 2.63-6.65 3.93-13.5 3.86-20.36-.05-6.79-1.45-13.62-4.22-20.33-2.71-6.54-6.73-12.97-12.11-19.12a3.01 3.01 0 0 1-.73-2.19c.05-.77.39-1.53 1.01-2.09l.02-.02c.62-.54 1.41-.77 2.18-.72.77.05 1.53.4 2.09 1.02 5.86 6.72 10.24 13.74 13.19 20.92 3.04 7.39 4.57 14.95 4.64 22.48.07 7.63-1.37 15.21-4.24 22.55-2.87 7.3-7.16 14.36-12.83 20.97l-.01.02zM92.11 75.32c-.56.62-1.32.97-2.1 1.01a3.022 3.022 0 0 1-3.2-2.86c-.05-.77.2-1.57.76-2.19l.01-.01c3.88-4.38 6.8-8.86 8.73-13.37 1.92-4.5 2.86-9.04 2.79-13.58-.07-4.46-1.13-8.96-3.23-13.43-2.06-4.41-5.13-8.81-9.23-13.15l-.02-.03c-.57-.6-.83-1.37-.8-2.13.03-.77.35-1.54.94-2.11l.04-.04c.6-.57 1.37-.83 2.13-.81.77.02 1.54.35 2.12.94l.01.01c4.62 4.9 8.07 9.91 10.4 14.98l.01.03c2.38 5.17 3.59 10.41 3.68 15.65.09 5.31-.98 10.59-3.16 15.78-2.17 5.15-5.45 10.22-9.79 15.13-.01.06-.04.12-.09.18zm-56.77-4c.55.62.8 1.41.75 2.17-.05.77-.39 1.54-1.01 2.1s-1.41.81-2.18.77c-.77-.05-1.54-.39-2.1-1.01-4.39-4.97-7.71-10.09-9.91-15.3-2.18-5.18-3.26-10.45-3.17-15.75.09-5.24 1.31-10.49 3.69-15.68l.01-.03c2.33-5.06 5.78-10.07 10.38-14.95l.03-.03c.58-.59 1.35-.9 2.12-.93.77-.02 1.55.25 2.15.83.61.58.93 1.36.95 2.13.02.77-.25 1.55-.83 2.15-4.09 4.36-7.16 8.77-9.23 13.18-2.09 4.47-3.16 8.96-3.24 13.4-.07 4.53.88 9.07 2.8 13.55 1.91 4.48 4.8 8.92 8.6 13.25.06.02.12.05.16.1l.03.05zM21.69 84l.03.03c.53.64.76 1.43.71 2.2a2.99 2.99 0 0 1-1.04 2.05l-.05.04c-.64.53-1.43.76-2.2.7-.77-.06-1.52-.42-2.06-1.06-5.67-6.62-9.97-13.68-12.83-20.98C1.37 59.65-.07 52.07 0 44.44c.08-7.54 1.6-15.1 4.64-22.49C7.6 14.77 11.97 7.74 17.83 1.04A2.99 2.99 0 0 1 19.9.02c.77-.05 1.57.19 2.21.73l.01.01c.62.54.97 1.29 1.02 2.07.05.77-.19 1.57-.73 2.21l-.01.01c-5.37 6.14-9.4 12.56-12.1 19.1-2.77 6.71-4.17 13.54-4.22 20.33-.05 6.89 1.26 13.75 3.88 20.41 2.62 6.63 6.55 13.05 11.73 19.11zm48.05-38.04c1.19-.77 1.18-1.62 0-2.3L57.47 36.6c-.97-.61-1.98-.25-1.95 1.01l.04 14.26c.08 1.37.87 1.75 2.02 1.11l12.16-7.02zm-8.3-20.04c10.27 0 18.59 8.32 18.59 18.59S71.71 63.1 61.44 63.1s-18.59-8.32-18.59-18.59 8.32-18.59 18.59-18.59z",style:{fillRule:"evenodd",clipRule:"evenodd"}}))},ue=r(48497),de=r.n(ue),pe=r(32656),me=(0,Z.R)("access",p.uZ.X).options;function he(){var e=(0,D.c8)().siteContent,t=(0,u.u6)(),r=t.values,i=t.setFieldValue;pe.KF.log("values",r);var c=[{name:"download",value:me[0].toLowerCase(),title:"Download",icon:(0,n.jsx)(se.Z,{}),checked:r.services[0].access===me[0].toLowerCase()},{name:me[1].toLowerCase(),value:me[1].toLowerCase(),title:me[1],icon:(0,n.jsx)(oe.Z,{}),checked:r.services[0].access===me[1].toLowerCase()},{name:me[2].toLowerCase(),value:me[2].toLowerCase(),title:me[2],icon:(0,n.jsx)(le,{}),checked:r.services[0].access===me[2].toLowerCase()}];return(0,a.useEffect)((function(){null!==r.services[0].algorithmPrivacy&&void 0!==r.services[0].algorithmPrivacy&&i("services[0].access",!0===r.services[0].algorithmPrivacy?"compute":"access")}),[r.services[0].algorithmPrivacy,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("dataTokenOptions",p.uZ.X)),{component:g.Z,name:"services[0].dataTokenOptions"})),"algorithm"===r.metadata.type?(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("algorithmPrivacy",p.uZ.X)),{component:g.Z,name:"services[0].algorithmPrivacy"})):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("access",p.uZ.X)),{component:g.Z,name:"services[0].access",options:c})),"compute"===r.services[0].access&&(0,n.jsx)(ne.Z,{className:de().fieldWarning,state:"info",text:e.warning.ctd}),"stream"===r.services[0].access&&(0,n.jsx)(ne.Z,{className:de().fieldWarning,state:"info",text:e.warning.stream})]}),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("providerUrl",p.uZ.X)),{component:g.Z,name:"services[0].providerUrl"})),"stream"===r.services[0].access?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("streamFiles",p.uZ.X)),{component:g.Z,name:"services[0].streamFiles"})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("streamDocs",p.uZ.X)),{component:g.Z,name:"services[0].streamDocs"}))]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("files",p.uZ.X)),{component:g.Z,name:"services[0].files"})),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("links",p.uZ.X)),{component:g.Z,name:"services[0].links"}))]}),(0,n.jsx)(u.gN,(0,o.Z)((0,s.Z)({},(0,Z.R)("timeout",p.uZ.X)),{component:g.Z,name:"services[0].timeout"}))]})}var fe=r(89087),ve=r.n(fe),ge=r(9014),xe=r(19098),be=r(30595),ye=r(33365),ke=r(31304),we=r.n(ke),Ze=r(55152);function _e(e){var t=e.split(".");return t[t.length-1]}function je(e){if(""!==e)return Ke.find((function(t){return"".concat(t.image,":").concat(t.tag)===e}))}function Fe(e){return e.toISOString().replace(/\.[0-9]{3}Z/,"Z")}function Te(e){var t=null===e||void 0===e?void 0:e.split(",");return null===t||void 0===t?void 0:t.map((function(e){return we()(e).toLowerCase()}))}function Ce(e,t,r){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,i.Z)(l().mark((function e(t,r,n){var a,i,o,c,u,d,p,m,h,f,v,g,x,b,y,k,w,Z,_,j,F,T,C,N,I,P,R,A,D,E,O,q,S,M;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.metadata,o=t.services,c=t.user,pe.KF.log("MyFile:",t),pe.KF.log("services:",o[0]),u=c.chainId,d=c.accountId,p=i.type,m=i.name,h=i.description,f=i.tags,v=i.author,g=i.termsAndConditions,x=i.dockerImage,b=i.dockerImageCustom,y=i.dockerImageCustomTag,k=i.dockerImageCustomEntrypoint,i.dockerImageCustomChecksum,w=o[0],Z=w.access,_=w.files,j=w.links,F=w.providerUrl,T=w.timeout,C=w.streamDocs,N=w.streamFiles,I=n?(0,pe.Kt)(n,u):"0x...",P=Fe(new Date),R=!r&&!n,A=(null===_||void 0===_?void 0:_.length)&&_[0].valid&&[(0,Ze.N)(_[0].url)],D=(null===j||void 0===j?void 0:j.length)&&j[0].valid&&[(0,Ze.N)(j[0].url)],E=(0,s.Z)({created:P,updated:P,type:p,name:m,description:h,tags:Te(f),author:v,license:"https://market.oceanprotocol.com/terms",links:D,additionalInformation:{termsAndConditions:g}},"algorithm"===p&&""!==x&&{algorithm:{language:(null===A||void 0===A?void 0:A.length)?_e(A[0]):"",version:"0.1",container:{entrypoint:"custom"===x?k:je(x).entrypoint,image:"custom"===x?b:je(x).image,tag:"custom"===x?y:je(x).tag,checksum:"custom"===x?"":je(x).checksum}}}),O={nftAddress:n,datatokenAddress:r,files:[{type:"url",index:0,url:_[0].url,streamUrl:null===(a=N[0])||void 0===a?void 0:a.url,method:"GET"}]},pe.KF.log("File:",_[0]),e.t0=!R&&(null===_||void 0===_?void 0:_.length)&&(null===N||void 0===N?void 0:N.length)&&_[0].valid&&N[0].valid,!e.t0){e.next=20;break}return e.next=19,(0,ye.HH)(O,F.url);case 19:e.t0=e.sent;case 20:return q=e.t0,S=(0,s.Z)({id:(0,pe.XR)(r+q),type:Z,files:q||"",docs:C[0].url,datatokenAddress:r,serviceEndpoint:F.url,timeout:(0,xe.s4)(T)},"compute"===Z&&{compute:t.services[0].computeOptions}),M=(0,s.Z)({"@context":["https://w3id.org/did/v1"],id:I,nftAddress:n,version:"4.1.0",chainId:u,metadata:E,services:[S]},!r&&{datatokens:[{name:t.services[0].dataTokenOptions.name,symbol:t.services[0].dataTokenOptions.symbol}],nft:(0,s.Z)({},(0,be.x$)(null===t||void 0===t?void 0:t.metadata.nft,d))}),e.abrupt("return",M);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t,r,n,a){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,i.Z)(l().mark((function e(t,r,n,a,i){var s,o,c,u,p,m,h,f,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,be.x$)(t.metadata.nft,r,t.metadata.transferable),pe.KF.log("[publish]_ values_: ",t),pe.KF.log("[publish] Creating NFT with metadata",s),o={templateIndex:2,minter:r,paymentCollector:r,mpFeeAddress:d.marketFeeAddress,feeToken:t.pricing.baseToken.address,feeAmount:d.publisherMarketOrderFee,cap:"115792089237316195423570985008687907853269984665640564039457",name:t.services[0].dataTokenOptions.name,symbol:t.services[0].dataTokenOptions.symbol},pe.KF.log("[publish] Creating datatoken with ercParams",o),e.t0=t.pricing.type,e.next="fixed"===e.t0?9:"free"===e.t0?19:29;break;case 9:return m={fixedRateAddress:n.fixedRateExchangeAddress,baseTokenAddress:t.pricing.baseToken.address,owner:r,marketFeeCollector:d.marketFeeAddress,baseTokenDecimals:t.pricing.baseToken.decimals,datatokenDecimals:18,fixedRate:t.pricing.price.toString(),marketFee:d.publisherMarketFixedSwapFee,withMint:!0},pe.KF.log("[publish] Creating fixed pricing with freParams",m),e.next=13,a.createNftErc20WithFixedRate(r,s,o,m);case 13:return h=e.sent,c=h.events.NFTCreated.returnValues[0],u=h.events.TokenCreated.returnValues[0],p=h.transactionHash,pe.KF.log("[publish] createNftErcWithFixedRate tx",p),e.abrupt("break",29);case 19:return f={dispenserAddress:n.dispenserAddress,maxTokens:i.utils.toWei("1"),maxBalance:i.utils.toWei("1"),withMint:!0,allowedSwapper:pe.r_},pe.KF.log("[publish] Creating free pricing with dispenserParams",f),e.next=23,a.createNftErc20WithDispenser(r,s,o,f);case 23:return v=e.sent,c=v.events.NFTCreated.returnValues[0],u=v.events.TokenCreated.returnValues[0],p=v.transactionHash,pe.KF.log("[publish] createNftErcWithDispenser tx",p),e.abrupt("break",29);case 29:return e.abrupt("return",{erc721Address:c,datatokenAddress:u,txHash:p});case 30:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Re(){var e=(0,a.useState)(),t=e[0],r=e[1],s=(0,u.u6)().values;return(0,a.useEffect)((function(){function e(){return e=(0,i.Z)(l().mark((function e(){var t,n,a,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Ce(s);case 3:(o=e.sent).accessDetails={type:s.pricing.type,addressOrId:pe.r_,price:"".concat(s.pricing.price),baseToken:{address:pe.r_,name:(null===(t=s.pricing)||void 0===t||null===(n=t.baseToken)||void 0===n?void 0:n.symbol)||"OCEAN",symbol:(null===(a=s.pricing)||void 0===a||null===(i=a.baseToken)||void 0===i?void 0:i.symbol)||"OCEAN"},datatoken:{address:pe.r_,name:"",symbol:""},isPurchasable:!0,isOwned:!1,validOrderTx:"",publisherMarketOrderFee:"0"},r(o);case 6:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s]),(0,n.jsxs)("div",{className:ve().preview,children:[(0,n.jsx)("h2",{className:ve().previewTitle,children:"Preview"}),(0,n.jsx)("h3",{className:ve().assetTitle,children:s.metadata.name}),t&&(0,n.jsx)(ge.Z,{asset:t})]})}var Ae=r(92618),De=r.n(Ae),Ee=r(8960),Oe=r.n(Ee),qe=r(16537),Se=r(84307),Me=r.n(Se);function Le(e){var t=e.txCount,r=e.chainId,a=e.txHash;return a?(0,n.jsx)(qe.Z,{networkId:r,path:"/tx/".concat(a),className:Me().txHash,children:"View Transaction"}):(0,n.jsxs)("span",{className:Me().txHash,children:[t," Transaction",t>1?"s":""]})}function He(){var e=(0,u.u6)().values,t=Object.entries(e.feedback).map((function(t,r){var a=(0,f.Z)(t,2),i=(a[0],a[1]);return(0,n.jsxs)("li",{className:Oe()[i.status],children:[(0,n.jsx)("h3",{className:Oe().title,children:i.name}),(0,n.jsx)("div",{className:Oe().txs,children:i.txCount>0&&(0,n.jsx)(Le,{txCount:i.txCount,chainId:e.user.chainId,txHash:i.txHash})}),(0,n.jsx)("p",{className:Oe().description,children:i.description}),i.errorMessage&&(0,n.jsx)("span",{title:i.errorMessage,className:Oe().errorMessage,children:i.errorMessage})]},r)}));return(0,n.jsx)("ol",{className:Oe().feedback,children:t})}function Ue(){return(0,n.jsx)("div",{className:De().submission,children:(0,n.jsx)(He,{})})}var Ve=JSON.parse('{"1":{"name":"Create Tokens & Pricing","description":"The Data NFT representing your asset, the Datatokens defining access to it, and the pricing schema are all created in a single transaction.","status":"pending","txCount":1},"2":{"name":"Construct & Encrypt DDO","description":"Entered metadata is transformed into a structured document (DDO) where the file URLs, and the whole DDO itself are encrypted.","status":"pending","txCount":0},"3":{"name":"Publish DDO","description":"The encrypted DDO is stored on-chain as part of the Data NFT. Indexers like Aquarius can decrypt the DDO for displaying purposes, but the file URLs can only be decrypted by exchanging the respective datatokens for this asset.","status":"pending","txCount":1}}'),Xe=[{step:1,title:p.Pu.T,component:(0,n.jsx)(ie,{})},{step:2,title:p.uZ.T,component:(0,n.jsx)(he,{})},{step:3,title:p.D.T,component:(0,n.jsx)(K,{})},{step:4,title:p.RN.T,component:(0,n.jsx)(Re,{})},{step:5,title:p.I8.T,component:(0,n.jsx)(Ue,{})}],Be={user:{stepCurrent:1,chainId:1,accountId:""},metadata:{nft:{name:"",symbol:"",description:"",image_data:""},transferable:!0,type:"dataset",name:"",author:"",description:"",tags:"",termsAndConditions:!1,dockerImage:"",dockerImageCustom:"",dockerImageCustomTag:"",dockerImageCustomEntrypoint:""},services:[{files:[{url:""}],links:[{url:""}],streamDocs:[{url:""}],streamFiles:[{url:""}],dataTokenOptions:{name:"",symbol:""},timeout:"",access:"access",providerUrl:{url:"https://provider.mainnet.oceanprotocol.com",valid:!0,custom:!1},computeOptions:{allowRawAlgorithm:!1,allowNetworkAccess:!0,publisherTrustedAlgorithmPublishers:[],publisherTrustedAlgorithms:[]}}],pricing:{baseToken:{address:"",name:"",symbol:"OCEAN",decimals:18},price:0,type:"true"===d.allowFixedPricing?"fixed":"free",freeAgreement:!1}},Ke=[{image:"node",tag:"18.6.0",entrypoint:"node $ALGO",checksum:"sha256:c60726646352202d95de70d9e8393c15f382f8c6074afc5748b7e570ccd5995f"},{image:"python",tag:"3.10.5",entrypoint:"python $ALGO",checksum:"sha256:607635763e54907fd75397fedfeb83890e62a0f9b54a1d99d27d748c5d269be4"}],We=Ve,ze=r(94427),$e=r(61389),Ge=r(36910),Je=r(95044),Ye=r.n(Je),Qe=JSON.parse('{"title":"Publish","description":"Highlight the important features of your dataset or algorithm to make it more discoverable and catch the interest of data consumers.","warning":"Publishing into a test network first is strongly recommended. Please familiarize yourself with [the market](https://oceanprotocol.com/technology/marketplaces), [the risks](https://blog.oceanprotocol.com/on-staking-on-data-in-ocean-market-3d8e09eb0a13), and the [Terms of Use](/terms).","tooltipAvailableNetworks":"Assets are published to the network your wallet is connected to. These networks are currently supported:"}'),et=r(31637),tt=r(61533),rt=r.n(tt),nt=r(19e3),at=r.n(nt),it=r(76047),st=r(73256),ot=r(45480);function ct(e){var t=e.chainId,r=(0,st.ZP)().networksList,a=(0,A.$6)().web3Provider;return(0,n.jsx)(it.Z,{style:"text",className:at().button,onClick:function(){return function(e){var t=r.find((function(t){return t.chainId===e}));(0,ot.Pj)(a,t)}(t)},children:(0,n.jsx)(Ge.Z,{networkId:t},t)})}function lt(){var e=(0,st.ZP)().networksList,t=(0,D.c8)().appConfig,r=[{title:"Main",data:(0,st.xc)("mainnet",t.chainIdsSupported,e)},{title:"Test",data:(0,st.xc)("testnet",t.chainIdsSupported,e)}];return(0,n.jsxs)("div",{className:rt().content,children:[Qe.tooltipAvailableNetworks,r.map((function(e){return e.data.length>0&&(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("h4",{className:rt().title,children:e.title}),(0,n.jsx)("ul",{className:rt().networks,children:(t=e.data,t.map((function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(ct,{chainId:e})},e)})))})]},e.title);var t}))]})}function ut(e){var t=e.networkId,r=(0,A.$6)(),a=r.isSupportedOceanNetwork,i=r.accountId;return(0,n.jsxs)(n.Fragment,{children:[Qe.title," ",t&&(0,n.jsxs)(n.Fragment,{children:["into",(0,n.jsx)(Ge.Z,{networkId:t,className:a||!i?Ye().network:"".concat(Ye().network," ").concat(Ye().error)}),(0,n.jsx)(N.Z,{content:(0,n.jsx)(lt,{}),className:a||!i?Ye().tooltip:"".concat(Ye().tooltip," ").concat(Ye().error),children:(0,n.jsx)(et.Z,{className:Ye().infoIcon})})]})]})}var dt=r(19279),pt=r.n(dt),mt=r(54746),ht=r(11163),ft=r.n(ht),vt=r(94974);function gt(e){var t,r,a,s=e.scrollToRef,o=e.did,c=function(e){var t=d.query.step;d.push({pathname:"".concat(d.pathname),query:{step:parseInt(t)+("next"===e?1:-1)}}),s.current.scrollIntoView()},d=(0,ht.useRouter)(),p=(0,A.$6)().isSupportedOceanNetwork,m=(0,u.u6)(),h=m.values,f=m.errors,v=m.isValid,g=m.isSubmitting,x=(0,A.$6)(),b=x.connect,y=x.accountId;function k(){return(k=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=1===h.user.stepCurrent&&void 0!==f.metadata||2===h.user.stepCurrent&&void 0!==f.services||3===h.user.stepCurrent&&void 0!==f.pricing,Z="error"===(null===(t=h.feedback)||void 0===t?void 0:t[1].status)||"error"===(null===(r=h.feedback)||void 0===r?void 0:r[2].status)||"error"===(null===(a=h.feedback)||void 0===a?void 0:a[3].status);return(0,n.jsx)("footer",{className:pt().actions,children:o?(0,n.jsx)(mt.Z,{success:"Successfully published!",action:(0,n.jsx)(it.Z,{style:"primary",to:"/asset/".concat(o),children:"View Asset"})}):(0,n.jsxs)(n.Fragment,{children:[h.user.stepCurrent>1&&(0,n.jsx)(it.Z,{onClick:function(e){e.preventDefault(),c("prev")},disabled:g,children:"Back"}),h.user.stepCurrent<Xe.length?(0,n.jsx)(it.Z,{style:"primary",onClick:function(e){e.preventDefault(),c("next")},disabled:w,children:"Continue"}):y?p?(0,n.jsx)(it.Z,{type:"submit",style:"primary",disabled:g||!v,children:g?(0,n.jsx)(vt.Z,{white:!0}):Z?"Retry":"Submit"}):(0,n.jsx)(N.Z,{content:(0,n.jsx)(lt,{}),children:(0,n.jsxs)(it.Z,{type:"submit",style:"primary",disabled:!0,className:pt().infoButton,children:["Unsupported Network ",(0,n.jsx)(et.Z,{className:pt().infoIcon})]})}):(0,n.jsx)(it.Z,{type:"submit",style:"primary",onClick:function(e){return k.apply(this,arguments)},children:"Connect Wallet"})]})})}var xt=r(54845),bt=r(22324),yt=r.n(bt);function kt(){var e=(0,u.u6)().values,t=(0,a.useState)(),r=t[0],s=t[1];return(0,a.useEffect)((function(){function t(){return t=(0,i.Z)(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return pe.KF.log("thisValue:",e),t.next=3,Ce(e);case 3:r=t.sent,s(r);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),(0,n.jsxs)("div",{className:yt().debug,children:[(0,n.jsx)(xt.Z,{title:"Collected Form Values",output:e}),(0,n.jsx)(xt.Z,{title:"Transformed DDO Values",output:r})]})}var wt=r(67772),Zt=r.n(wt);function _t(){var e=function(e){r.push("/publish/".concat(e))},t=function(e){var t,r,n=void 0===o.metadata,a=void 0===o.services,i=void 0===o.pricing&&((null===(t=c.pricing)||void 0===t?void 0:t.price)||(null===(r=c.pricing)||void 0===r?void 0:r.freeAgreement));return 1===e&&n||2===e&&a||3===e&&i||4===e&&(n&&a&&i)?Zt().success:null},r=(0,ht.useRouter)(),i=(0,u.u6)(),s=i.values,o=i.errors,c=i.touched,l=i.setFieldValue;return(0,a.useEffect)((function(){var t,n=1;if(null===(t=r.query)||void 0===t?void 0:t.step){var a=r.query.step,i=parseInt(a);i<=Xe.length?n=i:e(1)}l("user.stepCurrent",n)}),[r]),(0,n.jsx)("nav",{className:Zt().navigation,children:(0,n.jsx)("ol",{children:Xe.map((function(r){return(0,n.jsx)("li",{onClick:function(){return e(r.step)},className:"".concat(s.user.stepCurrent===r.step?Zt().current:null," ").concat(t(r.step)),children:r.title},r.title)}))})})}var jt=r(53740);function Ft(e){var t,r,n=e.feedback,i=(0,A.$6)(),c=i.chainId,l=i.accountId,d=(0,u.u6)(),p=d.values,m=d.setFieldValue,h=d.touched,f=d.setTouched;return(0,a.useEffect)((function(){c&&l&&(m("user.chainId",c),m("user.accountId",l))}),[c,l,m]),(0,a.useEffect)((function(){c&&m("pricing.baseToken",null)}),[c,m]),(0,a.useEffect)((function(){m("feedback",n)}),[n,m]),(0,a.useEffect)((function(){m("feedback",(0,o.Z)((0,s.Z)({},n),{1:(0,o.Z)((0,s.Z)({},n[1]),{txCount:1,description:We[1].description})}))}),[p.pricing.type,n,m]),(0,a.useEffect)((function(){var e,t;if((null===p||void 0===p||null===(e=p.user)||void 0===e?void 0:e.chainId)&&!0!==(null===(t=null===p||void 0===p?void 0:p.services[0])||void 0===t?void 0:t.providerUrl.custom)){var r=(0,jt.H)(p.user.chainId);r&&m("services[0].providerUrl",{url:r.providerUri,valid:!0,custom:!1}),f((0,o.Z)((0,s.Z)({},h),{services:[{providerUrl:{url:!0}}]}))}}),[null===p||void 0===p||null===(t=p.user)||void 0===t?void 0:t.chainId,null===(r=null===p||void 0===p?void 0:p.services[0])||void 0===r?void 0:r.providerUrl.custom,m,f]),Xe.filter((function(e){return e.step===p.user.stepCurrent}))[0].component}var Tt=r(49973);var Ct=function(){var e=(0,A.$6)(),t=e.web3,r=e.chainId,n=(0,a.useState)(),i=n[0],s=n[1];return(0,a.useEffect)((function(){if(t&&r){var e=(0,jt.H)(r),n=new pe.Vf(null===e||void 0===e?void 0:e.erc721FactoryAddress,t);s(n)}}),[t,r]),i},Nt=r(73766),It=r(74231),Pt=r(44110),Rt={type:It.Z_().matches(/dataset|algorithm|data stream/g,{excludeEmptyString:!0}).required("Required"),name:It.Z_().min(4,(function(e){return"Title must be at least ".concat(e.min," characters")})).required("Required"),description:It.Z_().min(10,(function(e){return"Description must be at least ".concat(e.min," characters")})).max(5e3,(function(e){return"Description must have maximum ".concat(e.max," characters")})).required("Required"),author:It.Z_().required("Required"),tags:It.Z_().nullable(),termsAndConditions:It.O7().required("Required").isTrue("Please agree to the Terms and Conditions.")},At={files:It.IX().of(It.Ry().shape({url:It.Z_().url("Must be a valid URL.").required("Required"),valid:It.O7().isTrue().required("File must be valid.")})).min(1,"At least one file is required.").required("Enter a valid URL and click ADD FILE."),streamFiles:It.IX().of(It.Ry().shape({url:It.Z_().url("Must be a valid URL.").required("Required"),valid:It.O7().isTrue().required("File must be valid.")})).min(1,(function(e){return"At least one file is required."})).required("Enter a valid URL and click ADD FILE."),links:It.IX().of(It.Ry().shape({url:It.Z_().url("Must be a valid URL."),valid:It.O7()})).nullable(),dataTokenOptions:It.Ry().shape({name:It.Z_(),symbol:It.Z_()}),timeout:It.Z_().required("Required"),access:It.Z_().matches(/compute|access|stream/g).required("Required"),providerUrl:It.Ry().shape({url:It.Z_().url("Must be a valid URL.").required("Required"),valid:It.O7().isTrue().required("Valid Provider is required."),custom:It.O7()})},Dt={type:It.Z_().matches(/fixed|free/g,{excludeEmptyString:!0}).required("Required"),price:It.Rx().min(1,(function(e){return"Must be more or equal to ".concat(e.min)})).max(1e6,(function(e){return"Must be less than or equal to ".concat(e.max)})).test("maxDigitsAfterDecimal","Must have maximum ".concat(Nt.z," decimal digits"),(function(e){return(0,Pt.FD)(Nt.z).test(null===e||void 0===e?void 0:e.toString())})).required("Required")},Et=It.Ry().shape({user:It.Ry().shape({stepCurrent:It.Rx(),chainId:It.Rx().required("Required"),accountId:It.Z_().required("Required")}),metadata:It.Ry().shape(Rt),services:It.IX().of(It.Ry().shape(At)),pricing:It.Ry().shape(Dt)}),Ot=r(62773);function qt(e){var t=e.content,r=(0,Tt.o)().debug,c=(0,A.$6)(),d=c.accountId,p=c.web3,m=c.chainId,h=(0,ze.I)(d),f=h.isInPurgatory,v=h.purgatoryData,g=(0,a.useRef)(),x=Ct(),b=(0,Ot.E)(),y=(0,a.useState)(We),k=y[0],w=y[1],Z=(0,a.useState)(),_=Z[0],j=Z[1],F=(0,a.useState)(),T=F[0],C=F[1],N=(0,a.useState)(),I=N[0],P=N[1],R=(0,a.useState)(),D=R[0],E=R[1],O=(0,a.useState)(),q=O[0],S=O[1];function M(e){return L.apply(this,arguments)}function L(){return L=(0,i.Z)(l().mark((function e(t){var r,n,a,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w((function(e){return(0,o.Z)((0,s.Z)({},e),{1:(0,o.Z)((0,s.Z)({},e[1]),{status:"active",errorMessage:null})})})),e.prev=1,r=(0,jt.H)(m),pe.KF.log("[publish] using config: ",r),pe.KF.log("[publish] values: ",t),e.next=7,Ie(t,d,r,x,p);case 7:if(n=e.sent,a=n.erc721Address,i=n.datatokenAddress,c=n.txHash,Boolean(a&&i&&c)){e.next=14;break}throw new Error("No Token created. Please try again.");case 14:return pe.KF.log("[publish] createTokensAndPricing tx",c),pe.KF.log("[publish] erc721Address",a),pe.KF.log("[publish] datatokenAddress",i),w((function(e){return(0,o.Z)((0,s.Z)({},e),{1:(0,o.Z)((0,s.Z)({},e[1]),{status:"success",txHash:c})})})),e.abrupt("return",{erc721Address:a,datatokenAddress:i});case 21:e.prev=21,e.t0=e.catch(1),pe.KF.error("[publish] error",e.t0.message),e.t0.message.length>65&&(e.t0.message="No Token created. Please try again."),w((function(t){return(0,o.Z)((0,s.Z)({},t),{1:(0,o.Z)((0,s.Z)({},t[1]),{status:"error",errorMessage:e.t0.message})})}));case 26:case"end":return e.stop()}}),e,null,[[1,21]])}))),L.apply(this,arguments)}function H(e,t,r){return U.apply(this,arguments)}function U(){return U=(0,i.Z)(l().mark((function e(t,r,n){var a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w((function(e){return(0,o.Z)((0,s.Z)({},e),{2:(0,o.Z)((0,s.Z)({},e[2]),{status:"active",errorMessage:null})})})),e.prev=1,n&&r){e.next=4;break}throw new Error("No NFT or Datatoken received. Please try again.");case 4:return e.next=6,Ce(t,n,r);case 6:if(a=e.sent){e.next=9;break}throw new Error("No DDO received. Please try again.");case 9:return P(a),pe.KF.log("[publish] Got new DDO",a),e.next=13,pe.ag.encrypt(a,t.services[0].providerUrl.url,b());case 13:if(i=e.sent){e.next=16;break}throw new Error("No encrypted DDO received. Please try again.");case 16:return E(i),pe.KF.log("[publish] Got encrypted DDO",i),w((function(e){return(0,o.Z)((0,s.Z)({},e),{2:(0,o.Z)((0,s.Z)({},e[2]),{status:"success"})})})),e.abrupt("return",{ddo:a,ddoEncrypted:i});case 22:e.prev=22,e.t0=e.catch(1),pe.KF.error("[publish] error",e.t0.message),w((function(t){return(0,o.Z)((0,s.Z)({},t),{2:(0,o.Z)((0,s.Z)({},t[2]),{status:"error",errorMessage:e.t0.message})})}));case 26:case"end":return e.stop()}}),e,null,[[1,22]])}))),U.apply(this,arguments)}function V(e,t,r){return X.apply(this,arguments)}function X(){return X=(0,i.Z)(l().mark((function e(t,r,n){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w((function(e){return(0,o.Z)((0,s.Z)({},e),{3:(0,o.Z)((0,s.Z)({},e[3]),{status:"active",errorMessage:null})})})),e.prev=1,r&&n){e.next=4;break}throw new Error("No DDO received. Please try again.");case 4:return e.next=6,(0,be.MI)(r,d,p,t.metadata.nft,b());case 6:if(null===(a=e.sent)||void 0===a?void 0:a.transactionHash){e.next=9;break}throw new Error("Metadata could not be written into the NFT. Please try again.");case 9:return pe.KF.log("[publish] setMetadata result",a),w((function(e){return(0,o.Z)((0,s.Z)({},e),{3:(0,o.Z)((0,s.Z)({},e[3]),{status:a?"success":"error",txHash:null===a||void 0===a?void 0:a.transactionHash})})})),e.abrupt("return",{did:r.id});case 14:e.prev=14,e.t0=e.catch(1),pe.KF.error("[publish] error",e.t0.message),w((function(t){return(0,o.Z)((0,s.Z)({},t),{3:(0,o.Z)((0,s.Z)({},t[3]),{status:"error",errorMessage:e.t0.message})})}));case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))),X.apply(this,arguments)}function B(e){return K.apply(this,arguments)}function K(){return K=(0,i.Z)(l().mark((function e(t){var r,n,a,i,s,o,c,u,d,p,m,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=T,a=I,i=D,s=q,(r=_)&&n){e.next=15;break}return e.next=8,M(t);case 8:o=e.sent,c=o.erc721Address,u=o.datatokenAddress,r=c,n=u,j(c),C(u);case 15:if(a&&i){e.next=25;break}return e.next=18,H(t,r,n);case 18:d=e.sent,p=d.ddo,m=d.ddoEncrypted,a=p,i=m,P(p),E(m);case 25:if(s){e.next=31;break}return e.next=28,V(t,a,i);case 28:h=e.sent.did,s=h,S(h);case 31:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}return f&&v?null:(0,n.jsx)(u.J9,{initialValues:Be,validationSchema:Et,onSubmit:function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.KF.log("YepValues:",t),e.next=3,B(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var a=e.values;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($e.Z,{title:(0,n.jsx)(ut,{networkId:a.user.chainId}),description:t.description}),(0,n.jsxs)(u.l0,{className:de().form,ref:g,children:[(0,n.jsx)(_t,{}),(0,n.jsx)(Ft,{feedback:k}),(0,n.jsx)(gt,{scrollToRef:g,did:q})]}),r&&(0,n.jsx)(kt,{})]})}})}var St=r(229);function Mt(){var e=Qe.title,t=Qe.description;return(0,n.jsx)(St.Z,{title:e,description:t,uri:ft().route,noPageHeader:!0,children:(0,n.jsx)(qt,{content:Qe})})}},19279:function(e){e.exports={actions:"Actions_actions__QFXHB",infoIcon:"Actions_infoIcon__zwDh8",infoButton:"Actions_infoButton__8G3fj"}},19e3:function(e){e.exports={button:"Network_button__5TtqP"}},61533:function(e){e.exports={networks:"AvailableNetworks_networks__nO8MI",title:"AvailableNetworks_title__Wjrr8",content:"AvailableNetworks_content__1WaCm"}},22324:function(e){e.exports={debug:"Debug_debug__HKPSH"}},78445:function(e){e.exports={termsLink:"Metadata_termsLink__Xxq6H",fieldWarning:"Metadata_fieldWarning__QQwEP Publish_fieldWarning__z5bFR"}},67772:function(e){e.exports={navigation:"Navigation_navigation__Ynw3J",current:"Navigation_current__LJfnX",success:"Navigation_success__4fl6W"}},89087:function(e){e.exports={preview:"Preview_preview__bFPsi",previewTitle:"Preview_previewTitle__3EsFN",assetTitle:"Preview_assetTitle__QYWM9"}},60775:function(e){e.exports={coinSelect:"CoinSelect_coinSelect__cHpeV InputElement_select__GZZnj InputElement_input__LgRt4"}},22649:function(e){e.exports={fees:"Fees_fees__A53Ij"}},15495:function(e){e.exports={title:"Fixed_title__vjfbk",tokens:"Fixed_tokens__YNWrB",subtitle:"Fixed_subtitle__N7dC1",alertArea:"Fixed_alertArea__0_7L2"}},74833:function(e){e.exports={form:"Price_form__aMXjr",price:"Price_price__HX81j",grid:"Price_grid__TFEgU",fixed:"Price_fixed__rAoqh",datatoken:"Price_datatoken___sNDD",conversion:"Price_conversion__6KDfp",free:"Price_free__LtJMx"}},32468:function(e){e.exports={pricing:"Pricing_pricing__799Sb",title:"Pricing_title__bdkub"}},8960:function(e){e.exports={feedback:"Feedback_feedback__oXosl",active:"Feedback_active__7KKGy",loader:"Feedback_loader__rrt0N",success:"Feedback_success__HE9hu",error:"Feedback_error__n_BTy",title:"Feedback_title__EZzth",txs:"Feedback_txs___JVB5",description:"Feedback_description__8JZvp",errorMessage:"Feedback_errorMessage__xi8Wr"}},84307:function(e){e.exports={txHash:"TransactionCount_txHash__9NMP5"}},92618:function(){},95044:function(e){e.exports={network:"Title_network__FFYls",tooltip:"Title_tooltip___IRtU",error:"Title_error__E3skD",infoIcon:"Title_infoIcon__moj1D Actions_infoIcon__zwDh8"}},48497:function(e){e.exports={form:"Publish_form__4Jt8S Box_box__l77_J",fieldWarning:"Publish_fieldWarning__z5bFR"}}},function(e){e.O(0,[38,951,44,766,410,540,430,236,774,888,179],(function(){return t=55204,e(e.s=t);var t}));var t=e.O();_N_E=t}]);