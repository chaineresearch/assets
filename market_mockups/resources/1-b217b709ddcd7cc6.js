(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{56755:function(e){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t="array",s="bits",n="byte",a="bytes",i="",o="exponent",r="function",l="iec",c="Invalid number",d="Invalid rounding method",u="jedec",v="object",p=".",m="round",f="kbit",h="string",x={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function b(b){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=_.bits,y=void 0!==g&&g,k=_.pad,w=void 0!==k&&k,j=_.base,S=void 0===j?-1:j,D=_.round,A=void 0===D?2:D,N=_.locale,F=void 0===N?i:N,T=_.localeOptions,Z=void 0===T?{}:T,C=_.separator,E=void 0===C?i:C,O=_.spacer,I=void 0===O?" ":O,P=_.symbols,B=void 0===P?{}:P,M=_.standard,L=void 0===M?i:M,R=_.output,U=void 0===R?h:R,G=_.fullform,K=void 0!==G&&G,z=_.fullforms,H=void 0===z?[]:z,W=_.exponent,Y=void 0===W?-1:W,J=_.roundingMethod,q=void 0===J?m:J,V=_.precision,$=void 0===V?0:V,Q=Y,X=Number(b),ee=[],te=0,se=i;-1===S&&0===L.length?(S=10,L=u):-1===S&&L.length>0?S=(L=L===l?l:u)===l?2:10:L=10===(S=2===S?2:10)||L===u?u:l;var ne=10===S?1e3:1024,ae=!0===K,ie=X<0,oe=Math[q];if(isNaN(b))throw new TypeError(c);if(e(oe)!==r)throw new TypeError(d);if(ie&&(X=-X),(-1===Q||isNaN(Q))&&(Q=Math.floor(Math.log(X)/Math.log(ne)))<0&&(Q=0),Q>8&&($>0&&($+=8-Q),Q=8),U===o)return Q;if(0===X)ee[0]=0,se=ee[1]=x.symbol[L][y?s:a][Q];else{te=X/(2===S?Math.pow(2,10*Q):Math.pow(1e3,Q)),y&&(te*=8)>=ne&&Q<8&&(te/=ne,Q++);var re=Math.pow(10,Q>0?A:0);ee[0]=oe(te*re)/re,ee[0]===ne&&Q<8&&-1===Y&&(ee[0]=1,Q++),se=ee[1]=10===S&&1===Q?y?f:"kB":x.symbol[L][y?s:a][Q]}if(ie&&(ee[0]=-ee[0]),$>0&&(ee[0]=ee[0].toPrecision($)),ee[1]=B[ee[1]]||ee[1],!0===F?ee[0]=ee[0].toLocaleString():F.length>0?ee[0]=ee[0].toLocaleString(F,Z):E.length>0&&(ee[0]=ee[0].toString().replace(p,E)),w&&!1===Number.isInteger(ee[0])&&A>0){var le=E||p,ce=ee[0].toString().split(le),de=ce[1]||i,ue=de.length,ve=A-ue;ee[0]="".concat(ce[0]).concat(le).concat(de.padEnd(ue+ve,"0"))}return ae&&(ee[1]=H[Q]?H[Q]:x.fullform[L][Q]+(y?"bit":n)+(1===ee[0]?i:"s")),U===t?ee:U===v?{value:ee[0],symbol:ee[1],exponent:Q,unit:se}:ee.join(I)}return b.partial=function(e){return function(t){return b(t,e)}},b}()},62773:function(e,t,s){"use strict";s.d(t,{E:function(){return a}});var n=s(67294),a=function(){var e=(0,n.useRef)(null),t=(0,n.useCallback)((function(){return e.current=new AbortController,e.current.signal}),[]);return(0,n.useEffect)((function(){return function(){e.current&&e.current.abort()}}),[]),t}},73766:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var n=6},66112:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var n=s(47568),a=s(14924),i=s(34051),o=s.n(i),r=s(85893),l=(s(67294),s(47166)),c=s.n(l),d=s(45480),u=s(10307),v=s(76047),p=s(4727),m=s(43721),f=s.n(m),h=c().bind(f());function x(e){var t=e.address,s=e.symbol,i=e.text,l=e.className,c=e.minimal,m=(0,u.$6)().web3Provider,x=h((0,a.Z)({button:!0,minimal:c},l,l));function b(){return(b=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,d.Js)(m,t,s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(v.Z,{className:x,style:"text",size:"small",onClick:function(){return b.apply(this,arguments)},children:[(0,r.jsx)("span",{className:f().logoWrap,children:(0,r.jsx)("div",{className:f().logo,children:(0,r.jsx)(p.Z,{})})}),(0,r.jsx)("span",{className:f().text,children:i||"Add ".concat(s)})]})}},54845:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(85893);s(67294);function a(e){var t=e.title,s=e.output;return(0,n.jsxs)("div",{style:{marginTop:"var(--spacer)"},children:[t&&(0,n.jsx)("h5",{children:t}),(0,n.jsx)("pre",{style:{wordWrap:"break-word"},children:(0,n.jsx)("code",{children:JSON.stringify(s,null,2)})})]})}},54746:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(85893),a=s(67294),i=s(50633),o=s(39822),r=s(19751),l=s.n(r),c={angle:90,spread:360,startVelocity:40,elementCount:70,dragFriction:.12,duration:3e3,stagger:3,width:"10px",height:"10px",perspective:"500px",colors:["var(--brand-pink)","var(--brand-purple)","var(--brand-violet)","var(--brand-grey-light)","var(--brand-grey-lighter)"]};function d(e){var t=e.success,s=e.action,r=e.className;return(0,a.useEffect)((function(){if(t){var e=document.querySelector("span[data-confetti]");(0,i.p)(e,c)}}),[t]),(0,n.jsxs)("div",{className:r||null,children:[(0,n.jsx)(o.Z,{text:t,state:"success"}),(0,n.jsx)("span",{className:l().action,"data-confetti":!0,children:s})]})}},11704:function(e,t,s){"use strict";s.d(t,{Z:function(){return I}});var n=s(85893),a=s(67294),i=s(10307),o=s(65688),r=s(84045),l=s.n(r),c=s(47568),d=s(34051),u=s.n(d),v=s(76047),p=s(2743),m=s.n(p),f=s(45480),h=s(73256),x=s(47066);function b(){var e=(0,i.$6)(),t=e.networkId,s=e.web3Provider,a=(0,x.Gs)().asset,o=(0,h.ZP)().networksList,r=(0,h.RB)(o,a.chainId),l=(0,h.RB)(o,t),d=(0,n.jsx)("strong",{children:(0,h.OA)(r,a.chainId)}),p=(0,n.jsx)("strong",{children:(0,h.OA)(l,t)});function b(){return(b=(0,c.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.find((function(e){return e.chainId===a.chainId}));case 2:t=e.sent,(0,f.Pj)(s,t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:m().text,children:["This asset is published on ",d," but your wallet is connected to ",p,". Connect to ",d," to interact with this asset."]}),(0,n.jsxs)(v.Z,{size:"small",onClick:function(){return function(){return b.apply(this,arguments)}()},children:["Switch to ",d]})]})}var _=s(26042),g=s(32656),y=s(3283),k=s.n(y),w=s(9669),j=s.n(w),S=s(53740),D="https://api.thegraph.com/subgraphs/name/blocklytics/ethereum-blocks",A='{"query":"  query Blocks{   blocks(first: 1, skip: 0, orderBy: number, orderDirection: desc, where: {number_gt: 9300000}) { id number timestamp  author  difficulty  gasUsed  gasLimit } }","variables":{},"operationName":"Blocks"}',N='{"query": "query Meta { _meta { block { hash number } deployment hasIndexingErrors } }", "variables": {},"operationName":"Meta"}';function F(e,t){return T.apply(this,arguments)}function T(){return(T=(0,c.Z)(u().mark((function e(t,s){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j().post(t,(0,_.Z)({},JSON.parse(s)));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),g.KF.error("Error parsing json: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Z(e){return C.apply(this,arguments)}function C(){return(C=(0,c.Z)(u().mark((function e(t){var s,n,a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("mainnet"!==t.network){e.next=8;break}return e.next=6,F(D,A);case 6:return a=e.sent,e.abrupt("return",Number(null===(n=null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.blocks[0])||void 0===n?void 0:n.number));case 8:return i=new(k())(t.nodeUri),e.next=11,i.eth.getBlockNumber();case 11:return o=e.sent,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return O.apply(this,arguments)}function O(){return(O=(0,c.Z)(u().mark((function e(t){var s,n,a,i,o,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,F("".concat(t,"/subgraphs/name/oceanprotocol/ocean-subgraph"),N);case 3:return o=e.sent,r=Number(null===o||void 0===o||null===(s=o.data)||void 0===s||null===(n=s.data)||void 0===n||null===(a=n._meta)||void 0===a||null===(i=a.block)||void 0===i?void 0:i.number),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){var t=e.networkId,s=e.isAssetNetwork,r=(0,i.$6)().accountId,d=function(e){var t=(0,i.$6)(),s=t.block,n=t.web3Loading,o=(0,a.useState)(),r=o[0],l=o[1],d=(0,a.useState)(),v=d[0],p=d[1],m=(0,a.useState)(!0),f=m[0],h=m[1],x=(0,a.useState)(!1),b=x[0],_=x[1],y=(0,a.useState)(),k=y[0],w=y[1];return(0,a.useEffect)((function(){if(e){var t=(0,S.H)(e);w(t)}}),[e]),(0,a.useEffect)((function(){function e(){return e=(0,c.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s,e.t0){e.next=5;break}return e.next=4,Z(k);case 4:e.t0=e.sent;case 5:t=e.t0,p(t),g.KF.log("[GraphStatus] Head block: ",t);case 8:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(null===k||void 0===k?void 0:k.nodeUri)&&!n&&function(){e.apply(this,arguments)}()}),[n,s,k]),(0,a.useEffect)((function(){function e(){return e=(0,c.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,E(k.subgraphUri);case 3:t=e.sent,l(t),_(!1),g.KF.log("[GraphStatus] Latest block from subgraph: ",t);case 7:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(null===k||void 0===k?void 0:k.subgraphUri)&&function(){e.apply(this,arguments)}()}),[k]),(0,a.useEffect)((function(){!r&&!v||n||b||h(!(v-r>30))}),[r,v,n,b]),{blockHead:v,blockGraph:r,isGraphSynced:f}}(t),v=d.isGraphSynced,p=d.blockGraph,m=d.blockHead,f=(0,a.useState)(),h=f[0],x=f[1],_=(0,a.useState)(),y=_[0],k=_[1],w=(0,a.useState)(),j=w[0],D=w[1],A=(0,a.useState)(!1),N=A[0],F=A[1];return(0,a.useEffect)((function(){F(!r||!1===s||!1===v),r&&s&&v||(r?!1===s?(x("error"),k("Not connected to asset network"),D("Please connect your Web3 wallet.")):!1===v?(x("warning"),k("Data out of sync"),D("The data for this network has only synced to Ethereum block ".concat(p," (out of ").concat(m,"). Transactions may fail! Please check back soon."))):(x("warning"),k("Something went wrong."),D("Something went wrong.")):(x("error"),k("No account connected"),D("Please connect your Web3 wallet.")))}),[r,v,s]),N?(0,n.jsxs)("section",{className:l().feedback,children:[(0,n.jsx)(o.Z,{state:h,"aria-hidden":!0}),(0,n.jsx)("h3",{className:l().title,children:y}),!1===s?(0,n.jsx)(b,{}):j&&(0,n.jsx)("p",{className:l().error,children:j})]}):null}},65688:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(14924),a=s(85893),i=(s(67294),s(47166)),o=s.n(i),r=s(11816),l=s.n(r),c=o().bind(l());function d(e){var t=e.state,s=e.className,i=c((0,n.Z)({status:!0,warning:"warning"===t,error:"error"===t},s,s));return(0,a.jsx)("i",{className:i})}},94782:function(e,t,s){"use strict";s.d(t,{Z:function(){return ms}});var n=s(85893),a=s(67294),i=s(75058),o=s(29730),r=s(90605),l=s.n(r),c=s(66961),d=s(47066),u=s(41664),v=s.n(u);function p(e){var t,s,a,i,r=e.ddo,u=function(){var e,t,s=null===r||void 0===r||null===(e=r.metadata)||void 0===e||null===(t=e.algorithm)||void 0===t?void 0:t.container,a=s.image,i=s.tag;return(0,n.jsx)("span",{children:"".concat(a,":").concat(i)})},p=(0,d.Gs)().isInPurgatory;return console.log({ddo:r}),r?(0,n.jsxs)("div",{className:l().metaFull,children:[!p&&(0,n.jsx)(o.Z,{title:"Data Author",content:null===r||void 0===r||null===(t=r.metadata)||void 0===t?void 0:t.author}),(0,n.jsx)(o.Z,{title:"Owners",content:(0,n.jsx)(c.Z,{account:null===r||void 0===r||null===(s=r.nft)||void 0===s?void 0:s.owner})}),"algorithm"===(null===r||void 0===r||null===(a=r.metadata)||void 0===a?void 0:a.type)&&(null===r||void 0===r||null===(i=r.metadata)||void 0===i?void 0:i.algorithm)&&(0,n.jsx)(o.Z,{title:"Docker Image",content:(0,n.jsx)(u,{})}),(0,n.jsx)(o.Z,{title:"DID",content:(0,n.jsx)("code",{children:null===r||void 0===r?void 0:r.id})}),"datastream"===(null===r||void 0===r?void 0:r.metadata.type)?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.Z,{title:"Stream API Documentation URL",content:(0,n.jsx)(v(),{href:null===r||void 0===r?void 0:r.services[0].docs,children:(0,n.jsx)("a",{title:"visit API page.",children:null===r||void 0===r?void 0:r.services[0].docs})})})}):""]}):null}var m=s(7143),f=s.n(m),h=s(24335),x=s.n(h),b=function(e){var t=e.tag,s=e.noLinks,a=encodeURIComponent(t);return s?(0,n.jsx)("span",{className:x().tag,children:t}):(0,n.jsx)(v(),{href:"/search?tags=".concat(a,"&sort=_score&sortOrder=desc"),children:(0,n.jsx)("a",{className:x().tag,title:t,children:t})})};function _(e){var t=e.items,s=e.max,a=e.showMore,i=e.className,o=e.noLinks;s=s||t.length;var r=t.length-s,l=t.filter((function(e){return""!==e})).slice(0,s),c=a&&r>0,d=i?"".concat(x().tags," ").concat(i):x().tags;return(0,n.jsxs)("div",{className:d,children:[null===l||void 0===l?void 0:l.map((function(e,t){return(0,n.jsx)(b,{tag:e,noLinks:o},e+t)})),c&&(0,n.jsx)("span",{className:x().more,children:"+ ".concat(t.length-s," more")})]})}var g=s(76047),y=function(e){var t=e.url;return(0,n.jsx)(g.Z,{href:t,target:"_blank",rel:"noreferrer",download:!0,style:"text",size:"small",children:"Download Sample"})};function k(e){var t,s,a,i,r=e.ddo;return(0,n.jsxs)("aside",{className:f().metaSecondary,children:[(null===(t=null===r||void 0===r?void 0:r.metadata.links)||void 0===t?void 0:t.length)>0&&"datastream"!==(null===r||void 0===r?void 0:r.metadata.type)&&(0,n.jsx)("div",{className:f().samples,children:(0,n.jsx)(o.Z,{title:"Sample Data",content:(0,n.jsx)(y,{url:null===r||void 0===r?void 0:r.metadata.links[0]})})}),(null===r||void 0===r||null===(s=r.metadata)||void 0===s||null===(a=s.tags)||void 0===a?void 0:a.length)>0&&(0,n.jsx)(_,{items:null===r||void 0===r||null===(i=r.metadata)||void 0===i?void 0:i.tags})]})}var w=s(47568),j=s(34051),S=s.n(j),D=s(32656),A=s(55678),N=s(26774),F=s(14924),T=s(56755),Z=s.n(T),C=s(47166),E=s.n(C),O=s(30067),I=s(61747),P=s.n(I),B=s(94974),M=E().bind(P());function L(){return(0,n.jsx)("div",{className:P().loaderWrap,children:(0,n.jsx)(B.Z,{})})}function R(e){var t=e.file,s=e.className,a=e.small,i=e.isLoading,o=M((0,F.Z)({file:!0,small:a},s,s));return(0,n.jsx)("ul",{className:o,children:!i&&t?(0,n.jsx)(n.Fragment,{children:t.contentType||t.contentLength?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("li",{children:(0,O.Z)(t.contentType)}),(0,n.jsx)("li",{children:t.contentLength&&"0"!==t.contentLength?Z()(Number(t.contentLength)):""})]}):(0,n.jsx)("li",{className:P().empty,children:"No file info available"})}):(0,n.jsx)(L,{})})}var U=s(39822),G=s(10307),K=s(82580),z=s(74231),H=z.Ry().shape({algorithm:z.Z_().required("Required")});var W=s(26042),Y=s(69396),J=s(92224),q=s.n(J),V=s(2021),$=s(44110),Q=s(21156),X=s.n(Q),ee=s(99953),te=s.n(ee),se=s(45480);function ne(){var e=(0,d.Gs)().asset;D.KF.log("asset_:",e);var t=(0,se.H5)(e);return"datastream"===(null===e||void 0===e?void 0:e.metadata.type)&&(0,n.jsxs)("div",{className:te().stats,children:[(0,n.jsx)("label",{className:te().label,children:"Datastream EndPoint"}),(0,n.jsx)("section",{className:te().endpoint,children:(0,n.jsx)(V.Z,{type:"text",value:t,onChange:function(){}})})]})}function ae(e,t,s,n,a,i,o,r,l,c){return!1===r?c:a?"You procured the subscription for this ".concat(i," and can access it until the time limit expires."):n?"You own ".concat(t," ").concat(s," allowing you to subsribe to this ").concat(i," by spending 1 ").concat(s,", but without paying ").concat(e," again."):!1===l?"You do not have enough ".concat(e," in your wallet to subsribe to this ").concat(i,"."):"For using this ".concat(i,", you will buy 1 ").concat(s," and immediately spend it back to the publisher.")}function ie(e,t,s,n,a,i,o,r,l){return!1===o?l:a?"You bought this ".concat(i," already allowing you to use it without paying again."):n?"You own ".concat(t," ").concat(s," allowing you to use this dataset by spending 1 ").concat(s,", but without paying ").concat(e," again."):!1===r?"You do not have enough ".concat(e," in your wallet to purchase this asset."):"For using this ".concat(i,", you will buy 1 ").concat(s," and immediately spend it back to the publisher.")}function oe(e,t,s,n,a,i,o,r,l,c,d,u,v,p,m,f){var h=ie(s,a,n,t,e,d,i,r,o),x=!u&&!v||!1===i||!1===m?"":l?"You already bought the selected ".concat(p,", allowing you to use it without paying again."):c?"You own ".concat(v," ").concat(u," allowing you to use the selected ").concat(p," by spending 1 ").concat(u,", but without paying ").concat(s," again."):!1===r?"":"Additionally, you will buy 1 ".concat(u," for the ").concat(p," and spend it back to its publisher."),b=f?"In order to start the job you also need to pay the fees for renting the c2d resources.":"C2D resources required to start the job are available, no payment required for those fees.";return"".concat(h," ").concat(x," ").concat(b)}function re(e){var t=e.action,s=e.disabled,a=e.hasPreviousOrder,i=e.hasDatatoken,o=e.btSymbol,r=e.dtSymbol,l=e.dtBalance,c=e.assetType,d=e.assetTimeout,u=e.isConsumable,v=e.isStreamble,p=e.consumableFeedback,m=e.isBalanceSufficient,f=e.hasPreviousOrderSelectedComputeAsset,h=e.hasDatatokenSelectedComputeAsset,x=e.dtSymbolSelectedComputeAsset,b=e.dtBalanceSelectedComputeAsset,_=e.selectedComputeAssetType,y=e.onClick,k=e.stepText,w=(e.copyText,e.isLoading),j=e.type,S=e.priceType,D=e.algorithmPriceType,A=e.isAlgorithmConsumable,N=e.hasProviderFee,F="download"===t?a?"Download":"free"===S?"Get":"Buy ".concat("Forever"===d?"":" for ".concat(d)):a&&f&&!N?"Start Compute Job":"free"===S&&"free"===D?"Order Compute Job":"Buy Compute Job",T="stream"===t?a?"Copy Feed URL":"free"===S?"Get":"Subscribe ".concat("Forever"===d?"":" for ".concat(d)):"";return(0,n.jsx)("div",{className:X().actions,children:w?(0,n.jsx)(B.Z,{message:k}):(0,n.jsxs)(n.Fragment,{children:["stream"===t?(0,n.jsx)(g.Z,{style:"primary",type:j,onClick:y,disabled:s,className:X().actionsCenter,children:T}):(0,n.jsx)(g.Z,{style:"primary",type:j,onClick:y,disabled:s,className:"compute"===t?X().actionsCenter:"",children:F}),(0,n.jsx)(ne,{}),(0,n.jsx)("div",{className:X().help,children:"download"===t?ie(o,l,r,i,a,c,u,m,p):"stream"===t?ae(o,l,r,i,a,c,0,v,m,p):oe(a,i,o,r,l,u,p,m,f,h,c,x,b,_,A,N)})]})})}var le=s(87693),ce=s(91838),de=s(58723),ue=s.n(de),ve=s(73766),pe=s(90482);function me(e){var t=e.price,s=e.hasPreviousOrder,a=e.hasDatatoken,i=e.symbol,o=e.timeout,r=e.sign,l=e.type;return(0,n.jsxs)("div",{className:ue().priceRow,children:[(0,n.jsx)("div",{className:ue().sign,children:r}),(0,n.jsx)("div",{className:ue().type,children:l}),(0,n.jsxs)("div",{children:[(0,n.jsx)(le.Z,{price:s||a?"0":"".concat(t),symbol:i,size:"small",className:ue().price}),(0,n.jsx)("span",{className:ue().timeout,children:o&&"Forever"!==o&&!s&&"for ".concat(o)})]})]})}function fe(e){var t,s=e.totalPrice,a=e.hasPreviousOrder,i=e.hasDatatoken,o=e.assetTimeout,r=e.symbol,l=e.hasPreviousOrderSelectedComputeAsset,c=e.hasDatatokenSelectedComputeAsset,u=e.algorithmConsumeDetails,v=e.selectedComputeAssetTimeout,p=e.datasetOrderPrice,m=e.algoOrderPrice,f=e.providerFeeAmount,h=e.validUntil,x=(0,d.Gs)().asset;return(0,n.jsxs)("div",{className:ue().priceComponent,children:["You will pay"," ",(0,n.jsx)(le.Z,{price:"".concat(s),symbol:r,size:"small"}),(0,n.jsx)(ce.Z,{content:(0,n.jsxs)("div",{className:ue().calculation,children:[(0,n.jsx)(me,{hasPreviousOrder:a,hasDatatoken:i,price:new pe.Z(p||(null===x||void 0===x||null===(t=x.accessDetails)||void 0===t?void 0:t.price)||0).toDecimalPlaces(ve.z).toString(),timeout:o,symbol:r,type:"DATASET"}),(0,n.jsx)(me,{hasPreviousOrder:l,hasDatatoken:c,price:new pe.Z(m||(null===u||void 0===u?void 0:u.price)||0).toDecimalPlaces(ve.z).toString(),timeout:v,symbol:r,sign:"+",type:"ALGORITHM"}),(0,n.jsx)(me,{price:f,timeout:"".concat(h," seconds"),symbol:r,sign:"+",type:"C2D RESOURCES"}),(0,n.jsx)(me,{price:s,symbol:r,sign:"="})]})})]})}var he=JSON.parse('{"c":{"aT":[{"name":"algorithm","label":"Select an algorithm to start a compute job","type":"assetSelection","value":false,"options":[],"sortOptions":false}]}}'),xe=s(5688),be=s(42228);function _e(e){var t,s,i,o,r,l,c,u,v,p,m,f=e.algorithms,h=e.ddoListAlgorithms,x=e.selectedAlgorithmAsset,b=e.setSelectedAlgorithm,_=e.isLoading,g=e.isComputeButtonDisabled,y=e.hasPreviousOrder,k=e.hasDatatoken,j=e.dtBalance,D=e.assetType,A=e.assetTimeout,N=e.hasPreviousOrderSelectedComputeAsset,F=e.hasDatatokenSelectedComputeAsset,T=e.oceanSymbol,Z=e.dtSymbolSelectedComputeAsset,C=e.dtBalanceSelectedComputeAsset,E=e.selectedComputeAssetType,O=e.selectedComputeAssetTimeout,I=e.stepText,P=e.isConsumable,B=e.consumableFeedback,M=e.datasetOrderPriceAndFees,L=e.algoOrderPriceAndFees,R=e.providerFeeAmount,z=e.validUntil,H=function(e){var t=null;return h.forEach((function(s){s.id===e&&(t=s)})),t},J=(0,be.c8)().siteContent,Q=(0,G.$6)(),X=Q.accountId,ee=Q.balance,te=(0,K.u6)(),ne=te.isValid,ae=te.values,ie=(0,d.Gs)(),oe=ie.asset,le=ie.isAssetNetwork,ce=(0,a.useState)("0"),de=ce[0],ue=ce[1],me=(0,a.useState)(null===oe||void 0===oe||null===(t=oe.accessDetails)||void 0===t?void 0:t.price),_e=me[0],ge=me[1],ye=(0,a.useState)(null===x||void 0===x||null===(s=x.accessDetails)||void 0===s?void 0:s.price),ke=ye[0],we=ye[1],je=(0,a.useState)(!1),Se=je[0],De=je[1];return(0,a.useEffect)((function(){function e(){return(e=(0,w.Z)(S().mark((function e(){var t,s,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H(ae.algorithm),e.next=3,(0,xe.UM)(t.chainId,t.services[0].datatokenAddress,t.services[0].timeout,X);case 3:s=e.sent,n=(0,Y.Z)((0,W.Z)({},t),{accessDetails:s}),b(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ae.algorithm&&X&&P&&function(){e.apply(this,arguments)}()}),[ae.algorithm,X,P]),(0,a.useEffect)((function(){if((null===oe||void 0===oe?void 0:oe.accessDetails)&&(null===x||void 0===x?void 0:x.accessDetails)){ge((null===M||void 0===M?void 0:M.price)||oe.accessDetails.price),we((null===L||void 0===L?void 0:L.price)||(null===x||void 0===x?void 0:x.accessDetails.price));var e=y||k?new pe.Z(0):new pe.Z((null===M||void 0===M?void 0:M.price)||oe.accessDetails.price).toDecimalPlaces(ve.z),t=N||F?new pe.Z(0):new pe.Z((null===L||void 0===L?void 0:L.price)||x.accessDetails.price).toDecimalPlaces(ve.z),s=R?new pe.Z(R).toDecimalPlaces(ve.z):new pe.Z(0),n=e.plus(t).plus(s).toDecimalPlaces(ve.z).toString();ue(n)}}),[null===oe||void 0===oe?void 0:oe.accessDetails,null===x||void 0===x?void 0:x.accessDetails,y,k,N,F,M,L,R]),(0,a.useEffect)((function(){var e,t,s=(0,se.YA)(ee,null===oe||void 0===oe||null===(e=oe.accessDetails)||void 0===e||null===(t=e.baseToken)||void 0===t?void 0:t.symbol);de&&s&&j&&De((0,$.FI)(s,"".concat(de))||Number(j)>=1)}),[de,ee,j,null===oe||void 0===oe||null===(i=oe.accessDetails)||void 0===i||null===(o=i.baseToken)||void 0===o?void 0:o.symbol]),(0,n.jsxs)(K.l0,{className:q().form,children:[(0,n.jsx)(U.Z,{className:q().warning,state:"info",text:J.warning.ctd}),he.c.aT.map((function(e){return(0,n.jsx)(K.gN,(0,Y.Z)((0,W.Z)({},e),{options:f,component:V.Z,disabled:_||g}),e.name)})),(0,n.jsx)(fe,{hasPreviousOrder:y,assetTimeout:A,hasPreviousOrderSelectedComputeAsset:N,hasDatatoken:k,selectedComputeAssetTimeout:O,hasDatatokenSelectedComputeAsset:F,algorithmConsumeDetails:null===x||void 0===x?void 0:x.accessDetails,symbol:T,totalPrice:de,datasetOrderPrice:_e,algoOrderPrice:ke,providerFeeAmount:R,validUntil:z}),(0,n.jsx)(re,{action:"compute",disabled:g||!ne||!Se||!le||!(null===x||void 0===x||null===(r=x.accessDetails)||void 0===r?void 0:r.isPurchasable),hasPreviousOrder:y,hasDatatoken:k,btSymbol:null===oe||void 0===oe||null===(l=oe.accessDetails)||void 0===l||null===(c=l.baseToken)||void 0===c?void 0:c.symbol,dtSymbol:null===(u=null===oe||void 0===oe?void 0:oe.datatokens[0])||void 0===u?void 0:u.symbol,dtBalance:j,assetTimeout:A,assetType:D,hasPreviousOrderSelectedComputeAsset:N,hasDatatokenSelectedComputeAsset:F,dtSymbolSelectedComputeAsset:Z,dtBalanceSelectedComputeAsset:C,selectedComputeAssetType:E,stepText:I,isLoading:_,type:"submit",priceType:null===oe||void 0===oe||null===(v=oe.accessDetails)||void 0===v?void 0:v.type,algorithmPriceType:null===x||void 0===x||null===(p=x.accessDetails)||void 0===p?void 0:p.type,isBalanceSufficient:Se,isConsumable:P,isStreamble:!1,consumableFeedback:B,isAlgorithmConsumable:null===x||void 0===x||null===(m=x.accessDetails)||void 0===m?void 0:m.isPurchasable,hasProviderFee:R&&"0"!==R})]})}var ge=s(60825),ye=s.n(ge),ke=s(54746),we=s(19098),je=s(23742),Se=s(16662),De=s.n(Se),Ae=s(70242),Ne=s(35432),Fe=s.n(Ne),Te=s(57413),Ze=s.n(Te);function Ce(){return(0,n.jsx)("div",{className:Ze().empty,children:"No assets found."})}function Ee(e){var t=e.assets;return(0,n.jsx)("div",{className:Ze().display,children:(0,n.jsx)("div",{className:Ze().scroll,children:t?t&&!t.length?(0,n.jsx)(Ce,{}):t.map((function(e){return(0,n.jsx)(v(),{href:"/asset/".concat(e.did),children:(0,n.jsxs)("a",{className:Ze().row,children:[(0,n.jsxs)("div",{className:Ze().info,children:[(0,n.jsx)("h3",{className:Ze().title,children:(0,n.jsx)(Fe(),{clamp:1,tagName:"span",children:e.name})}),(0,n.jsxs)(Fe(),{clamp:1,tagName:"code",className:Ze().did,children:[e.symbol," | ",e.did]})]}),(0,n.jsx)(le.Z,{price:e.price,size:"small",className:Ze().price})]})},e.did)})):(0,n.jsx)(B.Z,{})})})}var Oe=s(79401);function Ie(e){var t=e.asset,s=e.algorithmDid,i=(0,Oe.U)(),o=(0,a.useState)(),r=o[0],l=o[1];return(0,a.useEffect)((function(){var e;function n(){return(n=(0,w.Z)(S().mark((function e(){var n,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Boolean((0,we.in)(t,"compute")),a=(0,we.in)(t,n?"compute":"access"),e.next=4,(0,Ae.tc)(s,null===a||void 0===a?void 0:a.serviceEndpoint,null===t||void 0===t?void 0:t.chainId,i());case 4:o=e.sent,l(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(null===t||void 0===t||null===(e=t.accessDetails)||void 0===e?void 0:e.type)&&"algorithm"===t.metadata.type&&function(){n.apply(this,arguments)}()}),[t,s,i]),(0,n.jsxs)("div",{className:De().datasetsContainer,children:[(0,n.jsx)("h3",{className:De().text,children:"Datasets algorithm is allowed to run on"}),(0,n.jsx)(Ee,{assets:r})]})}var Pe=s(47343),Be=s.n(Pe),Me=s(20581);function Le(e){var t=e.title,s=e.children,i=function(){l(!r)},o=(0,a.useState)(!1),r=o[0],l=o[1];return(0,n.jsxs)("div",{className:"".concat(Be().actions," ").concat(!0===r?Be().open:""),children:[(0,n.jsxs)("h3",{className:Be().title,onClick:i,children:["".concat(t," "),(0,n.jsxs)(g.Z,{style:"text",size:"small",onClick:i,className:Be().toggle,children:[r?"Hide":"Show"," ",(0,n.jsx)(Me.Z,{})]})]}),!0===r&&s]})}var Re=s(47215),Ue=s(62773),Ge=s(53740),Ke=s(48387);function ze(e,t,s,n,a,i){return He.apply(this,arguments)}function He(){return(He=(0,w.Z)(S().mark((function e(t,s,n,a,i,o){var r,l,c,d,u,v,p,m,f,h,x,b,_,g,y,k;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=new D._u(t),u=(0,Ge.H)(s.chainId),e.t0=!i,!e.t0){e.next=8;break}return e.next=7,D.ag.initialize(s.id,s.services[0].id,0,a,s.services[0].serviceEndpoint);case 7:e.t0=e.sent;case 8:v=e.t0,p={consumer:o||a,serviceIndex:0,_providerFee:i||v.providerFee,_consumeMarketFee:{consumeMarketFeeAddress:Ke.marketFeeAddress,consumeMarketFeeAmount:Ke.consumeMarketOrderFee,consumeMarketFeeToken:(null===s||void 0===s||null===(r=s.accessDetails)||void 0===r||null===(l=r.baseToken)||void 0===l?void 0:l.address)||"0x0000000000000000000000000000000000000000"}},e.t1=null===(c=s.accessDetails)||void 0===c?void 0:c.type,e.next="fixed"===e.t1?13:"free"===e.t1?32:36;break;case 13:return e.t2=D.dE,e.t3=t,e.t4=a,e.t5=s.accessDetails.baseToken.address,e.t6=s.accessDetails.datatoken.address,e.next=21,(0,D.eW)(t,null===s||void 0===s||null===(m=s.accessDetails)||void 0===m||null===(f=m.baseToken)||void 0===f?void 0:f.address,n.price);case 21:return e.t7=e.sent,e.next=24,(0,e.t2)(e.t3,e.t4,e.t5,e.t6,e.t7,!1);case 24:if(e.sent){e.next=27;break}return e.abrupt("return");case 27:return g={exchangeContract:u.fixedRateExchangeAddress,exchangeId:s.accessDetails.addressOrId,maxBaseTokenAmount:n.price,baseTokenAddress:null===s||void 0===s||null===(h=s.accessDetails)||void 0===h||null===(x=h.baseToken)||void 0===x?void 0:x.address,baseTokenDecimals:(null===s||void 0===s||null===(b=s.accessDetails)||void 0===b||null===(_=b.baseToken)||void 0===_?void 0:_.decimals)||18,swapMarketFee:Ke.consumeMarketFixedSwapFee,marketFeeAddress:Ke.marketFeeAddress},e.next=30,d.buyFromFreAndOrder(s.accessDetails.datatoken.address,a,p,g);case 30:return y=e.sent,e.abrupt("return",y);case 32:return e.next=34,d.buyFromDispenserAndOrder(s.services[0].datatokenAddress,a,p,u.dispenserAddress);case 34:return k=e.sent,e.abrupt("return",k);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t,s,n,a){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,w.Z)(S().mark((function e(t,s,n,a,i){var o,r,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=new D._u(t),e.t0=!i,!e.t0){e.next=6;break}return e.next=5,D.ag.initialize(s.id,s.services[0].id,0,n,s.services[0].serviceEndpoint);case 5:e.t0=e.sent;case 6:return r=e.t0,e.next=9,o.reuseOrder(s.accessDetails.datatoken.address,n,a,i||r.providerFee);case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t,s,n){return qe.apply(this,arguments)}function qe(){return(qe=(0,w.Z)(S().mark((function e(t,s,n,a){var i,o,r,l,c,d,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d="free"===(null===t||void 0===t||null===(i=t.accessDetails)||void 0===i?void 0:i.type)?(0,Ge.H)(t.chainId).oceanTokenAddress:null===t||void 0===t||null===(o=t.accessDetails)||void 0===o||null===(r=o.baseToken)||void 0===r?void 0:r.address,e.next=4,(0,D.C6)(n,s,d,null===t||void 0===t||null===(l=t.accessDetails)||void 0===l||null===(c=l.datatoken)||void 0===c?void 0:c.address,a);case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t,s,n,a,i,o){return $e.apply(this,arguments)}function $e(){return($e=(0,w.Z)(S().mark((function e(t,s,n,a,i,o,r){var l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(t,s,n,a,o.providerFee,r);case 2:return l=e.sent,D.KF.log("[compute] Asset ordered:",l),e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e,t,s,n,a,i,o){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,w.Z)(S().mark((function e(t,s,n,a,i,o,r){var l,c,d,u,v;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D.KF.log("[compute] Handle compute order for asset type: ",s.metadata.type),D.KF.log("[compute] Using initializeData: ",o),e.prev=2,!(null===o||void 0===o?void 0:o.validOrder)||o.providerFee){e.next=8;break}return D.KF.log("[compute] Has valid order: ",o.validOrder),e.abrupt("return",null===s||void 0===s||null===(c=s.accessDetails)||void 0===c?void 0:c.validOrderTx);case 8:if("0"===(null===o||void 0===o||null===(l=o.providerFee)||void 0===l?void 0:l.providerFeeAmount)){e.next=15;break}return e.next=11,Je(s,a,t,o.providerFee.providerFeeAmount);case 11:if(d=e.sent){e.next=14;break}throw new Error("Failed to approve provider fees!");case 14:D.KF.log("[compute] Approved provider fees:",d);case 15:if(!(null===o||void 0===o?void 0:o.validOrder)){e.next=24;break}return D.KF.log("[compute] Calling reuseOrder ...",o),e.next=19,We(t,s,a,o.validOrder,o.providerFee);case 19:if(u=e.sent){e.next=22;break}throw new Error("Failed to reuse order!");case 22:return D.KF.log("[compute] Reused order:",u),e.abrupt("return",null===u||void 0===u?void 0:u.transactionHash);case 24:return D.KF.log("[compute] Calling order ...",o),e.next=27,Ve(t,s,n,a,i,o,r);case 27:return v=e.sent,D.KF.log("[compute] Order succeeded",v),e.abrupt("return",null===v||void 0===v?void 0:v.transactionHash);case 32:e.prev=32,e.t0=e.catch(2),A.Am.error(e.t0.message),D.KF.error("[compute] ".concat(e.t0.message));case 36:case"end":return e.stop()}}),e,null,[[2,32]])})))).apply(this,arguments)}function et(e,t){return{0:"Approving and buying one ".concat(t),1:"Ordering asset",2:"Approving ".concat(e," and ordering asset"),3:"Generating signature to access download url"}}function tt(e,t,s){return{0:"Setting price and fees for ".concat(s),1:"Approving ".concat(t," and ordering ").concat(s," "),2:"Approving ".concat(e," and ordering ").concat(s),3:"Ordering ".concat(s),4:"Generating signature. Starting compute job ..."}}var st=s(33365);function nt(e){var t,s,i,o,r,l,c,d,u=e.asset,v=e.dtBalance,p=e.file,m=e.fileIsLoading,f=e.consumableFeedback,h=(0,G.$6)(),x=h.accountId,b=h.web3,_=(0,Ue.E)(),g=(0,Oe.U)(),y=(0,a.useState)(!1),k=y[0],j=y[1],F=(0,a.useState)(!1),T=F[0],Z=F[1],C=(0,a.useState)(),E=C[0],O=C[1],I=(0,a.useState)(),P=I[0],B=I[1],M=(0,a.useState)(),L=M[0],z=M[1],W=(0,a.useState)(),Y=W[0],J=W[1],q=(0,a.useState)(),V=q[0],$=q[1],Q=(0,a.useState)(),X=Q[0],ee=Q[1],te=(0,a.useState)(""),ne=te[0],ae=te[1],ie=(0,a.useState)(""),oe=ie[0],re=ie[1],le=(0,a.useState)(!0),ce=le[0],de=le[1],ue=(0,a.useState)(!0),ve=ue[0],me=ue[1],fe=(0,a.useState)(""),he=fe[0],be=fe[1],ge=(0,a.useState)(),Se=ge[0],De=ge[1],Ae=(0,a.useState)(),Ne=Ae[0],Fe=Ae[1],Te=(0,a.useState)("0"),Ze=Te[0],Ce=Te[1],Ee=(0,a.useState)("0"),Pe=Ee[0],Be=Ee[1],Me=(0,a.useState)(),Ge=Me[0],Ke=Me[1],ze=(0,a.useState)(),He=ze[0],We=ze[1],Ye=(0,a.useState)(!1),Je=Ye[0],qe=Ye[1],Ve=(0,a.useState)(!1),$e=Ve[0],Xe=Ve[1],et=Number(v)>=1,nt=!0===k||null===p||!ne&&!et&&!ce||!oe&&!V&&!ve,at="NOT_SUPPORTED"===(null===u||void 0===u||null===(t=u.accessDetails)||void 0===t?void 0:t.type);function it(e){return ot.apply(this,arguments)}function ot(){return ot=(0,w.Z)(S().mark((function e(t){var s,n,a,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.services[0].datatokenAddress){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,se.VD)(null===t||void 0===t?void 0:t.chainId);case 4:return s=e.sent,n=new D._u(s),e.next=8,n.balance(null===t||void 0===t?void 0:t.services[0].datatokenAddress,x);case 8:return a=e.sent,ee(new pe.t(a).toString()),i=Number(a)>=1,$(i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function rt(){return lt.apply(this,arguments)}function lt(){return lt=(0,w.Z)(S().mark((function e(){var t,s,n,a,i,o,r,l,c,d,v,p,m,f,h,_,g,y,k,w,j,A,N,F,T,Z,C,E,I,P,B,M;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,(0,je.Q_)(u);case 4:if((g=e.sent)&&g.id){e.next=7;break}throw new Error("Error getting compute environments!");case 7:return De(g),e.next=10,(0,st.Y_)(u,Y,x,g);case 10:if((y=e.sent)&&(null===y||void 0===y?void 0:y.datasets)&&(null===y||void 0===y?void 0:y.algorithm)){e.next=13;break}throw new Error("Error initializing provider for the compute job!");case 13:return Fe(y),e.t0=Ce,e.next=17,(0,D.J2)(b,null===y||void 0===y||null===(t=y.datasets)||void 0===t||null===(s=t[0])||void 0===s||null===(n=s.providerFee)||void 0===n?void 0:n.providerFeeToken,null===y||void 0===y||null===(a=y.datasets)||void 0===a||null===(i=a[0])||void 0===i||null===(o=i.providerFee)||void 0===o?void 0:o.providerFeeAmount);case 17:if(e.t1=e.sent,(0,e.t0)(e.t1),k=(parseInt(null===y||void 0===y||null===(r=y.datasets)||void 0===r||null===(l=r[0])||void 0===l||null===(c=l.providerFee)||void 0===c?void 0:c.validUntil)-Math.floor(Date.now()/1e3)).toString(),Be(k),(null===u||void 0===u||null===(d=u.accessDetails)||void 0===d?void 0:d.addressOrId)===D.r_||"free"===(null===u||void 0===u||null===(v=u.accessDetails)||void 0===v?void 0:v.type)||!(null===y||void 0===y||null===(p=y.datasets)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.providerFee)){e.next=30;break}return be(tt(null===(w=u.accessDetails)||void 0===w||null===(j=w.baseToken)||void 0===j?void 0:j.symbol,null===(A=u.accessDetails)||void 0===A||null===(N=A.datatoken)||void 0===N?void 0:N.symbol,u.metadata.type)[0]),e.next=26,(0,xe.bc)(u,D.r_,null===y||void 0===y||null===(F=y.datasets)||void 0===F||null===(T=F[0])||void 0===T?void 0:T.providerFee);case 26:if(Z=e.sent){e.next=29;break}throw new Error("Error setting dataset price and fees!");case 29:Ke(Z);case 30:if((null===Y||void 0===Y||null===(f=Y.accessDetails)||void 0===f?void 0:f.addressOrId)===D.r_||"free"===(null===Y||void 0===Y||null===(h=Y.accessDetails)||void 0===h?void 0:h.type)||!(null===y||void 0===y||null===(_=y.algorithm)||void 0===_?void 0:_.providerFee)){e.next=39;break}return be(tt(null===Y||void 0===Y||null===(C=Y.accessDetails)||void 0===C||null===(E=C.baseToken)||void 0===E?void 0:E.symbol,null===Y||void 0===Y||null===(I=Y.accessDetails)||void 0===I||null===(P=I.datatoken)||void 0===P?void 0:P.symbol,null===Y||void 0===Y||null===(B=Y.metadata)||void 0===B?void 0:B.type)[0]),e.next=35,(0,xe.bc)(Y,D.r_,y.algorithm.providerFee);case 35:if(M=e.sent){e.next=38;break}throw new Error("Error setting algorithm price and fees!");case 38:We(M);case 39:e.next=45;break;case 41:e.prev=41,e.t2=e.catch(0),O(e.t2.message),D.KF.error("[compute] ".concat(e.t2.message," "));case 45:case"end":return e.stop()}}),e,null,[[0,41]])}))),lt.apply(this,arguments)}function ct(){return dt.apply(this,arguments)}function dt(){return dt=(0,w.Z)(S().mark((function e(){var t,s,n,a,i,o,r,l,c,d,v,p,m,f;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),Z(!1),O(void 0),r=(0,we.in)(u,"compute"),l={documentId:Y.id,serviceId:Y.services[0].id},e.next=9,(0,je.F9)(u,r.id,l,Y);case 9:if(c=e.sent,D.KF.log("[compute] Is dataset orderable?",c),c){e.next=13;break}throw new Error("Dataset is not orderable in combination with selected algorithm.");case 13:return e.next=15,rt();case 15:return be(tt(null===(t=Y.accessDetails.baseToken)||void 0===t?void 0:t.symbol,null===(s=Y.accessDetails.datatoken)||void 0===s?void 0:s.symbol,Y.metadata.type)["fixed"===(null===(n=Y.accessDetails)||void 0===n?void 0:n.type)?2:3]),e.next=18,Qe(b,Y,He,x,V,Ne.algorithm,Se.consumerAddress);case 18:if(d=e.sent){e.next=21;break}throw new Error("Failed to order algorithm.");case 21:return be(tt(null===(a=u.accessDetails.baseToken)||void 0===a?void 0:a.symbol,null===(i=u.accessDetails.datatoken)||void 0===i?void 0:i.symbol,u.metadata.type)["fixed"===(null===(o=u.accessDetails)||void 0===o?void 0:o.type)?2:3]),e.next=24,Qe(b,u,Ge,x,et,Ne.datasets[0],Se.consumerAddress);case 24:if(v=e.sent){e.next=27;break}throw new Error("Failed to order dataset.");case 27:return D.KF.log("[compute] Starting compute job."),p={documentId:u.id,serviceId:u.services[0].id,transferTxId:v},l.transferTxId=d,m={publishAlgorithmLog:!0,publishOutput:!0},be(tt()[4]),e.next=34,D.ag.computeStart(u.services[0].serviceEndpoint,b,x,null===Se||void 0===Se?void 0:Se.id,p,l,_(),null,m);case 34:if(f=e.sent){e.next=37;break}throw new Error("Error starting compute job.");case 37:D.KF.log("[compute] Starting compute job response: ",f),Z(!0),Xe(!$e),rt(),e.next=47;break;case 43:e.prev=43,e.t0=e.catch(0),O(e.t0.message),D.KF.error("[compute] ".concat(e.t0.message," "));case 47:return e.prev=47,j(!1),e.finish(47);case 50:case"end":return e.stop()}}),e,null,[[0,43,47,50]])}))),dt.apply(this,arguments)}return(0,a.useEffect)((function(){var e,t;(null===u||void 0===u?void 0:u.accessDetails)&&x&&!at&&(de(null===u||void 0===u||null===(e=u.accessDetails)||void 0===e?void 0:e.isPurchasable),ae(null===u||void 0===u||null===(t=u.accessDetails)||void 0===t?void 0:t.validOrderTx))}),[null===u||void 0===u?void 0:u.accessDetails,x,at]),(0,a.useEffect)((function(){var e,t;function s(){return(s=(0,w.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(Y);case 2:return e.next=4,rt();case 4:qe(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===Y||void 0===Y?void 0:Y.accessDetails)&&x&&(qe(!0),me(null===Y||void 0===Y||null===(e=Y.accessDetails)||void 0===e?void 0:e.isPurchasable),re(null===Y||void 0===Y||null===(t=Y.accessDetails)||void 0===t?void 0:t.validOrderTx),We(null),function(){s.apply(this,arguments)}())}),[Y,x]),(0,a.useEffect)((function(){(null===u||void 0===u?void 0:u.accessDetails)&&!at&&(0,je.kN)(u,g()).then((function(e){z(e),(0,je.Kf)(u,e).then((function(e){B(e)}))}))}),[u,at]),(0,a.useEffect)((function(){var e=E;e&&A.Am.error(e)}),[E]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"".concat(ye().info," ").concat(at?ye().warning:null),children:[(0,n.jsx)(R,{file:p,isLoading:m,small:!0}),at?(0,n.jsx)(U.Z,{text:"No pricing schema available for this asset.",state:"info"}):(0,n.jsx)(N.Z,{accessDetails:null===u||void 0===u?void 0:u.accessDetails,orderPriceAndFees:Ge,conversion:!0,size:"large"})]}),at?null:"algorithm"===u.metadata.type?(0,n.jsxs)(n.Fragment,{children:["compute"===u.services[0].type&&(0,n.jsx)(U.Z,{text:"This algorithm has been set to private by the publisher and can't be downloaded. You can run it against any allowed datasets though!",state:"info"}),(0,n.jsx)(Ie,{algorithmDid:u.id,asset:u})]}):(0,n.jsx)(K.J9,{initialValues:{algorithm:void 0},validateOnMount:!0,validationSchema:H,onSubmit:function(){var e=(0,w.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.algorithm){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ct();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:(0,n.jsx)(_e,{algorithms:P,ddoListAlgorithms:L,selectedAlgorithmAsset:Y,setSelectedAlgorithm:J,isLoading:k||Je,isComputeButtonDisabled:nt,hasPreviousOrder:void 0!==ne,hasDatatoken:et,dtBalance:v,assetType:null===u||void 0===u?void 0:u.metadata.type,assetTimeout:(0,we.$N)(null===u||void 0===u?void 0:u.services[0].timeout),hasPreviousOrderSelectedComputeAsset:void 0!==oe,hasDatatokenSelectedComputeAsset:V,oceanSymbol:(null===u||void 0===u||null===(s=u.accessDetails)||void 0===s||null===(i=s.baseToken)||void 0===i?void 0:i.symbol)||(null===Y||void 0===Y||null===(o=Y.accessDetails)||void 0===o||null===(r=o.baseToken)||void 0===r?void 0:r.symbol)||"OCEAN",dtSymbolSelectedComputeAsset:null===(l=null===Y||void 0===Y?void 0:Y.datatokens[0])||void 0===l?void 0:l.symbol,dtBalanceSelectedComputeAsset:X,selectedComputeAssetType:"algorithm",selectedComputeAssetTimeout:(0,we.$N)(null===(c=null===Y||void 0===Y?void 0:Y.services[0])||void 0===c?void 0:c.timeout),stepText:he,isConsumable:ce,consumableFeedback:f,datasetOrderPriceAndFees:Ge,algoOrderPriceAndFees:He,providerFeeAmount:Ze,validUntil:Pe})}),(0,n.jsx)("footer",{className:ye().feedback,children:T&&(0,n.jsx)(ke.Z,{success:"Your job started successfully! Watch the progress below or on your profile."})}),x&&(null===u||void 0===u||null===(d=u.accessDetails)||void 0===d?void 0:d.datatoken)&&(0,n.jsx)(Le,{title:"Your Compute Jobs",children:(0,n.jsx)(Re.Z,{minimal:!0,assetChainIds:[null===u||void 0===u?void 0:u.chainId],refetchJobs:$e})})]})}var at=s(86307),it=s.n(at),ot=s(74025);function rt(e){var t,s,i=e.asset,o=e.file,r=e.isBalanceSufficient,l=e.dtBalance,c=e.fileIsLoading,u=e.consumableFeedback,v=(0,G.$6)(),p=v.accountId,m=v.web3,f=(0,be.c8)().getOpcFeeForToken,h=(0,d.Gs)(),x=h.isInPurgatory,b=h.isAssetNetwork,_=(0,ot.t)(),g=(0,a.useState)(!0),y=g[0],k=g[1],j=(0,a.useState)(!1),F=j[0],T=j[1],Z=(0,a.useState)(""),C=Z[0],E=Z[1],O=(0,a.useState)(!1),I=O[0],P=O[1],M=(0,a.useState)(!1),L=M[0],K=M[1],z=(0,a.useState)(!1),H=z[0],W=z[1],Y=(0,a.useState)(""),J=Y[0],q=Y[1],V=(0,a.useState)(),$=V[0],Q=V[1],X=(0,a.useState)(null),ee=X[0],te=X[1],se=(0,a.useState)(!1),ne=se[0],ae=se[1],ie="NOT_SUPPORTED"===(null===i||void 0===i||null===(t=i.accessDetails)||void 0===t?void 0:t.type);function oe(){return le.apply(this,arguments)}function le(){return le=(0,w.Z)(S().mark((function e(){var t,s,n,a,o,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!0),e.prev=1,!H||i.services[0].streamFiles){e.next=10;break}return D.KF.log("Yep"),E(et(null===(t=i.accessDetails.baseToken)||void 0===t?void 0:t.symbol,null===(s=i.accessDetails.datatoken)||void 0===s?void 0:s.symbol)[3]),e.next=8,(0,st.Sv)(m,i,p,J);case 8:e.next=27;break;case 10:if(!H||!i.services[0].streamFiles){e.next=18;break}return e.next=13,navigator.clipboard.writeText(i.services[0].streamFiles);case 13:te("Stream Link Copied!"),ae(!0),D.KF.log("Yeppp Copied!",i.services[0].streamFiles),e.next=27;break;case 18:return E(et(null===(n=i.accessDetails.baseToken)||void 0===n?void 0:n.symbol,null===(a=i.accessDetails.datatoken)||void 0===a?void 0:a.symbol)["fixed"===i.accessDetails.type?2:1]),e.next=22,ze(m,i,$,p);case 22:if(o=e.sent){e.next=25;break}throw new Error;case 25:W(!0),q(o.transactionHash);case 27:e.next=34;break;case 29:e.prev=29,e.t0=e.catch(1),D.KF.error(e.t0),r=H?"Failed to download file!":"An error occurred. Check console for more information.",A.Am.error(r);case 34:P(!1);case 35:case"end":return e.stop()}}),e,null,[[1,29]])}))),le.apply(this,arguments)}(0,a.useEffect)((function(){var e,t;function s(){return(s=(0,w.Z)(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.accessDetails.addressOrId!==D.r_&&"free"!==i.accessDetails.type&&!I){e.next=2;break}return e.abrupt("return");case 2:return!$&&K(!0),e.next=5,(0,xe.bc)(i,D.r_);case 5:t=e.sent,Q(t),!$&&K(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log({checkAsset:i}),(null===i||void 0===i?void 0:i.accessDetails)&&!ie&&(i.accessDetails.isOwned&&W(null===i||void 0===i||null===(e=i.accessDetails)||void 0===e?void 0:e.isOwned),i.accessDetails.validOrderTx&&q(null===i||void 0===i||null===(t=i.accessDetails)||void 0===t?void 0:t.validOrderTx),function(){s.apply(this,arguments)}())}),[i,p,f,ie]),(0,a.useEffect)((function(){T(Number(l)>=1)}),[l]),(0,a.useEffect)((function(){var e;if(D.KF.log({isAssetNetwork:b,isBalanceSufficient:r,isOwned:H,hasDatatoken:F,validOrderTx:J}),("fixed"!==(null===i||void 0===i||null===(e=i.accessDetails)||void 0===e?void 0:e.type)||$)&&_&&p&&(null===i||void 0===i?void 0:i.accessDetails)&&!ie){var t=!(null===i||void 0===i?void 0:i.accessDetails.isPurchasable)||!b||(!r||!b)&&!H&&!F;k(t)}}),[_,null===i||void 0===i?void 0:i.accessDetails,r,b,F,p,H,ie,$]),(0,a.useEffect)((function(){if(ne){var e=setTimeout((function(){ae(!1)}),5e3);return function(){return clearTimeout(e)}}}),[ne]);var ce=function(){var e,t,s,a,o,c,d,v;return(0,n.jsx)(re,{action:"datastream"===(null===i||void 0===i||null===(e=i.metadata)||void 0===e?void 0:e.type)?"stream":"download",disabled:y,hasPreviousOrder:H,hasDatatoken:F,btSymbol:null===i||void 0===i||null===(t=i.accessDetails)||void 0===t||null===(s=t.baseToken)||void 0===s?void 0:s.symbol,dtSymbol:null===(a=null===i||void 0===i?void 0:i.datatokens[0])||void 0===a?void 0:a.symbol,dtBalance:l,onClick:oe,assetTimeout:(0,we.$N)(i.services[0].timeout),assetType:null===i||void 0===i||null===(o=i.metadata)||void 0===o?void 0:o.type,stepText:C,copyText:"datastream"===(null===i||void 0===i?void 0:i.metadata.type)&&i.services[0].streamFiles,isLoading:I,priceType:null===(c=i.accessDetails)||void 0===c?void 0:c.type,isConsumable:null===(d=i.accessDetails)||void 0===d?void 0:d.isPurchasable,isStreamble:null===(v=i.accessDetails)||void 0===v?void 0:v.isPurchasable,isBalanceSufficient:r,consumableFeedback:u})},de=function(e){var t=e.asset;return(0,n.jsx)("div",{children:ie?(0,n.jsx)(U.Z,{className:it().fieldWarning,state:"info",text:"No pricing schema available for this asset."}):(0,n.jsxs)(n.Fragment,{children:[L?(0,n.jsx)(B.Z,{message:"Calculating full price (including fees)"}):(0,n.jsx)(N.Z,{accessDetails:t.accessDetails,orderPriceAndFees:$,conversion:!0,size:"large"}),!x&&(0,n.jsx)(ce,{})]})})};return(0,n.jsxs)("aside",{className:it().consume,children:[(0,n.jsxs)("div",{className:it().info,children:[(0,n.jsx)("div",{className:it().filewrapper,children:(0,n.jsx)(R,{file:o,isLoading:c,small:!0})}),(0,n.jsx)(de,{asset:i})]}),"datastream"===(null===i||void 0===i?void 0:i.metadata.type)&&ne&&(0,n.jsx)("div",{className:it().action,children:(0,n.jsx)("span",{className:it().copyfeedback,children:ee})}),"algorithm"===(null===i||void 0===i||null===(s=i.metadata)||void 0===s?void 0:s.type)&&(0,n.jsx)(Ie,{algorithmDid:i.id,asset:i})]})}var lt=s(38099),ct=s(11704),dt=s(52888),ut=s.n(dt),vt=s(26387),pt=s.n(vt);function mt(){var e,t=(0,d.Gs)().asset;return(0,n.jsx)("footer",{className:pt().stats,children:t&&(null===t||void 0===t?void 0:t.stats)&&0!==(null===t||void 0===t||null===(e=t.stats)||void 0===e?void 0:e.orders)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:pt().number,children:t.stats.orders})," sale",1===t.stats.orders?"":"s"]}):"No sales yet"})}function ft(e){var t,s=e.asset,i=(0,G.$6)(),o=i.accountId,r=i.balance,l=i.web3,c=(0,d.Gs)().isAssetNetwork,u=(0,Oe.U)(),v=(0,ot.t)(),p=(0,K.u6)(),m=(0,a.useState)(),f=m[0],h=m[1],x=(0,a.useState)(),b=x[0],_=x[1],g=(0,a.useState)(),y=g[0],k=g[1],j=(0,a.useState)(!1),A=j[0],N=j[1],F=Boolean(null===s||void 0===s?void 0:s.services.filter((function(e){return"compute"===e.type}))[0]);(0,a.useEffect)((function(){function e(){return e=(0,w.Z)(S().mark((function e(){var t,n,a,i,o,r,l,c,d,u,v,m,f,h,x,b;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),a=(null===p||void 0===p||null===(t=p.values)||void 0===t?void 0:t.services[0].providerUrl.url)||(null===(n=null===s||void 0===s?void 0:s.services[0])||void 0===n?void 0:n.serviceEndpoint),e.prev=3,!(null===(r=null===p||void 0===p||null===(i=p.values)||void 0===i||null===(o=i.services)||void 0===o?void 0:o[0].files)||void 0===r?void 0:r[0].url)){e.next=11;break}return e.next=8,(0,st.pw)(null===(d=null===p||void 0===p||null===(l=p.values)||void 0===l||null===(c=l.services)||void 0===c?void 0:c[0].files)||void 0===d?void 0:d[0].url,a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,(0,st.uw)(null===s||void 0===s?void 0:s.id,null===(u=null===s||void 0===s?void 0:s.services[0])||void 0===u?void 0:u.id,a);case 13:e.t0=e.sent;case 14:(m=e.t0)&&k(m[0]),(f=null===(v=document.scripts)||void 0===v?void 0:v.namedItem("datasetSchema"))&&"DataDownload"===(null===(h=JSON.parse(f.innerText))||void 0===h?void 0:h.distribution[0]["@type"])&&(b=null===(x=m[0])||void 0===x?void 0:x.contentType,h.distribution[0].encodingFormat=b,f.innerText=JSON.stringify(h)),N(!1),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(3),D.KF.error(e.t1.message);case 24:case"end":return e.stop()}}),e,null,[[3,21]])}))),e.apply(this,arguments)}(0,Ge.H)(null===s||void 0===s?void 0:s.chainId)&&function(){e.apply(this,arguments)}()}),[s,v,u,null===p||void 0===p||null===(t=p.values)||void 0===t?void 0:t.services]),(0,a.useEffect)((function(){function e(){return e=(0,w.Z)(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new D._u(l),e.next=4,t.balance(s.services[0].datatokenAddress,o);case 4:n=e.sent,_(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),D.KF.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),e.apply(this,arguments)}l&&o&&c&&function(){e.apply(this,arguments)}()}),[l,o,s,c]),(0,a.useEffect)((function(){var e,t,n,a,i,l;if("free"===(null===s||void 0===s||null===(e=s.accessDetails)||void 0===e?void 0:e.type)&&h(!0),(null===s||void 0===s||null===(t=s.accessDetails)||void 0===t?void 0:t.price)&&(null===s||void 0===s||null===(n=s.accessDetails)||void 0===n||null===(a=n.baseToken)||void 0===a?void 0:a.symbol)&&o&&r&&b){var c=(0,se.YA)(r,null===s||void 0===s||null===(i=s.accessDetails)||void 0===i||null===(l=i.baseToken)||void 0===l?void 0:l.symbol);return h((0,$.FI)(c,"".concat(null===s||void 0===s?void 0:s.accessDetails.price))||Number(b)>=1),function(){h(!1)}}}),[r,o,null===s||void 0===s?void 0:s.accessDetails,b]);var T=[{title:"Use",content:(0,n.jsxs)(n.Fragment,{children:[F?(0,n.jsx)(nt,{asset:s,dtBalance:b,file:y,fileIsLoading:A}):(0,n.jsx)(rt,{asset:s,dtBalance:b,isBalanceSufficient:f,file:y,fileIsLoading:A}),(0,n.jsx)(mt,{})]})}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(lt.Z,{items:T,className:ut().actions}),(0,n.jsx)(ct.Z,{networkId:null===s||void 0===s?void 0:s.chainId,isAssetNetwork:c})]})}var ht,xt=s(49973),bt=s(65238),_t=s.n(bt);function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},gt.apply(this,arguments)}var yt=function(e){return a.createElement("svg",gt({width:"1em",height:"1em",viewBox:"0 0 8 24",xmlns:"http://www.w3.org/2000/svg"},e),ht||(ht=a.createElement("path",{d:"M8 1v23l-4-4-4 4V1C0 .447.585-.02 1 0h6c.689-.02 1 .447 1 1Z"})))};function kt(e){var t=e.did,s=(0,xt.o)(),a=s.bookmarks,i=s.addBookmark,o=s.removeBookmark,r=a&&(null===a||void 0===a?void 0:a.includes(t));return(0,n.jsx)("button",{onClick:function(){r?o(t):i(t)},className:"".concat(_t().bookmark," ").concat(r?_t().active:""," "),title:r?"Remove Bookmark":"Add Bookmark",children:(0,n.jsx)(yt,{})})}var wt=s(54845),jt=s(19261),St=s.n(jt),Dt=s(66112),At=s(16537),Nt=s(16117),Ft=s.n(Nt);function Tt(e){var t,s,a,i,o,r,l=e.asset,u=e.isBlockscoutExplorer,v=(0,d.Gs)().isAssetNetwork,p=(0,G.$6)().web3ProviderInfo,m=null===(t=null===l||void 0===l?void 0:l.datatokens[0])||void 0===t?void 0:t.symbol;return(0,n.jsxs)("div",{className:Ft().wrapper,children:[(0,n.jsxs)("span",{className:Ft().owner,children:["Owned by ",(0,n.jsx)(c.Z,{account:null===l||void 0===l||null===(s=l.nft)||void 0===s?void 0:s.owner})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(At.Z,{className:Ft().datatoken,networkId:null===l||void 0===l?void 0:l.chainId,path:u?"tokens/".concat(null===l||void 0===l?void 0:l.services[0].datatokenAddress):"token/".concat(null===l||void 0===l?void 0:l.services[0].datatokenAddress),children:"Accessed with ".concat(m)}),"MetaMask"===(null===p||void 0===p?void 0:p.name)&&v&&(0,n.jsx)("span",{className:Ft().addWrap,children:(0,n.jsx)(Dt.Z,{address:null===l||void 0===l?void 0:l.services[0].datatokenAddress,symbol:null===(i=null===(a=l)||void 0===a?void 0:a.datatokens[0])||void 0===i?void 0:i.symbol,text:"Add ".concat(null===(r=null===(o=l)||void 0===o?void 0:o.datatokens[0])||void 0===r?void 0:r.symbol," to wallet"),className:Ft().add,minimal:!0})})]})]})}var Zt=s(81439),Ct=s(28614),Et=s(72909),Ot=s.n(Et);function It(e){var t,s=e.asset,a=e.nftPublisher,i=Boolean((0,we.in)(s,"compute"))?"compute":"access",o=null===s||void 0===s||null===(t=s.nft)||void 0===t?void 0:t.owner;return(0,n.jsxs)("div",{className:Ot().wrapper,children:[(0,n.jsx)(Zt.Z,{type:null===s||void 0===s?void 0:s.metadata.type,accessType:i,className:Ot().assetType}),(0,n.jsx)("div",{className:Ot().byline,children:(0,n.jsxs)("p",{children:["Published ",(0,n.jsx)(Ct.Z,{date:null===s||void 0===s?void 0:s.metadata.created,relative:!0}),a&&a!==o&&(0,n.jsxs)("span",{children:[" by "," ",(0,n.jsx)(c.Z,{account:a})]}),(null===s||void 0===s?void 0:s.metadata.created)!==(null===s||void 0===s?void 0:s.metadata.updated)&&(0,n.jsxs)(n.Fragment,{children:[" \u2014 ",(0,n.jsxs)("span",{className:Ot().updated,children:["updated ",(0,n.jsx)(Ct.Z,{date:null===s||void 0===s?void 0:s.metadata.updated,relative:!0})]})]})]})})]})}var Pt=s(30595),Bt=s(82806),Mt=s(82189),Lt=s(28440),Rt=s(83213),Ut=s.n(Rt),Gt=s(21303),Kt=s.n(Gt),zt=[1,137],Ht=[4];function Wt(e){var t=e.nft,s=e.address,a=e.chainId,i=e.isBlockscoutExplorer,o=zt.concat(Ht).includes(a),r=o?Ht.includes(a)?"https://testnets.opensea.io":"https://opensea.io":void 0,l="".concat(r,"/assets/").concat(137===a?"matic":"","/").concat(s,"/1");return(0,n.jsxs)("div",{className:Ut().wrapper,children:[t&&(0,n.jsx)("img",{src:t.image_data||t.image,alt:null===t||void 0===t?void 0:t.name}),(0,n.jsxs)("div",{className:Ut().info,children:[t&&(0,n.jsx)("h5",{children:t.name}),s&&(0,n.jsxs)("span",{title:s,className:Ut().address,children:[(0,se.XC)(s)," ",(0,n.jsx)(Mt.Z,{text:s})]}),(0,n.jsxs)("div",{className:Ut().links,children:[s&&(0,n.jsx)(At.Z,{networkId:a,path:i?"tokens/".concat(s):"token/".concat(s),children:"View on Explorer"}),o&&s&&(0,n.jsxs)("a",{href:l,target:"_blank",rel:"noreferrer",className:Kt().link,children:["View on OpenSea ",(0,n.jsx)(Lt.Z,{})]})]}),!(null===t||void 0===t?void 0:t.image_data)&&!(null===t||void 0===t?void 0:t.image)&&(0,n.jsx)("p",{className:Ut().fallback,children:"This Data NFT has no image set."})]})]})}var Yt=s(48884),Jt=s.n(Yt);function qt(e){var t,s,a,i,o,r=e.isBlockscoutExplorer,l=(0,d.Gs)().asset,c=(0,Pt.Lo)(null===l||void 0===l||null===(t=l.nft)||void 0===t?void 0:t.tokenURI),u=(0,K.u6)(),v=(null===c||void 0===c?void 0:c.image_data)?c.image_data:(null===c||void 0===c?void 0:c.image)?c.image:(null===u||void 0===u||null===(s=u.values)||void 0===s||null===(a=s.metadata)||void 0===a||null===(i=a.nft)||void 0===i?void 0:i.image_data)?u.values.metadata.nft.image_data:null;return(0,n.jsxs)("div",{className:Jt().nftImage,children:[v?(0,n.jsx)("img",{src:v,alt:null===l||void 0===l||null===(o=l.nft)||void 0===o?void 0:o.name}):(0,n.jsx)(Bt.Z,{noWordmark:!0}),(c||(null===l||void 0===l?void 0:l.nftAddress))&&(0,n.jsx)(ce.Z,{className:Jt().tooltip,content:(0,n.jsx)(Wt,{nft:c,address:null===l||void 0===l?void 0:l.nftAddress,chainId:null===l||void 0===l?void 0:l.chainId,isBlockscoutExplorer:r})})]})}var Vt=[1287,2021e3,2021001,44787,246,1285];function $t(e){var t=e.asset,s=e.nftPublisher,a=Vt.includes(null===t||void 0===t?void 0:t.chainId);return(0,n.jsxs)("aside",{className:St().meta,children:[(0,n.jsxs)("header",{className:St().asset,children:[(0,n.jsx)(qt,{isBlockscoutExplorer:a}),(0,n.jsx)(Tt,{asset:t,isBlockscoutExplorer:a})]}),(0,n.jsx)(It,{asset:t,nftPublisher:s})]})}var Qt=s(828),Xt=s(7297),es=s(26997),ts=s(30358),ss=s(46879),ns=s(29349),as=s.n(ns);function is(){var e=(0,Xt.Z)(["\n  query NftUpdate($address: String!) {\n    nftUpdates(\n      where: { nft: $address }\n      orderBy: timestamp\n      orderDirection: desc\n    ) {\n      id\n      nft {\n        address\n        owner\n      }\n      tx\n      timestamp\n      type\n    }\n  }\n"]);return is=function(){return e},e}var os=(0,es.Ps)(is());function rs(e){var t=e.receipts,s=e.setReceipts,i=function(e){switch(e){case"METADATA_CREATED":return"published";case"METADATA_UPDATED":return"updated";case"STATE_UPDATED":return"state updated";case"TOKENURI_UPDATED":return"NFT metadata updated";default:return""}},o=(0,d.Gs)().asset,r=(0,a.useState)(),l=r[0],c=r[1];(0,a.useEffect)((function(){if(o){var e=(0,ss.Lk)(o.chainId);c(e)}}),[o]);var u=(0,Qt.Z)((0,ts.aM)({query:os,variables:{address:null===o||void 0===o?void 0:o.nft.address.toLowerCase()},context:l,pause:!o||!l}),1)[0].data;return(0,a.useEffect)((function(){if(u&&0!==u.nftUpdates.length){var e=u.nftUpdates;s(e)}}),[u,s]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:as().title,children:"Metadata History"}),(0,n.jsx)("ul",{className:as().history,children:null===t||void 0===t?void 0:t.map((function(e){return(0,n.jsx)("li",{className:as().item,children:(0,n.jsxs)(At.Z,{networkId:null===o||void 0===o?void 0:o.chainId,path:"/tx/".concat(e.tx),children:[i(e.type)," ",(0,n.jsx)(Ct.Z,{date:"".concat(e.timestamp),relative:!0,isUnix:!0})]})},e.id)}))})]})}var ls=s(35615),cs=s.n(ls),ds=s(36910),us=s(56815),vs=s(3283),ps=s.n(vs);function ms(e){var t,s,o=e.asset,r=(0,d.Gs)(),l=r.isInPurgatory,c=r.purgatoryData,u=r.isOwner,v=r.isAssetNetwork,m=(0,xt.o)().debug,f=(0,a.useState)([]),h=f[0],x=f[1],b=(0,a.useState)(),_=b[0],y=b[1];return(0,a.useEffect)((function(){var e,t;y(ps().utils.toChecksumAddress(null===(e=null===h||void 0===h?void 0:h.find((function(e){return"METADATA_CREATED"===e.type})))||void 0===e||null===(t=e.nft)||void 0===t?void 0:t.owner))}),[h]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:cs().networkWrap,children:(0,n.jsx)(ds.Z,{networkId:null===o||void 0===o?void 0:o.chainId,className:cs().network})}),(0,n.jsxs)("article",{className:cs().grid,children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:cs().content,children:[(0,n.jsx)($t,{asset:o,nftPublisher:_}),null!==(null===o||void 0===o||null===(t=o.accessDetails)||void 0===t?void 0:t.datatoken)&&(0,n.jsx)(kt,{did:null===o||void 0===o?void 0:o.id}),!0===l?(0,n.jsx)(U.Z,{title:us.p.T,badge:"Reason: ".concat(null===c||void 0===c?void 0:c.reason),text:us.p.W,state:"error"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{className:cs().description,text:(null===o||void 0===o||null===(s=o.metadata)||void 0===s?void 0:s.description)||""}),(0,n.jsx)(k,{ddo:o})]}),(0,n.jsx)(p,{ddo:o}),(0,n.jsx)(rs,{receipts:h,setReceipts:x}),!0===m&&(0,n.jsx)(wt.Z,{title:"DDO",output:o})]})}),(0,n.jsxs)("div",{className:cs().actions,children:[(0,n.jsx)(ft,{asset:o}),u&&v&&(0,n.jsx)("div",{className:cs().ownerActions,children:(0,n.jsx)(g.Z,{style:"text",size:"small",to:"/asset/".concat(null===o||void 0===o?void 0:o.id,"/edit"),children:"Edit Asset"})})]})]})]})}},43721:function(e){e.exports={button:"AddToken_button__yKqNb",logoWrap:"AddToken_logoWrap__rxP_2",logo:"AddToken_logo__6YJWy",text:"AddToken_text__3FcUU",minimal:"AddToken_minimal__wpSsz"}},57413:function(e){e.exports={display:"AssetComputeList_display__2svmE AssetSelection_selection__0QeG0",scroll:"AssetComputeList_scroll__Uw9MD AssetSelection_scroll__AQZW5",row:"AssetComputeList_row__TGxSd AssetSelection_row__lYejF",info:"AssetComputeList_info__gG7p3",title:"AssetComputeList_title__cFWOy AssetSelection_title__T3kIe",hover:"AssetComputeList_hover__yf9MG",price:"AssetComputeList_price__R7ZI7 AssetSelection_price__D6uti",did:"AssetComputeList_did__9YBUc AssetSelection_did__WmO4h",empty:"AssetComputeList_empty__IHZ4G AssetSelection_empty__b2nLH"}},21156:function(e){e.exports={actions:"ButtonBuy_actions__JNpFD",actionsCenter:"ButtonBuy_actionsCenter__UV8wK",help:"ButtonBuy_help__B4gDr"}},61747:function(e){e.exports={file:"FileIcon_file__33py8",empty:"FileIcon_empty__xFFpU",small:"FileIcon_small__mLFh2",loaderWrap:"FileIcon_loaderWrap__RT62J"}},19751:function(e){e.exports={action:"SuccessConfetti_action__l8M2i"}},2743:function(e){e.exports={text:"WalletNetworkSwitcher_text__zVf4g"}},84045:function(e){e.exports={feedback:"Web3Feedback_feedback__zoZ4g",title:"Web3Feedback_title__R3mfy",error:"Web3Feedback_error__idR33"}},11816:function(e){e.exports={status:"Status_status__aL7Mi",warning:"Status_warning__NPtDa",error:"Status_error__ifLih"}},24335:function(e){e.exports={tags:"Tags_tags__FTcdj",tag:"Tags_tag__fMibn",more:"Tags_more__oOx1_"}},26387:function(e){e.exports={stats:"AssetStats_stats__fPXBx",number:"AssetStats_number__DvFMJ"}},16662:function(e){e.exports={datasetsContainer:"AlgorithmDatasetsListForCompute_datasetsContainer__J85qv",text:"AlgorithmDatasetsListForCompute_text__nBKTF"}},92224:function(e){e.exports={form:"FormComputeDataset_form__aoQzS",warning:"FormComputeDataset_warning__Z5sRS"}},47343:function(e){e.exports={container:"History_container__gGrZI",section:"History_section__AlEbV History_container__gGrZI",highlight:"History_highlight__xViHd",actions:"History_actions__p1_gw History_section__AlEbV History_container__gGrZI",title:"History_title__t1PJO",toggle:"History_toggle__EYL3w",open:"History_open__MjCf8"}},58723:function(e){e.exports={priceComponent:"PriceOutput_priceComponent__xXHZu",calculation:"PriceOutput_calculation__zmxUC",timeout:"PriceOutput_timeout___hnJq",price:"PriceOutput_price__KMUyr",priceRow:"PriceOutput_priceRow__1mY4Z",sign:"PriceOutput_sign__tsy_i",type:"PriceOutput_type__EQZp7"}},60825:function(e){e.exports={info:"Compute_info__bb_Ap",warning:"Compute_warning__38ZZT",feedback:"Compute_feedback__iKLvt"}},86307:function(e){e.exports={consume:"Download_consume__4u7Aa",info:"Download_info__OzAR4",filewrapper:"Download_filewrapper__9oieL",feedback:"Download_feedback__HD_GV",icon:"Download_icon__yhsq_",button:"Download_button__pOiKp",copied:"Download_copied__vCXER",action:"Download_action__8N74A",copyfeedback:"Download_copyfeedback__p5J5x"}},52888:function(e){e.exports={actions:"AssetActions_actions__Wz8GB Box_box__l77_J"}},65238:function(e){e.exports={bookmark:"Bookmark_bookmark__KQLrM",active:"Bookmark_active__G39Q4"}},29349:function(e){e.exports={title:"EditHistory_title__tG4qP MetaItem_title__sm45z",history:"EditHistory_history__9vepi",item:"EditHistory_item__XR4kJ"}},90605:function(e){e.exports={metaFull:"MetaFull_metaFull__oZqqu",svg:"MetaFull_svg__Df18a"}},16117:function(e){e.exports={wrapper:"MetaAsset_wrapper__RzYAm",datatoken:"MetaAsset_datatoken__mOUuI",owner:"MetaAsset_owner__5xJWR",addWrap:"MetaAsset_addWrap__vAna_",add:"MetaAsset_add__kTmB0"}},72909:function(e){e.exports={wrapper:"MetaInfo_wrapper__LER7e",assetType:"MetaInfo_assetType__TSDSx",byline:"MetaInfo_byline__6U3AJ",updated:"MetaInfo_updated__ExSmR"}},19261:function(e){e.exports={meta:"MetaMain_meta__xaRzo",asset:"MetaMain_asset__tfSEv"}},7143:function(e){e.exports={metaSecondary:"MetaSecondary_metaSecondary__KRrpK",samples:"MetaSecondary_samples__j_ejN"}},83213:function(e){e.exports={wrapper:"NftTooltip_wrapper__PQGRr",info:"NftTooltip_info__SObZS",address:"NftTooltip_address__wq7D_",links:"NftTooltip_links__D0tz8",fallback:"NftTooltip_fallback__OQFVJ"}},48884:function(e){e.exports={nftImage:"Nft_nftImage__WZ7Ro",tooltip:"Nft_tooltip__cSxtE"}},99953:function(e){e.exports={stats:"StreamSubs_stats__8nXRi",name:"StreamSubs_name__4TpDI",number:"StreamSubs_number__eUGSG",label:"StreamSubs_label__XZuo1",endpoint:"StreamSubs_endpoint__EE6iq",copy:"StreamSubs_copy__2pko1"}},35615:function(e){e.exports={networkWrap:"AssetContent_networkWrap__0BTDe",grid:"AssetContent_grid__Ip6RM",content:"AssetContent_content__1YKv5 Box_box__l77_J",actions:"AssetContent_actions__Iv8bM",ownerActions:"AssetContent_ownerActions__jfjFN"}}}]);