(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{80023:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var o=n(34051),a=n.n(o),i=n(85893),s=(n(67294),n(47166)),r=n.n(s),l=n(7390),c=n(13674),d=n(21159),u=n(35421),v=n.n(u);function p(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){p(i,o,a,s,r,"next",e)}function r(e){p(i,o,a,s,r,"throw",e)}s(void 0)}))}}var f=r().bind(v());function h(e){var t,n,o,s=e.address,r=e.symbol,u=e.logo,p=e.text,h=e.className,x=e.minimal,b=(0,c.$6)().web3Provider,y=f((o=h,(n=h)in(t={button:!0,minimal:x})?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t));function g(){return(g=m(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,l.Js)(b,s,r,u);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.jsxs)(d.Z,{className:y,style:"text",size:"small",onClick:function(){return g.apply(this,arguments)},children:[(0,i.jsx)("span",{className:v().logoWrap,children:(0,i.jsx)("img",{src:u,className:v().logo,width:"16",height:"16"})}),(0,i.jsx)("span",{className:v().text,children:p||"Add ".concat(r)})]})}},33501:function(e,t,n){"use strict";n.d(t,{Z:function(){return Wo}});var o=n(85893),a=n(67294),i=n(36582),s=n(63008),r=n(78494),l=n.n(r),c=n(45857),d=n(92169);function u(e){var t,n,a,i,r=e.ddo,u=function(){var e,t,n=null===r||void 0===r||null===(e=r.metadata)||void 0===e||null===(t=e.algorithm)||void 0===t?void 0:t.container,a=n.image,i=n.tag;return(0,o.jsx)("span",{children:"".concat(a,":").concat(i)})},v=(0,d.Gs)().isInPurgatory;return r?(0,o.jsxs)("div",{className:l().metaFull,children:[!v&&(0,o.jsx)(s.Z,{title:"Data Author",content:null===r||void 0===r||null===(t=r.metadata)||void 0===t?void 0:t.author}),(0,o.jsx)(s.Z,{title:"Owner",content:(0,o.jsx)(c.Z,{account:null===r||void 0===r||null===(n=r.nft)||void 0===n?void 0:n.owner})}),"algorithm"===(null===r||void 0===r||null===(a=r.metadata)||void 0===a?void 0:a.type)&&(null===r||void 0===r||null===(i=r.metadata)||void 0===i?void 0:i.algorithm)&&(0,o.jsx)(s.Z,{title:"Docker Image",content:(0,o.jsx)(u,{})}),(0,o.jsx)(s.Z,{title:"DID",content:(0,o.jsx)("code",{children:null===r||void 0===r?void 0:r.id})})]}):null}var v=n(68111),p=n.n(v),m=n(41664),f=n.n(m),h=n(20690),x=n.n(h),b=function(e){var t=e.tag,n=e.noLinks,a=encodeURIComponent(t);return n?(0,o.jsx)("span",{className:x().tag,children:t}):(0,o.jsx)(f(),{href:"/search?tags=".concat(a,"&sort=metadata.created&sortOrder=desc"),children:(0,o.jsx)("a",{className:x().tag,title:t,children:t})})};function y(e){var t=e.items,n=e.max,a=e.showMore,i=e.className,s=e.noLinks;n=n||t.length;var r=t.length-n,l=t.filter((function(e){return""!==e})).slice(0,n),c=a&&r>0,d=i?"".concat(x().tags," ").concat(i):x().tags;return(0,o.jsxs)("div",{className:d,children:[null===l||void 0===l?void 0:l.map((function(e,t){return(0,o.jsx)(b,{tag:e,noLinks:s},e+t)})),c&&(0,o.jsx)("span",{className:x().more,children:"+ ".concat(t.length-n," more")})]})}var g=n(21159),_=function(e){var t=e.url;return(0,o.jsx)(g.Z,{href:t,target:"_blank",rel:"noreferrer",download:!0,style:"text",size:"small",children:"Download Sample"})};function k(e){var t,n,a,i,r=e.ddo;return(0,o.jsxs)("aside",{className:p().metaSecondary,children:[(null===(t=null===r||void 0===r?void 0:r.metadata.links)||void 0===t?void 0:t.length)>0&&(0,o.jsx)("div",{className:p().samples,children:(0,o.jsx)(s.Z,{title:"Sample Data",content:(0,o.jsx)(_,{url:null===r||void 0===r?void 0:r.metadata.links[0]})})}),(null===r||void 0===r||null===(n=r.metadata)||void 0===n||null===(a=n.tags)||void 0===a?void 0:a.length)>0&&(0,o.jsx)(y,{items:null===r||void 0===r||null===(i=r.metadata)||void 0===i?void 0:i.tags})]})}var w=n(34051),j=n.n(w),S=n(76110),A=n(55678),D=n(18051),T=n(56755),F=n.n(T),O=n(47166),P=n.n(O),N=n(77713),C=n(60309),I=n.n(C),L=n(23964);var E=P().bind(I());function Z(){return(0,o.jsx)("div",{className:I().loaderWrap,children:(0,o.jsx)(L.Z,{})})}function q(e){var t,n,a,i=e.file,s=e.className,r=e.small,l=e.isLoading,c=E((a=s,(n=s)in(t={file:!0,small:r})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t));return(0,o.jsx)("ul",{className:c,children:!l&&i?(0,o.jsx)(o.Fragment,{children:i.contentType||i.contentLength?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("li",{children:(0,N.Z)(i.contentType)}),(0,o.jsx)("li",{children:i.contentLength&&"0"!==i.contentLength?F()(Number(i.contentLength)):""})]}):(0,o.jsx)("li",{className:I().empty,children:"No file info available"})}):(0,o.jsx)(Z,{})})}var M=n(411),B=n(13674),R=n(82580),z=n(74231),U=z.Ry().shape({algorithm:z.Z_().required("Required")});var K=n(7410),G=n.n(K),W=n(67481),H=n(30508),J=n(2979),$=n.n(J);function V(e,t,n,o,a,i,s,r,l){return!1===s?l:o?"You bought this ".concat(i," already allowing you to use it without paying again."):n?"You own ".concat(e," ").concat(t," allowing you to use this data set by spending 1 ").concat(t,", but without paying OCEAN again."):a?"There are not enought ".concat(t," available in the pool for the transaction to take place"):!1===r?"You do not have enough OCEAN in your wallet to purchase this asset.":"For using this ".concat(i,", you will buy 1 ").concat(t," and immediately spend it back to the publisher and pool.")}function Y(e,t,n,o,a,i,s,r,l,c,d,u,v,p,m,f,h){var x=V(o,n,t,e,a,i,s,l,r),b=!u&&!v||!1===s||!1===f?"":c?"You already bought the selected ".concat(m,", allowing you to use it without paying again."):d?"You own ".concat(v," ").concat(u," allowing you to use the selected ").concat(m," by spending 1 ").concat(u,", but without paying OCEAN again."):p?"There are not enought ".concat(u," available in the pool for the transaction to take place"):!1===l?"":"Additionally, you will buy 1 ".concat(u," for the ").concat(m," and spend it back to its publisher and pool."),y=h?"In order to start the job you also need to pay the fees for renting the c2d resources.":"C2D resources required to start the job are available, no payment required for those fees.";return p?b:a?x:"".concat(x," ").concat(b," ").concat(y)}function Q(e){var t=e.action,n=e.disabled,a=e.hasPreviousOrder,i=e.hasDatatoken,s=e.dtSymbol,r=e.dtBalance,l=e.datasetLowPoolLiquidity,c=e.assetType,d=e.assetTimeout,u=e.isConsumable,v=e.consumableFeedback,p=e.isBalanceSufficient,m=e.hasPreviousOrderSelectedComputeAsset,f=e.hasDatatokenSelectedComputeAsset,h=e.dtSymbolSelectedComputeAsset,x=e.dtBalanceSelectedComputeAsset,b=e.selectedComputeAssetLowPoolLiquidity,y=e.selectedComputeAssetType,_=e.onClick,k=e.stepText,w=e.isLoading,j=e.type,S=e.priceType,A=e.algorithmPriceType,D=e.isAlgorithmConsumable,T=e.hasProviderFee,F="download"===t?a?"Download":"free"===S?"Get":"Buy ".concat("Forever"===d?"":" for ".concat(d)):a&&m&&!T?"Start Compute Job":"free"===S&&"free"===A?"Order Compute Job":"Buy Compute Job";return(0,o.jsx)("div",{className:$().actions,children:w?(0,o.jsx)(L.Z,{message:k}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.Z,{style:"primary",type:j,onClick:_,disabled:n,className:"compute"===t?$().actionsCenter:"",children:F}),(0,o.jsx)("div",{className:$().help,children:"download"===t?V(r,s,i,a,l,c,u,p,v):Y(a,i,s,r,l,c,u,v,p,m,f,h,x,b,y,D,T)})]})})}var X=n(54665),ee=n(35073),te=n(5245),ne=n.n(te),oe=n(13778),ae=n(69016),ie=n.n(ae);function se(e){var t=e.price,n=e.hasPreviousOrder,a=e.hasDatatoken,i=e.symbol,s=e.timeout,r=e.sign,l=e.type;return(0,o.jsxs)("div",{className:ne().priceRow,children:[(0,o.jsx)("div",{className:ne().sign,children:r}),(0,o.jsx)("div",{className:ne().type,children:l}),(0,o.jsxs)("div",{children:[(0,o.jsx)(X.Z,{price:n||a?"0":"".concat(t),symbol:i,size:"small",className:ne().price}),(0,o.jsx)("span",{className:ne().timeout,children:s&&"Forever"!==s&&!n&&"for ".concat(s)})]})]})}function re(e){var t,n=e.totalPrice,a=e.hasPreviousOrder,i=e.hasDatatoken,s=e.assetTimeout,r=e.symbol,l=e.hasPreviousOrderSelectedComputeAsset,c=e.hasDatatokenSelectedComputeAsset,u=e.algorithmConsumeDetails,v=e.selectedComputeAssetTimeout,p=e.datasetOrderPrice,m=e.algoOrderPrice,f=e.providerFeeAmount,h=e.validUntil,x=(0,d.Gs)().asset;return(0,o.jsxs)("div",{className:ne().priceComponent,children:["You will pay"," ",(0,o.jsx)(X.Z,{price:"".concat(n),symbol:r,size:"small"}),(0,o.jsx)(ee.Z,{content:(0,o.jsxs)("div",{className:ne().calculation,children:[(0,o.jsx)(se,{hasPreviousOrder:a,hasDatatoken:i,price:new(ie())(p||(null===x||void 0===x||null===(t=x.accessDetails)||void 0===t?void 0:t.price)||0).toDecimalPlaces(oe.z).toString(),timeout:s,symbol:r,type:"DATASET"}),(0,o.jsx)(se,{hasPreviousOrder:l,hasDatatoken:c,price:new(ie())(m||(null===u||void 0===u?void 0:u.price)||0).toDecimalPlaces(oe.z).toString(),timeout:v,symbol:r,sign:"+",type:"ALGORITHM"}),(0,o.jsx)(se,{price:f,timeout:"".concat(h," seconds"),symbol:r,sign:"+",type:"C2D RESOURCES"}),(0,o.jsx)(se,{price:n,symbol:r,sign:"="})]})})]})}var le=JSON.parse('{"c":{"aT":[{"name":"algorithm","label":"Select an algorithm to start a compute job","type":"assetSelection","value":false,"options":[],"sortOptions":false}]}}'),ce=n(26621),de=n(71132);function ue(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){ue(i,o,a,s,r,"next",e)}function r(e){ue(i,o,a,s,r,"throw",e)}s(void 0)}))}}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){pe(e,t,n[t])}))}return e}function fe(e){var t,n,i,s,r,l,c,u=e.algorithms,v=e.ddoListAlgorithms,p=e.selectedAlgorithmAsset,m=e.setSelectedAlgorithm,f=e.isLoading,h=e.isComputeButtonDisabled,x=e.hasPreviousOrder,b=e.hasDatatoken,y=e.dtBalance,g=e.datasetLowPoolLiquidity,_=e.assetType,k=e.assetTimeout,w=e.hasPreviousOrderSelectedComputeAsset,S=e.hasDatatokenSelectedComputeAsset,A=e.oceanSymbol,D=e.dtSymbolSelectedComputeAsset,T=e.dtBalanceSelectedComputeAsset,F=e.selectedComputeAssetLowPoolLiquidity,O=e.selectedComputeAssetType,P=e.selectedComputeAssetTimeout,N=e.stepText,C=e.isConsumable,I=e.consumableFeedback,L=e.datasetOrderPriceAndFees,E=e.algoOrderPriceAndFees,Z=e.providerFeeAmount,q=e.validUntil,z=function(e){var t=null;return v.forEach((function(n){n.id===e&&(t=n)})),t},U=(0,de.c8)().siteContent,K=(0,B.$6)(),J=K.accountId,$=K.balance,V=(0,R.u6)(),Y=V.isValid,X=V.values,ee=(0,d.Gs)(),te=ee.asset,ne=ee.isAssetNetwork,ae=(0,a.useState)("0"),se=ae[0],ue=ae[1],pe=(0,a.useState)(null===te||void 0===te||null===(t=te.accessDetails)||void 0===t?void 0:t.price),fe=pe[0],he=pe[1],xe=(0,a.useState)(null===p||void 0===p||null===(n=p.accessDetails)||void 0===n?void 0:n.price),be=xe[0],ye=xe[1],ge=(0,a.useState)(!1),_e=ge[0],ke=ge[1];return(0,a.useEffect)((function(){function e(){return(e=ve(j().mark((function e(){var t,n,o;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z(X.algorithm),e.next=3,(0,ce.UM)(t.chainId,t.services[0].datatokenAddress,t.services[0].timeout,J);case 3:n=e.sent,o=me({},t,{accessDetails:n}),m(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}X.algorithm&&J&&C&&function(){e.apply(this,arguments)}()}),[X.algorithm,J,C]),(0,a.useEffect)((function(){if((null===te||void 0===te?void 0:te.accessDetails)&&(null===p||void 0===p?void 0:p.accessDetails)){he((null===L||void 0===L?void 0:L.price)||te.accessDetails.price),ye((null===E||void 0===E?void 0:E.price)||(null===p||void 0===p?void 0:p.accessDetails.price));var e=x||b?new(ie())(0):new(ie())((null===L||void 0===L?void 0:L.price)||te.accessDetails.price).toDecimalPlaces(oe.z),t=w||S?new(ie())(0):new(ie())((null===E||void 0===E?void 0:E.price)||p.accessDetails.price).toDecimalPlaces(oe.z),n=Z?new(ie())(Z).toDecimalPlaces(oe.z):new(ie())(0),o=e.plus(t).plus(n).toDecimalPlaces(oe.z).toString();ue(o)}}),[null===te||void 0===te?void 0:te.accessDetails,null===p||void 0===p?void 0:p.accessDetails,x,b,w,S,L,E,Z]),(0,a.useEffect)((function(){se&&(null===$||void 0===$?void 0:$.ocean)&&y&&ke((0,H.FI)($.ocean,"".concat(se))||Number(y)>=1)}),[se,null===$||void 0===$?void 0:$.ocean,y]),(0,o.jsxs)(R.l0,{className:G().form,children:[(0,o.jsx)(M.Z,{className:G().warning,state:"info",text:U.warning.ctd}),le.c.aT.map((function(e){return(0,o.jsx)(R.gN,me({},e,{options:u,component:W.Z,disabled:f}),e.name)})),(0,o.jsx)(re,{hasPreviousOrder:x,assetTimeout:k,hasPreviousOrderSelectedComputeAsset:w,hasDatatoken:b,selectedComputeAssetTimeout:P,hasDatatokenSelectedComputeAsset:S,algorithmConsumeDetails:null===p||void 0===p?void 0:p.accessDetails,symbol:A,totalPrice:se,datasetOrderPrice:fe,algoOrderPrice:be,providerFeeAmount:Z,validUntil:q}),(0,o.jsx)(Q,{action:"compute",disabled:h||!Y||!_e||!ne||!(null===p||void 0===p||null===(i=p.accessDetails)||void 0===i?void 0:i.isPurchasable),hasPreviousOrder:x,hasDatatoken:b,dtSymbol:null===(s=null===te||void 0===te?void 0:te.datatokens[0])||void 0===s?void 0:s.symbol,dtBalance:y,datasetLowPoolLiquidity:g,assetTimeout:k,assetType:_,hasPreviousOrderSelectedComputeAsset:w,hasDatatokenSelectedComputeAsset:S,dtSymbolSelectedComputeAsset:D,dtBalanceSelectedComputeAsset:T,selectedComputeAssetLowPoolLiquidity:F,selectedComputeAssetType:O,stepText:N,isLoading:f,type:"submit",priceType:null===te||void 0===te||null===(r=te.accessDetails)||void 0===r?void 0:r.type,algorithmPriceType:null===p||void 0===p||null===(l=p.accessDetails)||void 0===l?void 0:l.type,isBalanceSufficient:_e,isConsumable:C,consumableFeedback:I,isAlgorithmConsumable:null===p||void 0===p||null===(c=p.accessDetails)||void 0===c?void 0:c.isPurchasable,hasProviderFee:Z&&"0"!==Z})]})}var he=n(50134),xe=n.n(he),be=n(58952),ye=n(46051),ge=n(62745),_e=n(21220),ke=n.n(_e),we=n(23307),je=n(35432),Se=n.n(je),Ae=n(54560),De=n.n(Ae);function Te(){return(0,o.jsx)("div",{className:De().empty,children:"No assets found."})}function Fe(e){var t=e.assets;return(0,o.jsx)("div",{className:De().display,children:(0,o.jsx)("div",{className:De().scroll,children:t?t&&!t.length?(0,o.jsx)(Te,{}):t.map((function(e){return(0,o.jsx)(f(),{href:"/asset/".concat(e.did),children:(0,o.jsxs)("a",{className:De().row,children:[(0,o.jsxs)("div",{className:De().info,children:[(0,o.jsx)("h3",{className:De().title,children:(0,o.jsx)(Se(),{clamp:1,tagName:"span",children:e.name})}),(0,o.jsxs)(Se(),{clamp:1,tagName:"code",className:De().did,children:[e.symbol," | ",e.did]})]}),(0,o.jsx)(X.Z,{price:e.price,size:"small",className:De().price})]})},e.did)})):(0,o.jsx)(L.Z,{})})})}var Oe=n(51916);function Pe(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){Pe(i,o,a,s,r,"next",e)}function r(e){Pe(i,o,a,s,r,"throw",e)}s(void 0)}))}}function Ce(e){var t=e.asset,n=e.algorithmDid,i=(0,Oe.U)(),s=(0,a.useState)(),r=s[0],l=s[1];return(0,a.useEffect)((function(){function e(){return(e=Ne(j().mark((function e(){var o,a,s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Boolean((0,ye.in)(t,"compute")),a=(0,ye.in)(t,o?"compute":"access"),e.next=4,(0,we.tc)(n,null===a||void 0===a?void 0:a.serviceEndpoint,null===t||void 0===t?void 0:t.chainId,i());case 4:s=e.sent,l(s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&"algorithm"===t.metadata.type&&function(){e.apply(this,arguments)}()}),[t,n,i]),(0,o.jsxs)("div",{className:ke().datasetsContainer,children:[(0,o.jsx)("h3",{className:ke().text,children:"Datasets algorithm is allowed to run on"}),(0,o.jsx)(Fe,{assets:r})]})}var Ie=n(78283),Le=n.n(Ie),Ee=n(42601);function Ze(e){var t=e.title,n=e.children,i=function(){l(!r)},s=(0,a.useState)(!1),r=s[0],l=s[1];return(0,o.jsxs)("div",{className:"".concat(Le().actions," ").concat(!0===r?Le().open:""),children:[(0,o.jsxs)("h3",{className:Le().title,onClick:i,children:["".concat(t," "),(0,o.jsxs)(g.Z,{style:"text",size:"small",onClick:i,className:Le().toggle,children:[r?"Hide":"Show"," ",(0,o.jsx)(Ee.Z,{})]})]}),!0===r&&n]})}var qe=n(11997),Me=n(94523),Be=n(99436),Re=n(54302),ze=n(17448);function Ue(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){Ue(i,o,a,s,r,"next",e)}function r(e){Ue(i,o,a,s,r,"throw",e)}s(void 0)}))}}function Ge(e,t,n,o,a,i){return We.apply(this,arguments)}function We(){return(We=Ke(j().mark((function e(t,n,o,a,i,s){var r,l,c,d,u,v,p,m,f,h,x,b,y,g,_;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=new S._u(t),c=(0,Be.HJ)(n.chainId),e.t0=!i,!e.t0){e.next=8;break}return e.next=7,S.ag.initialize(n.id,n.services[0].id,0,a,n.services[0].serviceEndpoint);case 7:e.t0=e.sent;case 8:d=e.t0,u={consumer:s||a,serviceIndex:0,_providerFee:i||d.providerFee,_consumeMarketFee:{consumeMarketFeeAddress:Re.marketFeeAddress,consumeMarketFeeAmount:Re.consumeMarketOrderFee,consumeMarketFeeToken:c.oceanTokenAddress}},e.t1=null===(r=n.accessDetails)||void 0===r?void 0:r.type,e.next="fixed"===e.t1?13:"dynamic"===e.t1?32:"free"===e.t1?36:40;break;case 13:return e.t2=S.dE,e.t3=t,e.t4=a,e.t5=n.accessDetails.baseToken.address,e.t6=n.accessDetails.datatoken.address,e.next=21,(0,S.eW)(t,null===n||void 0===n||null===(v=n.accessDetails)||void 0===v||null===(p=v.baseToken)||void 0===p?void 0:p.address,o.price);case 21:return e.t7=e.sent,e.next=24,(0,e.t2)(e.t3,e.t4,e.t5,e.t6,e.t7,!1);case 24:if(e.sent){e.next=27;break}return e.abrupt("return");case 27:return b={exchangeContract:c.fixedRateExchangeAddress,exchangeId:n.accessDetails.addressOrId,maxBaseTokenAmount:o.price,baseTokenAddress:null===n||void 0===n||null===(m=n.accessDetails)||void 0===m||null===(f=m.baseToken)||void 0===f?void 0:f.address,baseTokenDecimals:(null===n||void 0===n||null===(h=n.accessDetails)||void 0===h||null===(x=h.baseToken)||void 0===x?void 0:x.decimals)||18,swapMarketFee:Re.consumeMarketFixedSwapFee,marketFeeAddress:Re.marketFeeAddress},e.next=30,l.buyFromFreAndOrder(n.accessDetails.datatoken.address,a,u,b);case 30:return y=e.sent,e.abrupt("return",y);case 32:return e.next=34,l.startOrder(n.accessDetails.datatoken.address,a,s||a,0,i||d.providerFee);case 34:return g=e.sent,e.abrupt("return",g);case 36:return e.next=38,l.buyFromDispenserAndOrder(n.services[0].datatokenAddress,a,u,c.dispenserAddress);case 38:return _=e.sent,e.abrupt("return",_);case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t,n,o,a){return Je.apply(this,arguments)}function Je(){return(Je=Ke(j().mark((function e(t,n,o,a,i){var s,r,l;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new S._u(t),e.t0=!i,!e.t0){e.next=6;break}return e.next=5,S.ag.initialize(n.id,n.services[0].id,0,o,n.services[0].serviceEndpoint);case 5:e.t0=e.sent;case 6:return r=e.t0,e.next=9,s.reuseOrder(n.accessDetails.datatoken.address,o,a,i||r.providerFee);case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,t,n,o){return Ve.apply(this,arguments)}function Ve(){return(Ve=Ke(j().mark((function e(t,n,o,a){var i,s,r,l,c,d,u;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d="free"===(null===t||void 0===t||null===(i=t.accessDetails)||void 0===i?void 0:i.type)?(0,Be.HJ)(t.chainId).oceanTokenAddress:null===t||void 0===t||null===(s=t.accessDetails)||void 0===s||null===(r=s.baseToken)||void 0===r?void 0:r.address,e.next=4,(0,S.C6)(o,n,d,null===t||void 0===t||null===(l=t.accessDetails)||void 0===l||null===(c=l.datatoken)||void 0===c?void 0:c.address,a);case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t,n,o,a,i,s){return Qe.apply(this,arguments)}function Qe(){return(Qe=Ke(j().mark((function e(t,n,o,a,i,s,r){var l,c;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i||"dynamic"!==(null===n||void 0===n?void 0:n.accessDetails.type)){e.next=8;break}return e.next=3,(0,ze.A6)(null===n||void 0===n?void 0:n.accessDetails,a,t);case 3:if(l=e.sent,S.KF.log("[compute] Bought datatoken from pool: ",l),l){e.next=8;break}return A.Am.error("Failed to buy datatoken from pool!"),e.abrupt("return");case 8:return e.next=10,Ge(t,n,o,a,s.providerFee,r);case 10:return c=e.sent,S.KF.log("[compute] Asset ordered:",c),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t,n,o,a,i,s){return et.apply(this,arguments)}function et(){return(et=Ke(j().mark((function e(t,n,o,a,i,s,r){var l,c,d,u,v;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.KF.log("[compute] Handle compute order for asset type: ",n.metadata.type),S.KF.log("[compute] Using initializeData: ",s),e.prev=2,!(null===s||void 0===s?void 0:s.validOrder)||s.providerFee){e.next=8;break}return S.KF.log("[compute] Has valid order: ",s.validOrder),e.abrupt("return",null===n||void 0===n||null===(c=n.accessDetails)||void 0===c?void 0:c.validOrderTx);case 8:if("0"===(null===s||void 0===s||null===(l=s.providerFee)||void 0===l?void 0:l.providerFeeAmount)){e.next=15;break}return e.next=11,$e(n,a,t,s.providerFee.providerFeeAmount);case 11:if(d=e.sent){e.next=14;break}throw new Error("Failed to approve provider fees!");case 14:S.KF.log("[compute] Approved provider fees:",d);case 15:if(!(null===s||void 0===s?void 0:s.validOrder)){e.next=24;break}return S.KF.log("[compute] Calling reuseOrder ...",s),e.next=19,He(t,n,a,s.validOrder,s.providerFee);case 19:if(u=e.sent){e.next=22;break}throw new Error("Failed to reuse order!");case 22:return S.KF.log("[compute] Reused order:",u),e.abrupt("return",null===u||void 0===u?void 0:u.transactionHash);case 24:return S.KF.log("[compute] Calling order ...",s),e.next=27,Ye(t,n,o,a,i,s,r);case 27:return v=e.sent,S.KF.log("[compute] Order succeeded",v),e.abrupt("return",null===v||void 0===v?void 0:v.transactionHash);case 32:e.prev=32,e.t0=e.catch(2),A.Am.error(e.t0.message),S.KF.error("[compute] ".concat(e.t0.message));case 36:case"end":return e.stop()}}),e,null,[[2,32]])})))).apply(this,arguments)}function tt(e,t){return{0:"Approving and buying one ".concat(t," from pool"),1:"Ordering asset",2:"Approving ".concat(e," and ordering asset"),3:"Generating signature to access download url"}}function nt(e,t,n){return{0:"Setting price and fees for ".concat(n),1:"Approving ".concat(t," and ordering ").concat(n," "),2:"Approving ".concat(e," and ordering ").concat(n),3:"Ordering ".concat(n),4:"Generating signature. Starting compute job ..."}}var ot=n(51781),at=n(26997);function it(){var e,t,n=(e=["\n  query PoolData(\n    $pool: ID!\n    $poolAsString: String!\n    $owner: String!\n    $user: String\n  ) {\n    poolData: pool(id: $pool) {\n      id\n      totalShares\n      liquidityProviderSwapFee\n      publishMarketSwapFee\n      spotPrice\n      baseToken {\n        address\n        symbol\n        decimals\n      }\n      baseTokenWeight\n      baseTokenLiquidity\n      datatoken {\n        address\n        symbol\n        decimals\n      }\n      datatokenWeight\n      datatokenLiquidity\n      shares(where: { user: $owner }) {\n        shares\n      }\n    }\n    poolDataUser: pool(id: $pool) {\n      shares(where: { user: $user }) {\n        shares\n      }\n    }\n    poolSnapshots(first: 1000, where: { pool: $poolAsString }, orderBy: date) {\n      date\n      spotPrice\n      baseTokenLiquidity\n      datatokenLiquidity\n      swapVolume\n      baseToken {\n        address\n        symbol\n        decimals\n      }\n      datatoken {\n        address\n        symbol\n        decimals\n      }\n    }\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return it=function(){return n},n}var st=(0,at.Ps)(it());function rt(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function lt(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){rt(i,o,a,s,r,"next",e)}function r(e){rt(i,o,a,s,r,"throw",e)}s(void 0)}))}}function ct(e,t,n,o){return dt.apply(this,arguments)}function dt(){return dt=lt(j().mark((function e(t,n,o,a){var i,s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={pool:n.toLowerCase(),poolAsString:n.toLowerCase(),owner:o.toLowerCase(),user:a.toLowerCase()},e.next=3,(0,ot.rQ)(st,i,(0,ot.Lk)(t));case 3:return s=e.sent,e.abrupt("return",null===s||void 0===s?void 0:s.data);case 5:case"end":return e.stop()}}),e)}))),dt.apply(this,arguments)}function ut(e){return(0,H.qh)(e)?new(ie())(e).mul(10).toString():"0"}function vt(e){return(0,H.qh)(e)?new(ie())(e).mul(100).toString():"0"}function pt(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){mt(e,t,n[t])}))}return e}var ht=(0,a.createContext)({}),xt={liquidity:"0",poolShares:"0"},bt=xt;var yt=function(){return(0,a.useContext)(ht)},gt=function(e){var t,n,i,s=e.children,r=(0,B.$6)(),l=r.accountId,c=r.web3,u=r.chainId,v=(0,d.Gs)(),p=v.asset,m=v.owner,f=(0,de.c8)().getOpcFeeForToken,h=(0,a.useState)(),x=h[0],b=h[1],y=(0,a.useState)(),g=y[0],_=y[1],k=(0,a.useState)(bt),w=k[0],A=k[1],D=(0,a.useState)(xt),T=D[0],F=D[1],O=(0,a.useState)(),P=O[0],N=O[1],C=(0,a.useState)(!1),I=C[0],L=C[1],E=(0,a.useCallback)((i=j().mark((function e(){var t,n,o,a,i,s,r,c;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===p||void 0===p?void 0:p.chainId)&&(null===p||void 0===p||null===(t=p.accessDetails)||void 0===t?void 0:t.addressOrId)&&m){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ct(p.chainId,p.accessDetails.addressOrId,m,l||"");case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:b(a.poolData),i=(null===(o=null===(n=a.poolDataUser)||void 0===n?void 0:n.shares[0])||void 0===o?void 0:o.shares)||"0",s=(0,ze.nC)(a.poolData.baseTokenLiquidity,a.poolData.totalShares,i),r=new(ie())(i).dividedBy(new(ie())(a.poolData.totalShares)).mul(200).toFixed(2),L(Number(r)>0),c={liquidity:s,poolShares:i,poolSharePercentage:r},F((function(e){return ft({},e,c)})),N(a.poolSnapshots),S.KF.log("[pool] Fetched pool data:",a.poolData),S.KF.log("[pool] Fetched user data:",a.poolDataUser),S.KF.log("[pool] Fetched pool snapshots:",a.poolSnapshots);case 19:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=i.apply(e,t);function s(e){pt(a,n,o,s,r,"next",e)}function r(e){pt(a,n,o,s,r,"throw",e)}s(void 0)}))}),[null===p||void 0===p?void 0:p.chainId,null===p||void 0===p||null===(t=p.accessDetails)||void 0===t?void 0:t.addressOrId,m,l]);return(0,a.useEffect)((function(){var e;if("dynamic"===(null===p||void 0===p||null===(e=p.accessDetails)||void 0===e?void 0:e.type)){E();var t=setInterval((function(){E()}),1e4);return function(){return clearInterval(t)}}}),[E,null===p||void 0===p||null===(n=p.accessDetails)||void 0===n?void 0:n.type]),(0,a.useEffect)((function(){if(x){var e={liquidityProviderSwapFee:vt(x.liquidityProviderSwapFee),publishMarketSwapFee:vt(x.publishMarketSwapFee),opcFee:vt(f(x.baseToken.address,null===p||void 0===p?void 0:p.chainId)),weightBaseToken:ut(x.baseTokenWeight),weightDt:ut(x.datatokenWeight),datatokenSymbol:x.datatoken.symbol,datatokenAddress:x.datatoken.address,datatokenDecimals:x.datatoken.decimals,baseTokenSymbol:x.baseToken.symbol,baseTokenAddress:x.baseToken.address,baseTokenDecimals:x.baseToken.decimals,totalPoolTokens:x.totalShares};_(e),S.KF.log("[pool] Created new pool info:",e)}}),[null===p||void 0===p?void 0:p.chainId,u,f,x,c]),(0,a.useEffect)((function(){var e,t,n,o,a;if(x&&(null===g||void 0===g?void 0:g.totalPoolTokens)&&(null===(e=x.shares[0])||void 0===e?void 0:e.shares)&&"0"!==(null===(t=x.shares[0])||void 0===t?void 0:t.shares)){var i=new(ie())(null===(n=x.shares[0])||void 0===n?void 0:n.shares).dividedBy(g.totalPoolTokens).mul(200).toFixed(2),s={liquidity:(0,ze.nC)(x.baseTokenLiquidity,x.totalShares,null===(o=null===x||void 0===x?void 0:x.shares[0])||void 0===o?void 0:o.shares),poolShares:null===(a=x.shares[0])||void 0===a?void 0:a.shares,poolSharePercentage:i};A(s),S.KF.log("[pool] Created new pool creatorinfo:",s)}}),[null===p||void 0===p?void 0:p.chainId,x,null===g||void 0===g?void 0:g.baseTokenAddress,null===g||void 0===g?void 0:g.totalPoolTokens]),(0,o.jsx)(ht.Provider,{value:{poolData:x,poolInfo:g,poolInfoOwner:w,poolInfoUser:T,poolSnapshots:P,hasUserAddedLiquidity:I,refreshInterval:1e4,fetchAllData:E},children:s})},_t=n(7390),kt=n(86256);function wt(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function jt(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){wt(i,o,a,s,r,"next",e)}function r(e){wt(i,o,a,s,r,"throw",e)}s(void 0)}))}}function St(e){var t,n,i,s,r,l,c,d=e.asset,u=e.dtBalance,v=e.file,p=e.fileIsLoading,m=e.consumableFeedback,f=(0,B.$6)(),h=f.accountId,x=f.web3,b=(0,de.c8)().getOpcFeeForToken,y=yt().poolData,g=(0,Me.E)(),_=(0,Oe.U)(),k=(0,a.useState)(!1),w=k[0],T=k[1],F=(0,a.useState)(!1),O=F[0],P=F[1],N=(0,a.useState)(),C=N[0],I=N[1],L=(0,a.useState)(),E=L[0],Z=L[1],z=(0,a.useState)(),K=z[0],G=z[1],W=(0,a.useState)(),H=W[0],J=W[1],$=(0,a.useState)(),V=$[0],Y=$[1],Q=(0,a.useState)(),X=Q[0],ee=Q[1],te=(0,a.useState)(""),ne=te[0],oe=te[1],ie=(0,a.useState)(""),se=ie[0],re=ie[1],le=(0,a.useState)(!0),ue=le[0],ve=le[1],pe=(0,a.useState)(!0),me=pe[0],he=pe[1],_e=(0,a.useState)(""),ke=_e[0],we=_e[1],je=(0,a.useState)(),Se=je[0],Ae=je[1],De=(0,a.useState)(),Te=De[0],Fe=De[1],Pe=(0,a.useState)("0"),Ne=Pe[0],Ie=Pe[1],Le=(0,a.useState)("0"),Ee=Le[0],Be=Le[1],Re=(0,a.useState)(),ze=Re[0],Ue=Re[1],Ke=(0,a.useState)(),Ge=Ke[0],We=Ke[1],He=(0,a.useState)(!1),Je=He[0],$e=He[1],Ve=(0,a.useState)(!1),Ye=Ve[0],Qe=Ve[1],et=Number(u)>=1,tt=!0===w||null===v||!ne&&!et&&!ue||!se&&!V&&!me;function ot(e){return at.apply(this,arguments)}function at(){return(at=jt(j().mark((function e(t){var n,o,a,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.services[0].datatokenAddress){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,_t.VD)(null===t||void 0===t?void 0:t.chainId);case 4:return n=e.sent,o=new S._u(n),e.next=8,o.balance(null===t||void 0===t?void 0:t.services[0].datatokenAddress,h);case 8:return a=e.sent,ee(new ae.Decimal(a).toString()),i=Number(a)>=1,Y(i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return st.apply(this,arguments)}function st(){return(st=jt(j().mark((function e(){var t,n,o,a,i,s,r,l,c,u,v,p,m,f,g,_,k,w,A,D,T,F,O,P,N,C,L,E,Z,q,M,B,R,z,U,K,G,W,J,$,V,Y,Q,X,ee;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,(0,ge.Q_)(d);case 4:if((k=e.sent)&&k.id){e.next=7;break}throw new Error("Error getting compute environments!");case 7:return Ae(k),e.next=10,(0,kt.Y_)(d,H,h,k);case 10:if((w=e.sent)&&(null===w||void 0===w?void 0:w.datasets)&&(null===w||void 0===w?void 0:w.algorithm)){e.next=13;break}throw new Error("Error initializing provider for the compute job!");case 13:return Fe(w),e.t0=Ie,e.next=17,(0,S.J2)(x,null===w||void 0===w||null===(t=w.datasets)||void 0===t||null===(n=t[0])||void 0===n||null===(o=n.providerFee)||void 0===o?void 0:o.providerFeeToken,null===w||void 0===w||null===(a=w.datasets)||void 0===a||null===(i=a[0])||void 0===i||null===(s=i.providerFee)||void 0===s?void 0:s.providerFeeAmount);case 17:if(e.t1=e.sent,(0,e.t0)(e.t1),A=(parseInt(null===w||void 0===w||null===(r=w.datasets)||void 0===r||null===(l=r[0])||void 0===l||null===(c=l.providerFee)||void 0===c?void 0:c.validUntil)-Math.floor(Date.now()/1e3)).toString(),Be(A),(null===d||void 0===d||null===(u=d.accessDetails)||void 0===u?void 0:u.addressOrId)===S.r_||"free"===(null===d||void 0===d||null===(v=d.accessDetails)||void 0===v?void 0:v.type)||!(null===w||void 0===w||null===(p=w.datasets)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.providerFee)){e.next=31;break}return we(nt(null===(D=d.accessDetails)||void 0===D||null===(T=D.baseToken)||void 0===T?void 0:T.symbol,null===(F=d.accessDetails)||void 0===F||null===(O=F.datatoken)||void 0===O?void 0:O.symbol,d.metadata.type)[0]),Z="dynamic"===(null===d||void 0===d||null===(P=d.accessDetails)||void 0===P?void 0:P.type)?{tokenInLiquidity:null===y||void 0===y?void 0:y.baseTokenLiquidity,tokenOutLiquidity:null===y||void 0===y?void 0:y.datatokenLiquidity,tokenOutAmount:"1",opcFee:b(null===d||void 0===d||null===(N=d.accessDetails)||void 0===N?void 0:N.baseToken.address,null===d||void 0===d?void 0:d.chainId),lpSwapFee:null===y||void 0===y?void 0:y.liquidityProviderSwapFee,publishMarketSwapFee:null===d||void 0===d||null===(C=d.accessDetails)||void 0===C?void 0:C.publisherMarketOrderFee,consumeMarketSwapFee:"0"}:null,e.next=27,(0,ce.bc)(d,S.r_,Z,null===w||void 0===w||null===(L=w.datasets)||void 0===L||null===(E=L[0])||void 0===E?void 0:E.providerFee);case 27:if(q=e.sent){e.next=30;break}throw new Error("Error setting dataset price and fees!");case 30:Ue(q);case 31:if((null===H||void 0===H||null===(f=H.accessDetails)||void 0===f?void 0:f.addressOrId)===S.r_||"free"===(null===H||void 0===H||null===(g=H.accessDetails)||void 0===g?void 0:g.type)||!(null===w||void 0===w||null===(_=w.algorithm)||void 0===_?void 0:_.providerFee)){e.next=47;break}if(we(nt(null===H||void 0===H||null===(M=H.accessDetails)||void 0===M||null===(B=M.baseToken)||void 0===B?void 0:B.symbol,null===H||void 0===H||null===(R=H.accessDetails)||void 0===R||null===(z=R.datatoken)||void 0===z?void 0:z.symbol,null===H||void 0===H||null===(U=H.metadata)||void 0===U?void 0:U.type)[0]),G=null,"dynamic"!==(null===H||void 0===H||null===(K=H.accessDetails)||void 0===K?void 0:K.type)){e.next=41;break}return e.next=39,ct(H.chainId,null===(W=H.accessDetails)||void 0===W?void 0:W.addressOrId,null===H||void 0===H?void 0:H.nft.owner,h||"");case 39:X=e.sent,G={tokenInLiquidity:null===X||void 0===X||null===(J=X.poolData)||void 0===J?void 0:J.baseTokenLiquidity,tokenOutLiquidity:null===X||void 0===X||null===($=X.poolData)||void 0===$?void 0:$.datatokenLiquidity,tokenOutAmount:"1",opcFee:b(null===H||void 0===H||null===(V=H.accessDetails)||void 0===V?void 0:V.baseToken.address,null===H||void 0===H?void 0:H.chainId),lpSwapFee:null===X||void 0===X||null===(Y=X.poolData)||void 0===Y?void 0:Y.liquidityProviderSwapFee,publishMarketSwapFee:null===H||void 0===H||null===(Q=H.accessDetails)||void 0===Q?void 0:Q.publisherMarketOrderFee,consumeMarketSwapFee:"0"};case 41:return e.next=43,(0,ce.bc)(H,S.r_,G,w.algorithm.providerFee);case 43:if(ee=e.sent){e.next=46;break}throw new Error("Error setting algorithm price and fees!");case 46:We(ee);case 47:e.next=53;break;case 49:e.prev=49,e.t2=e.catch(0),I(e.t2.message),S.KF.error("[compute] ".concat(e.t2.message," "));case 53:case"end":return e.stop()}}),e,null,[[0,49]])})))).apply(this,arguments)}function rt(){return lt.apply(this,arguments)}function lt(){return(lt=jt(j().mark((function e(){var t,n,o,a,i,s,r,l,c,u,v,p,m,f,b,y;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(!0),P(!1),I(void 0),c=(0,ye.in)(d,"compute"),u={documentId:H.id,serviceId:H.services[0].id},e.next=9,(0,ge.F9)(d,c.id,u,H);case 9:if(v=e.sent,S.KF.log("[compute] Is data set orderable?",v),v){e.next=13;break}throw new Error("Data set is not orderable in combination with selected algorithm.");case 13:return we(nt(null===(t=d.accessDetails.baseToken)||void 0===t?void 0:t.symbol,null===(n=d.accessDetails.datatoken)||void 0===n?void 0:n.symbol,d.metadata.type)["fixed"===(null===(o=d.accessDetails)||void 0===o?void 0:o.type)?2:"dynamic"===(null===(a=d.accessDetails)||void 0===a?void 0:a.type)?1:3]),e.next=16,Xe(x,d,ze,h,et,Te.datasets[0],Se.consumerAddress);case 16:if(p=e.sent){e.next=19;break}throw new Error("Failed to order dataset.");case 19:return we(nt(null===(i=H.accessDetails.baseToken)||void 0===i?void 0:i.symbol,null===(s=H.accessDetails.datatoken)||void 0===s?void 0:s.symbol,H.metadata.type)["fixed"===(null===(r=H.accessDetails)||void 0===r?void 0:r.type)?2:"dynamic"===(null===(l=H.accessDetails)||void 0===l?void 0:l.type)?1:3]),e.next=22,Xe(x,H,Ge,h,V,Te.algorithm,Se.consumerAddress);case 22:if(m=e.sent){e.next=25;break}throw new Error("Failed to order algorithm.");case 25:return S.KF.log("[compute] Starting compute job."),f={documentId:d.id,serviceId:d.services[0].id,transferTxId:p},u.transferTxId=m,b={publishAlgorithmLog:!0,publishOutput:!0},we(nt()[4]),e.next=32,S.ag.computeStart(d.services[0].serviceEndpoint,x,h,null===Se||void 0===Se?void 0:Se.id,f,u,g(),null,b);case 32:if(y=e.sent){e.next=35;break}throw new Error("Error starting compute job.");case 35:S.KF.log("[compute] Starting compute job response: ",y),P(!0),Qe(!Ye),it(),e.next=45;break;case 41:e.prev=41,e.t0=e.catch(0),I(e.t0.message),S.KF.error("[compute] ".concat(e.t0.message," "));case 45:return e.prev=45,T(!1),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[0,41,45,48]])})))).apply(this,arguments)}return(0,a.useEffect)((function(){var e,t;(null===d||void 0===d?void 0:d.accessDetails)&&h&&(ve(null===d||void 0===d||null===(e=d.accessDetails)||void 0===e?void 0:e.isPurchasable),oe(null===d||void 0===d||null===(t=d.accessDetails)||void 0===t?void 0:t.validOrderTx))}),[null===d||void 0===d?void 0:d.accessDetails,h]),(0,a.useEffect)((function(){var e,t;function n(){return(n=jt(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot(H);case 2:return e.next=4,it();case 4:$e(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===H||void 0===H?void 0:H.accessDetails)&&h&&($e(!0),he(null===H||void 0===H||null===(e=H.accessDetails)||void 0===e?void 0:e.isPurchasable),re(null===H||void 0===H||null===(t=H.accessDetails)||void 0===t?void 0:t.validOrderTx),We(null),function(){n.apply(this,arguments)}())}),[H,h]),(0,a.useEffect)((function(){d&&(0,ge.kN)(d,_()).then((function(e){G(e),(0,ge.Kf)(d,e).then((function(e){Z(e)}))}))}),[d]),(0,a.useEffect)((function(){var e=C;e&&A.Am.error(e)}),[C]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:xe().info,children:[(0,o.jsx)(q,{file:v,isLoading:p,small:!0}),(0,o.jsx)(D.Z,{accessDetails:null===d||void 0===d?void 0:d.accessDetails,conversion:!0})]}),"algorithm"===d.metadata.type?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(M.Z,{text:"This algorithm has been set to private by the publisher and can't be downloaded. You can run it against any allowed data sets though!",state:"info"}),(0,o.jsx)(Ce,{algorithmDid:d.id,asset:d})]}):(0,o.jsx)(R.J9,{initialValues:{algorithm:void 0},validateOnMount:!0,validationSchema:U,onSubmit:function(){var e=jt(j().mark((function e(t){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.algorithm){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rt();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:(0,o.jsx)(fe,{algorithms:E,ddoListAlgorithms:K,selectedAlgorithmAsset:H,setSelectedAlgorithm:J,isLoading:w||Je,isComputeButtonDisabled:tt,hasPreviousOrder:void 0!==ne,hasDatatoken:et,dtBalance:u,datasetLowPoolLiquidity:!ue,assetType:null===d||void 0===d?void 0:d.metadata.type,assetTimeout:(0,ye.$N)(null===d||void 0===d?void 0:d.services[0].timeout),hasPreviousOrderSelectedComputeAsset:void 0!==se,hasDatatokenSelectedComputeAsset:V,oceanSymbol:(null===d||void 0===d||null===(t=d.accessDetails)||void 0===t||null===(n=t.baseToken)||void 0===n?void 0:n.symbol)||(null===H||void 0===H||null===(i=H.accessDetails)||void 0===i||null===(s=i.baseToken)||void 0===s?void 0:s.symbol)||"OCEAN",dtSymbolSelectedComputeAsset:null===(r=null===H||void 0===H?void 0:H.datatokens[0])||void 0===r?void 0:r.symbol,dtBalanceSelectedComputeAsset:X,selectedComputeAssetType:"algorithm",selectedComputeAssetTimeout:(0,ye.$N)(null===(l=null===H||void 0===H?void 0:H.services[0])||void 0===l?void 0:l.timeout),stepText:ke,isConsumable:ue,consumableFeedback:m,datasetOrderPriceAndFees:ze,algoOrderPriceAndFees:Ge,providerFeeAmount:Ne,validUntil:Ee})}),(0,o.jsx)("footer",{className:xe().feedback,children:O&&(0,o.jsx)(be.Z,{success:"Your job started successfully! Watch the progress below or on your profile."})}),h&&(null===d||void 0===d||null===(c=d.accessDetails)||void 0===c?void 0:c.datatoken)&&(0,o.jsx)(Ze,{title:"Your Compute Jobs",children:(0,o.jsx)(qe.Z,{minimal:!0,assetChainIds:[null===d||void 0===d?void 0:d.chainId],refetchJobs:Ye})})]})}var At=n(14623),Dt=n.n(At),Tt=n(52439);function Ft(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function Ot(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){Ft(i,o,a,s,r,"next",e)}function r(e){Ft(i,o,a,s,r,"throw",e)}s(void 0)}))}}function Pt(e){var t,n=e.asset,i=e.file,s=e.isBalanceSufficient,r=e.dtBalance,l=e.fileIsLoading,c=e.consumableFeedback,u=(0,B.$6)(),v=u.accountId,p=u.web3,m=(0,de.c8)().getOpcFeeForToken,f=(0,d.Gs)(),h=f.isInPurgatory,x=f.isAssetNetwork,b=yt().poolData,y=(0,Tt.t)(),g=(0,a.useState)(!0),_=g[0],k=g[1],w=(0,a.useState)(!1),T=w[0],F=w[1],O=(0,a.useState)(""),P=O[0],N=O[1],C=(0,a.useState)(!1),I=C[0],L=C[1],E=(0,a.useState)(!1),Z=E[0],M=E[1],R=(0,a.useState)(""),z=R[0],U=R[1],K=(0,a.useState)(),G=K[0],W=K[1];function H(){return J.apply(this,arguments)}function J(){return(J=Ot(j().mark((function e(){var t,o,a,i,s,r,l,c,d,u,m;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!0),e.prev=1,!Z){e.next=9;break}return N(tt(null===(t=n.accessDetails)||void 0===t||null===(o=t.baseToken)||void 0===o?void 0:o.symbol,null===(a=n.accessDetails)||void 0===a||null===(i=a.datatoken)||void 0===i?void 0:i.symbol)[3]),e.next=7,(0,kt.Sv)(p,n,v,z);case 7:e.next=26;break;case 9:if(T||"dynamic"!==n.accessDetails.type){e.next=18;break}return N(tt(null===(c=n.accessDetails.baseToken)||void 0===c?void 0:c.symbol,null===(d=n.accessDetails.datatoken)||void 0===d?void 0:d.symbol)[0]),e.next=15,(0,ze.A6)(n.accessDetails,v,p);case 15:if(e.sent){e.next=18;break}throw new Error;case 18:return N(tt(null===(s=n.accessDetails.baseToken)||void 0===s?void 0:s.symbol,null===(r=n.accessDetails.datatoken)||void 0===r?void 0:r.symbol)["fixed"===(null===(l=n.accessDetails)||void 0===l?void 0:l.type)?2:1]),e.next=21,Ge(p,n,G,v);case 21:if(u=e.sent){e.next=24;break}throw new Error;case 24:M(!0),U(u.transactionHash);case 26:e.next=33;break;case 28:e.prev=28,e.t0=e.catch(1),S.KF.error(e.t0),m=Z?"Failed to download file!":"An error occurred. Check console for more information.",A.Am.error(m);case 33:L(!1);case 34:case"end":return e.stop()}}),e,null,[[1,28]])})))).apply(this,arguments)}(0,a.useEffect)((function(){var e,t,o,a;function i(){return(i=Ot(j().mark((function e(){var t,o,a,i,s,r,l;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===n||void 0===n||null===(t=n.accessDetails)||void 0===t?void 0:t.addressOrId)!==S.r_&&"free"!==(null===n||void 0===n||null===(o=n.accessDetails)||void 0===o?void 0:o.type)&&(b||"dynamic"!==(null===n||void 0===n||null===(a=n.accessDetails)||void 0===a?void 0:a.type))&&!I){e.next=3;break}return e.abrupt("return");case 3:return!G&&L(!0),N("Refreshing price"),r={tokenInLiquidity:null===b||void 0===b?void 0:b.baseTokenLiquidity,tokenOutLiquidity:null===b||void 0===b?void 0:b.datatokenLiquidity,tokenOutAmount:"1",opcFee:m(null===n||void 0===n||null===(i=n.accessDetails)||void 0===i?void 0:i.baseToken.address,null===n||void 0===n?void 0:n.chainId),lpSwapFee:null===b||void 0===b?void 0:b.liquidityProviderSwapFee,publishMarketSwapFee:null===n||void 0===n||null===(s=n.accessDetails)||void 0===s?void 0:s.publisherMarketOrderFee,consumeMarketSwapFee:"0"},e.next=8,(0,ce.bc)(n,S.r_,r);case 8:l=e.sent,W(l),!G&&L(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===n||void 0===n?void 0:n.accessDetails)&&((null===n||void 0===n||null===(e=n.accessDetails)||void 0===e?void 0:e.isOwned)&&M(null===n||void 0===n||null===(t=n.accessDetails)||void 0===t?void 0:t.isOwned),(null===n||void 0===n||null===(o=n.accessDetails)||void 0===o?void 0:o.validOrderTx)&&U(null===n||void 0===n||null===(a=n.accessDetails)||void 0===a?void 0:a.validOrderTx),function(){i.apply(this,arguments)}())}),[n,v,b,m]),(0,a.useEffect)((function(){F(Number(r)>=1)}),[r]),(0,a.useEffect)((function(){if(y&&v&&(null===n||void 0===n?void 0:n.accessDetails)){var e=!(null===n||void 0===n?void 0:n.accessDetails.isPurchasable)||!x||(!s||!x)&&!Z&&!T;k(e)}}),[y,null===n||void 0===n?void 0:n.accessDetails,s,x,T,v,Z]);var $=function(){var e,t,a,i,l;return(0,o.jsx)(Q,{action:"download",disabled:_,hasPreviousOrder:Z,hasDatatoken:T,dtSymbol:null===(e=null===n||void 0===n?void 0:n.datatokens[0])||void 0===e?void 0:e.symbol,dtBalance:r,datasetLowPoolLiquidity:!(null===(t=n.accessDetails)||void 0===t?void 0:t.isPurchasable),onClick:H,assetTimeout:(0,ye.$N)(n.services[0].timeout),assetType:null===n||void 0===n||null===(a=n.metadata)||void 0===a?void 0:a.type,stepText:P,isLoading:I,priceType:null===(i=n.accessDetails)||void 0===i?void 0:i.type,isConsumable:null===(l=n.accessDetails)||void 0===l?void 0:l.isPurchasable,isBalanceSufficient:s,consumableFeedback:c})};return(0,o.jsxs)("aside",{className:Dt().consume,children:[(0,o.jsxs)("div",{className:Dt().info,children:[(0,o.jsx)("div",{className:Dt().filewrapper,children:(0,o.jsx)(q,{file:i,isLoading:l})}),(0,o.jsxs)("div",{className:Dt().pricewrapper,children:[(0,o.jsx)(D.Z,{accessDetails:n.accessDetails,orderPriceAndFees:G,conversion:!0,size:"large"}),!h&&(0,o.jsx)($,{})]})]}),"algorithm"===(null===n||void 0===n||null===(t=n.metadata)||void 0===t?void 0:t.type)&&(0,o.jsx)(Ce,{algorithmDid:n.id,asset:n})]})}var Nt=n(4210),Ct=n(59508),It=n.n(Ct),Lt=n(85567),Et=n.n(Lt),Zt=n(43060),qt=n.n(Zt);function Mt(e){var t=e.title,n=e.backAction;return(0,o.jsxs)("header",{className:qt().header,children:[(0,o.jsx)(g.Z,{className:qt().back,style:"text",size:"small",onClick:n,children:"\u2190 Back"}),(0,o.jsx)("h3",{className:qt().headerTitle,children:t})]})}var Bt=n(98056),Rt=n(7810),zt=n(88129);function Ut(e){var t=e.amount,n=e.tokenSymbol,a=e.approveTokens,i=e.isLoading,s=(0,Rt.o)().infiniteApproval;return i?(0,o.jsx)(L.Z,{message:"Approving ".concat(n,"...")}):s?(0,o.jsxs)(g.Z,{style:"primary",size:"small",disabled:parseInt(t)<1,onClick:function(){return a("".concat(Math.pow(2,53)-1))},children:["Approve ",n," ",(0,o.jsx)(ee.Z,{content:zt.d_.j.rX.replace("COIN",n)})]}):(0,o.jsxs)(g.Z,{style:"primary",size:"small",onClick:function(){return a(t)},children:["Approve ",t," ",n,(0,o.jsx)(ee.Z,{content:zt.d_.j.bh.replace("COIN",n)})]})}function Kt(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function Gt(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){Kt(i,o,a,s,r,"next",e)}function r(e){Kt(i,o,a,s,r,"throw",e)}s(void 0)}))}}function Wt(e){var t,n=e.actionButton,i=e.disabled,s=e.amount,r=e.tokenAddress,l=e.tokenSymbol,c=e.setSubmitting,u=e.setIsTokenApproved,v=(0,d.Gs)(),p=v.asset,m=v.isAssetNetwork,f=(0,a.useState)(!1),h=f[0],x=f[1],b=(0,a.useState)(!1),y=b[0],g=b[1],_=(0,B.$6)(),k=_.web3,w=_.accountId,A=null===p||void 0===p||null===(t=p.accessDetails)||void 0===t?void 0:t.addressOrId,D=(0,a.useCallback)(Gt(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&r&&A&&m&&s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,S.M1)(k,r,w,A);case 4:if(t=e.sent,S.KF.log("[token approval] allowanceValue: ".concat(t)),t){e.next=8;break}return e.abrupt("return");case 8:new(ie())(s).greaterThan(new(ie())("0"))&&x(new(ie())(t).greaterThanOrEqualTo(new(ie())(s))),u(new(ie())(t).greaterThanOrEqualTo(new(ie())(s)));case 10:case"end":return e.stop()}}),e)}))),[k,r,A,w,s,m]);function T(){return(T=Gt(j().mark((function e(t){var n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),c(!0),e.prev=2,e.next=5,(0,S.dE)(k,w,r,A,t);case 5:n=e.sent,S.KF.log("[token approval] Approve tokens tx:",n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),S.KF.error("[token approval] Approve tokens tx failed:",e.t0.message);case 12:return e.prev=12,e.next=15,D();case 15:return g(!1),c(!1),e.finish(12);case 18:case"end":return e.stop()}}),e,null,[[2,9,12,18]])})))).apply(this,arguments)}return(0,a.useEffect)((function(){D()}),[D]),(0,o.jsx)(o.Fragment,{children:h||i||"0"===s||""===s||!s||"undefined"===typeof s?n:(0,o.jsx)(Ut,{amount:s,tokenSymbol:l,approveTokens:function(e){return T.apply(this,arguments)},isLoading:y})})}function Ht(e){var t,n=e.isLoading,i=e.loaderMessage,s=e.successMessage,r=e.slippage,l=e.txId,c=e.actionName,d=e.amount,u=e.action,v=e.isDisabled,p=e.tokenAddress,m=e.tokenSymbol,f=e.setSubmitting,h=(0,B.$6)().networkId,x=(0,a.useState)(!1),b=x[0],y=x[1],_=(0,o.jsx)(g.Z,{style:"primary",size:"small",onClick:function(){return u()},disabled:v,children:c});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:It().actions,children:n?(0,o.jsx)(L.Z,{message:b||"Remove"===c?i:"Approving ".concat(m,"...")}):"Supply"===c||"Swap"===c?(0,o.jsx)(Wt,{actionButton:_,amount:r?(t=d,t?new(ie())(t).mul(new(ie())(1).plus(new(ie())(r).div(new(ie())(100))).toString()).toString():"0"):d,setIsTokenApproved:y,tokenAddress:p,tokenSymbol:m,disabled:v,setSubmitting:f}):_}),l&&(0,o.jsx)(be.Z,{className:It().success,success:s,action:(0,o.jsx)(Bt.Z,{networkId:h,path:"/tx/".concat(l),children:"View transaction"})})]})}var Jt=n(30784),$t=n(35253),Vt=n(91296),Yt=n.n(Vt),Qt=n(89308),Xt=n.n(Qt);function en(e){var t=e.title,n=e.amount,a=e.symbol;return(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:t}),(0,o.jsx)(X.Z,{price:n,symbol:a,size:"small"})]})}function tn(e){var t=e.amount,n=e.symbol,a=e.amountMax,i=e.titleAvailable,s=void 0===i?"Balance":i,r=e.titleMaximum,l=void 0===r?"Maximum":r;return(0,o.jsxs)("div",{className:Xt().userLiquidity,children:[(0,o.jsx)(en,{title:s,amount:t,symbol:n}),a&&(0,o.jsx)(en,{title:l,amount:a,symbol:n})]})}var nn=n(9384);function on(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function an(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){on(i,o,a,s,r,"next",e)}function r(e){on(i,o,a,s,r,"throw",e)}s(void 0)}))}}function sn(){return(sn=an(j().mark((function e(t,n,o,a){var i,s,r,l,c,d,u;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,S.iM)(a.baseTokenLiquidity),e.next=3,t.calcPoolInGivenSingleOut(a.id,n.baseTokenAddress,i.toString());case 3:return s=e.sent,r=o.poolShares,l=new(ie())(s),c=new(ie())(r),d=l.greaterThan(c)?c:l,u=d.equals(c)?new(ie())(100):new(ie())(100).mul(d).div(c),e.abrupt("return",u.toDecimalPlaces(0,ie().ROUND_DOWN).toString());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rn(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function ln(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){rn(i,o,a,s,r,"next",e)}function r(e){rn(i,o,a,s,r,"throw",e)}s(void 0)}))}}var cn=["5","10","15","25","50"];function dn(e){var t=e.setShowRemove,n=(0,B.$6)(),i=n.accountId,s=n.web3,r=(0,d.Gs)().isAssetNetwork,l=yt(),c=l.poolData,u=l.poolInfo,v=l.poolInfoUser,p=l.fetchAllData,m=(0,a.useState)("0"),f=m[0],h=m[1],x=(0,a.useState)("100"),b=x[0],y=x[1],_=(0,a.useState)("0"),k=_[0],w=_[1],D=(0,a.useState)("0"),T=D[0],F=D[1],O=(0,a.useState)(),P=O[0],N=O[1],C=(0,a.useState)(),I=C[0],L=C[1],E=(0,a.useState)(cn[0]),Z=E[0],q=E[1],M=(0,a.useState)("0"),R=M[0],z=M[1],U=(0,a.useState)(),K=U[0],G=U[1];function W(){return(W=ln(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,K.exitswapPoolAmountIn(i,null===c||void 0===c?void 0:c.id,k,R);case 4:t=e.sent,L(null===t||void 0===t?void 0:t.transactionHash),p(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),S.KF.error(e.t0.message),A.Am.error(e.t0.message);case 13:return e.prev=13,h("0"),F("0"),z("0"),N(!1),e.finish(13);case 19:case"end":return e.stop()}}),e,null,[[1,9,13,19]])})))).apply(this,arguments)}(0,a.useEffect)((function(){s&&G(new S.Kg(s))}),[s]),(0,a.useEffect)((function(){i&&v&&u&&K&&function(e,t,n,o){return sn.apply(this,arguments)}(K,u,v,c).then((function(e){return y(e)}))}),[i,v,u,K,c]);var H=(0,a.useRef)(Yt()(function(){var e=ln(j().mark((function e(t,n,o,a){var i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"!==a){e.next=3;break}return F("0"),e.abrupt("return");case 3:return e.next=5,t.calcSingleOutGivenPoolIn(n,o.baseTokenAddress,a,18,o.baseTokenDecimals);case 5:i=e.sent,F(i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,o,a){return e.apply(this,arguments)}}(),150));return(0,a.useEffect)((function(){i&&u&&(null===c||void 0===c?void 0:c.id)&&K&&H.current(K,null===c||void 0===c?void 0:c.id,u,k)}),[k,i,u,null===c||void 0===c?void 0:c.id,K]),(0,a.useEffect)((function(){if(T&&"0"!==f){var e=new(ie())(T).mul(new(ie())(100).minus(new(ie())(Z))).dividedBy(100).toString();z(e.slice(0,18))}else z("0")}),[Z,T,f]),(0,o.jsxs)("div",{className:Et().remove,children:[(0,o.jsx)(Mt,{title:zt.d_.O.TN,backAction:function(){t(!1),p()}}),(0,o.jsxs)("form",{className:Et().removeInput,children:[(0,o.jsx)(tn,{amount:null===v||void 0===v?void 0:v.poolShares,symbol:"pool shares"}),(0,o.jsxs)("div",{className:Et().range,children:[(0,o.jsxs)("h3",{children:[f,"%"]}),(0,o.jsxs)("div",{className:Et().slider,children:[(0,o.jsx)("input",{type:"range",min:"0",max:b,disabled:!r||P,value:f,onChange:function(e){if(h(e.target.value),null===v||void 0===v?void 0:v.poolShares){var t=new(ie())(e.target.value).dividedBy(100).mul(new(ie())(v.poolShares)).toString();w(t)}}}),(0,o.jsx)(g.Z,{style:"text",size:"small",className:Et().maximum,disabled:!r||P,onClick:function(e){e.preventDefault(),h(b);var t=new(ie())(b).dividedBy(100).mul(new(ie())(null===v||void 0===v?void 0:v.poolShares)).toString();w(t)},children:"".concat(b,"% max")})]}),(0,o.jsx)($t.Z,{children:zt.d_.O.lC})]})]}),(0,o.jsxs)("div",{className:Et().output,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:zt.d_.O.J8.s}),(0,o.jsx)(Jt.Z,{symbol:null===u||void 0===u?void 0:u.baseTokenSymbol,balance:T,noIcon:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:zt.d_.O.J8.k}),(0,o.jsx)(Jt.Z,{symbol:null===u||void 0===u?void 0:u.baseTokenSymbol,balance:R})]})]}),(0,o.jsxs)("div",{className:Et().slippage,children:[(0,o.jsx)("strong",{children:"Slippage Tolerance"}),(0,o.jsx)(nn.Z,{name:"slippage",type:"select",size:"mini",postfix:"%",sortOptions:!1,options:cn,disabled:!r||P,value:Z,onChange:function(e){q(e.target.value)}})]}),(0,o.jsx)(Ht,{isLoading:P,loaderMessage:"Removing Liquidity...",actionName:zt.d_.O.aD,action:function(){return W.apply(this,arguments)},successMessage:"Successfully removed liquidity.",isDisabled:!r||"0"===f||"0"===T||"0"===(null===u||void 0===u?void 0:u.totalPoolTokens),txId:I,tokenAddress:null===u||void 0===u?void 0:u.baseTokenAddress,tokenSymbol:null===u||void 0===u?void 0:u.baseTokenSymbol})]})}var un=n(64662),vn=n(55376),pn=n(94357),mn=n(82218),fn=n.n(mn),hn=n(53328),xn=["TVL","Price","Volume"];hn.kL.register(hn.jn,hn.ZL,hn.od,hn.f$,hn.uw,hn.u,hn.ST,hn.vn),hn.ce.font.family="'Sharp Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif",hn.ce.animation={easing:"easeInOutQuart",duration:1e3};var bn={fill:!1,borderWidth:2,pointBorderWidth:1,pointRadius:2,pointHoverRadius:4,pointHoverBorderWidth:0,pointHitRadius:2,pointHoverBackgroundColor:"#ff4092"},yn={intersect:!1,displayColors:!1,padding:10,cornerRadius:3,borderWidth:1,caretSize:7,bodyFont:{size:13,weight:"bold",lineHeight:1,style:"normal",family:hn.ce.font.family},titleFont:{size:10,weight:"normal",lineHeight:1,style:"normal",family:hn.ce.font.family}},gn=n(4067),_n=n.n(gn);function kn(e){var t=e.graphType,n=e.setGraphType,a=function(e){e.preventDefault(),n(e.currentTarget.textContent.toLowerCase())};return(0,o.jsx)("nav",{className:_n().type,children:xn.map((function(e){return(0,o.jsx)(g.Z,{style:"text",size:"small",onClick:a,className:"".concat(_n().button," ").concat(t===e.toLowerCase()?_n().active:null),children:e},e)}))})}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){wn(e,t,n[t])}))}return e}var Sn=n(80515);function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){An(e,t,n[t])}))}return e}function Tn(){var e=(0,Rt.o)(),t=e.locale,n=e.currency,i=(0,Sn.h1)().prices,s=yt().poolSnapshots,r=(0,pn.Z)(!1,Re.darkModeConfig),l=(0,a.useState)(),c=l[0],d=l[1],u=(0,a.useState)("tvl"),v=u[0],p=u[1],m=(0,a.useState)(),f=m[0],h=m[1];return(0,a.useEffect)((function(){var e,t;if(s){S.KF.log("[pool graph] Fired getOptions().");var o="tvl"===v?n:null===(e=s[0])||void 0===e||null===(t=e.baseToken)||void 0===t?void 0:t.symbol,a=function(e,t,n){return{layout:{padding:{left:0,right:0,top:0,bottom:20}},plugins:{tooltip:jn({},yn,{backgroundColor:t?"#141414":"#fff",titleColor:t?"#e2e2e2":"#303030",bodyColor:t?"#fff":"#141414",borderColor:t?"#41474e":"#e2e2e2",callbacks:{label:function(e){return"".concat(e.formattedValue," ").concat(n)}}})},hover:{intersect:!1},scales:{y:{display:!1,beginAtZero:!0},x:{display:!1,offset:!0}}}}(0,r.value,o);d(a)}}),[t,r.value,v,n,s]),(0,a.useEffect)((function(){if(s){var e,o=s.map((function(e){var n=new Date(1e3*e.date);return"".concat(n.toLocaleDateString(t))})),a=s.map((function(e){var t=i[n.toLowerCase()];return new(ie())(e.baseTokenLiquidity).mul(t).toString()})),l=s.map((function(e){return e.spotPrice})),c=s.map((function(e){return new(ie())(e.swapVolume).toDecimalPlaces(oe.z).toString()}));switch(v){case"price":e=l;break;case"volume":e=c;break;default:e=a}var d={labels:o,datasets:[Dn({},bn,{data:e,borderColor:"#8b98a9",backgroundColor:r.value?"#201f1f":"#f7f7f7"})]};h(d),S.KF.log("[pool graph] New graph data created:",d)}}),[s,v,n,i,t,r.value]),(0,o.jsx)("div",{className:fn().graphWrap,children:f?(0,o.jsxs)(o.Fragment,{children:["volume"===v?(0,o.jsx)(vn.$Q,{width:416,height:120,data:f,options:c}):(0,o.jsx)(vn.x1,{width:416,height:120,data:f,options:c}),(0,o.jsx)(kn,{graphType:v,setGraphType:p})]}):(0,o.jsx)(L.Z,{})})}var Fn=n(10306),On=n.n(Fn),Pn=n(96141),Nn=n.n(Pn);function Cn(e){var t=e.title,n=e.tooltip,a=e.titlePostfix,i=e.titlePostfixTitle;return(0,o.jsxs)("h3",{className:Nn().title,children:[t," ",n&&(0,o.jsx)(ee.Z,{content:n})," ",a&&(0,o.jsx)("span",{className:Nn().titlePostfix,title:i,children:a})]})}function In(e){var t=e.title,n=e.tooltip,a=e.titlePostfix,i=e.titlePostfixTitle,s=e.children,r=e.highlight,l=e.className;return(0,o.jsxs)("div",{className:"".concat(On().section," ").concat(r?On().highlight:""," ").concat(l||""),children:[t&&(0,o.jsx)(Cn,{title:t,tooltip:n,titlePostfix:a,titlePostfixTitle:i}),(0,o.jsx)("div",{className:On().grid,children:s})]})}var Ln=n(29417),En=n.n(Ln),Zn=n(83912),qn=n.n(Zn);function Mn(){var e=(0,Rt.o)().debug,t=yt(),n=t.fetchAllData,a=t.refreshInterval;return(0,o.jsxs)("p",{className:qn().update,children:["Fetching every ",a/1e3," sec."," ",e&&(0,o.jsx)(g.Z,{style:"text",size:"small",onClick:function(){return n()},className:qn().button,children:"Refresh Data"})]})}function Bn(){var e,t=(0,d.Gs)().asset,n=yt(),i=n.poolData,s=n.poolInfo,r=n.poolInfoUser,l=n.poolInfoOwner,c=((0,de.c8)().getOpcFeeForToken,(0,B.$6)().chainId),u=(0,a.useState)(""),v=u[0],p=u[1];return(0,a.useEffect)((function(){(0,ot.cA)(c||1).then((function(e){p((null===e||void 0===e?void 0:e.swapOceanFee)?new(ie())(e.swapOceanFee).mul(100).toString():"0")}))}),[c]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(In,{className:En().dataToken,children:[(0,o.jsx)(X.Z,{price:"1",symbol:null===s||void 0===s?void 0:s.datatokenSymbol,size:"large"})," ","="," ",(0,o.jsx)(X.Z,{price:"".concat(null===i||void 0===i?void 0:i.spotPrice),symbol:null===s||void 0===s?void 0:s.baseTokenSymbol,size:"large"}),(0,o.jsx)(ee.Z,{content:zt.d_.j.nt}),(0,o.jsxs)("div",{className:En().dataTokenLinks,children:[(0,o.jsx)(Bt.Z,{networkId:null===t||void 0===t?void 0:t.chainId,path:"address/".concat(null===t||void 0===t||null===(e=t.accessDetails)||void 0===e?void 0:e.addressOrId),children:"Pool"}),(0,o.jsx)(Bt.Z,{networkId:null===t||void 0===t?void 0:t.chainId,path:2021e3===(null===t||void 0===t?void 0:t.chainId)||1287===(null===t||void 0===t?void 0:t.chainId)?"tokens/".concat(null===t||void 0===t?void 0:t.services[0].datatokenAddress):"token/".concat(null===t||void 0===t?void 0:t.services[0].datatokenAddress),children:"Datatoken"})]})]}),(0,o.jsx)(In,{title:"Your liquidity",titlePostfix:(null===r||void 0===r?void 0:r.poolSharePercentage)&&"".concat(null===r||void 0===r?void 0:r.poolSharePercentage,"% of pool"),tooltip:zt.d_.j.sO.replace("SWAPFEE",null===s||void 0===s?void 0:s.liquidityProviderSwapFee),highlight:!0,children:(0,o.jsx)(Jt.Z,{symbol:null===s||void 0===s?void 0:s.baseTokenSymbol,balance:null===r||void 0===r?void 0:r.liquidity,conversion:!0})}),(0,o.jsx)(In,{title:"Owner liquidity",titlePostfix:"".concat(null===l||void 0===l?void 0:l.poolSharePercentage,"% of pool"),children:(0,o.jsx)(Jt.Z,{symbol:null===s||void 0===s?void 0:s.baseTokenSymbol,balance:null===l||void 0===l?void 0:l.liquidity,conversion:!0})}),(0,o.jsx)(In,{title:"Total Value Locked",children:(0,o.jsx)(Jt.Z,{symbol:null===s||void 0===s?void 0:s.baseTokenSymbol,balance:null===i||void 0===i?void 0:i.baseTokenLiquidity.toString(),conversion:!0})}),(0,o.jsx)(In,{title:"Pool Statistics",titlePostfix:(null===s||void 0===s?void 0:s.weightDt)&&"".concat(null===s||void 0===s?void 0:s.weightBaseToken,"/").concat(null===s||void 0===s?void 0:s.weightDt),titlePostfixTitle:"Weight of ".concat(null===s||void 0===s?void 0:s.weightBaseToken,"% ").concat(null===s||void 0===s?void 0:s.baseTokenSymbol," & ").concat(null===s||void 0===s?void 0:s.weightDt,"% ").concat(null===s||void 0===s?void 0:s.datatokenSymbol),children:(0,o.jsx)(Tn,{})}),(0,o.jsxs)(In,{className:En().fees,children:[(0,o.jsx)(Jt.Z,{symbol:"% swap fee",balance:null===s||void 0===s?void 0:s.liquidityProviderSwapFee,noIcon:!0,size:"mini"}),(0,o.jsx)(Jt.Z,{symbol:"% market fee",balance:null===s||void 0===s?void 0:s.publishMarketSwapFee,noIcon:!0,size:"mini"}),(0,o.jsx)(Jt.Z,{symbol:"% OPC fee",balance:v,noIcon:!0,size:"mini"})]}),(0,o.jsx)(Mn,{})]})}function Rn(){var e,t=(0,d.Gs)(),n=t.asset,i=t.isAssetNetwork,s=yt().hasUserAddedLiquidity,r=(0,B.$6)().accountId,l=(0,a.useState)(!1),c=l[0],u=l[1];return(0,o.jsx)(o.Fragment,{children:c?(0,o.jsx)(dn,{setShowRemove:u}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn,{}),s&&(0,o.jsx)("div",{className:It().actions,children:(0,o.jsx)(g.Z,{style:"primary",size:"small",onClick:function(){return u(!0)},disabled:!i,children:"Remove Liquidity"})}),r&&(0,o.jsx)(Ze,{title:"Your Pool Transactions",children:(0,o.jsx)(un.Z,{accountId:r,poolAddress:null===n||void 0===n||null===(e=n.accessDetails)||void 0===e?void 0:e.addressOrId,poolChainId:null===n||void 0===n?void 0:n.chainId,minimal:!0})})]})})}var zn=n(53577),Un=n(56465),Kn=n.n(Un),Gn=n(26242),Wn=n.n(Gn);function Hn(){var e,t=(0,d.Gs)().asset;return(0,o.jsx)("footer",{className:Wn().stats,children:t&&(null===t||void 0===t?void 0:t.stats)&&0!==(null===t||void 0===t||null===(e=t.stats)||void 0===e?void 0:e.orders)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:Wn().number,children:t.stats.orders})," sale",1===t.stats.orders?"":"s"]}):"No sales yet"})}function Jn(e,t,n,o,a,i,s){try{var r=e[i](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(o,a)}function $n(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){Jn(i,o,a,s,r,"next",e)}function r(e){Jn(i,o,a,s,r,"throw",e)}s(void 0)}))}}function Vn(e){var t,n,i=e.asset,s=(0,B.$6)(),r=s.accountId,l=s.balance,c=s.web3,u=(0,d.Gs)().isAssetNetwork,v=(0,Oe.U)(),p=(0,Tt.t)(),m=(0,R.u6)(),f=(0,a.useState)(),h=f[0],x=f[1],b=(0,a.useState)(),y=b[0],g=b[1],_=(0,a.useState)(),k=_[0],w=_[1],A=(0,a.useState)(!1),D=A[0],T=A[1],F=Boolean(null===i||void 0===i?void 0:i.services.filter((function(e){return"compute"===e.type}))[0]);(0,a.useEffect)((function(){function e(){return(e=$n(j().mark((function e(){var t,n,o,a,s,r,l,c,d,u,v;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),o=(null===m||void 0===m||null===(t=m.values)||void 0===t?void 0:t.services[0].providerUrl.url)||(null===(n=null===i||void 0===i?void 0:i.services[0])||void 0===n?void 0:n.serviceEndpoint),e.prev=3,!(null===(r=null===m||void 0===m||null===(a=m.values)||void 0===a||null===(s=a.services)||void 0===s?void 0:s[0].files)||void 0===r?void 0:r[0].url)){e.next=11;break}return e.next=8,(0,kt.pw)(null===(d=null===m||void 0===m||null===(l=m.values)||void 0===l||null===(c=l.services)||void 0===c?void 0:c[0].files)||void 0===d?void 0:d[0].url,o);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,(0,kt.uw)(null===i||void 0===i?void 0:i.id,null===(u=null===i||void 0===i?void 0:i.services[0])||void 0===u?void 0:u.id,o);case 13:e.t0=e.sent;case 14:(v=e.t0)&&w(v[0]),T(!1),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(3),S.KF.error(e.t1.message);case 22:case"end":return e.stop()}}),e,null,[[3,19]])})))).apply(this,arguments)}(0,Be.HJ)(null===i||void 0===i?void 0:i.chainId)&&function(){e.apply(this,arguments)}()}),[i,p,v,null===m||void 0===m||null===(t=m.values)||void 0===t?void 0:t.services]),(0,a.useEffect)((function(){function e(){return(e=$n(j().mark((function e(){var t,n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new S._u(c),e.next=4,t.balance(i.services[0].datatokenAddress,r);case 4:n=e.sent,g(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.KF.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}c&&r&&u&&function(){e.apply(this,arguments)}()}),[c,r,i,u]),(0,a.useEffect)((function(){var e,t;if("free"===(null===i||void 0===i||null===(e=i.accessDetails)||void 0===e?void 0:e.type)&&x(!0),(null===i||void 0===i||null===(t=i.accessDetails)||void 0===t?void 0:t.price)&&r&&(null===l||void 0===l?void 0:l.ocean)&&y)return x((0,H.FI)(l.ocean,"".concat(null===i||void 0===i?void 0:i.accessDetails.price))||Number(y)>=1),function(){x(!1)}}),[l,r,null===i||void 0===i?void 0:i.accessDetails,y]);var O=[{title:"Use",content:(0,o.jsxs)(o.Fragment,{children:[F?(0,o.jsx)(St,{asset:i,dtBalance:y,file:k,fileIsLoading:D}):(0,o.jsx)(Pt,{asset:i,dtBalance:y,isBalanceSufficient:h,file:k,fileIsLoading:D}),(0,o.jsx)(Hn,{})]})}];return"dynamic"===(null===i||void 0===i||null===(n=i.accessDetails)||void 0===n?void 0:n.type)&&O.push({title:"Pool",content:(0,o.jsx)(Rn,{})}),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(gt,{children:[(0,o.jsx)(Nt.Z,{items:O,className:Kn().actions}),(0,o.jsx)(zn.Z,{networkId:null===i||void 0===i?void 0:i.chainId,isAssetNetwork:u})]})})}var Yn,Qn=n(59714),Xn=n.n(Qn);function eo(){return eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},eo.apply(this,arguments)}var to=function(e){return a.createElement("svg",eo({width:"1em",height:"1em",viewBox:"0 0 8 24",xmlns:"http://www.w3.org/2000/svg"},e),Yn||(Yn=a.createElement("path",{d:"M8 1v23l-4-4-4 4V1C0 .447.585-.02 1 0h6c.689-.02 1 .447 1 1Z"})))};function no(e){var t=e.did,n=(0,Rt.o)(),a=n.bookmarks,i=n.addBookmark,s=n.removeBookmark,r=a&&(null===a||void 0===a?void 0:a.includes(t));return(0,o.jsx)("button",{onClick:function(){r?s(t):i(t)},className:"".concat(Xn().bookmark," ").concat(r?Xn().active:""," "),title:r?"Remove Bookmark":"Add Bookmark",children:(0,o.jsx)(to,{})})}var oo=n(48842),ao=n(82581),io=n.n(ao),so=n(80023),ro=n(47068),lo=n.n(ro);function co(e){var t,n,a,i,s,r,l=e.asset,u=e.isBlockscoutExplorer,v=(0,d.Gs)().isAssetNetwork,p=(0,B.$6)().web3ProviderInfo,m=null===(t=null===l||void 0===l?void 0:l.datatokens[0])||void 0===t?void 0:t.symbol;return(0,o.jsxs)("div",{className:lo().wrapper,children:[(0,o.jsxs)("span",{className:lo().owner,children:["Owned by ",(0,o.jsx)(c.Z,{account:null===l||void 0===l||null===(n=l.nft)||void 0===n?void 0:n.owner})]}),(0,o.jsxs)("span",{children:[(0,o.jsx)(Bt.Z,{className:lo().datatoken,networkId:null===l||void 0===l?void 0:l.chainId,path:u?"tokens/".concat(null===l||void 0===l?void 0:l.services[0].datatokenAddress):"token/".concat(null===l||void 0===l?void 0:l.services[0].datatokenAddress),children:"Accessed with ".concat(m)}),"MetaMask"===(null===p||void 0===p?void 0:p.name)&&v&&(0,o.jsx)("span",{className:lo().addWrap,children:(0,o.jsx)(so.Z,{address:null===l||void 0===l?void 0:l.services[0].datatokenAddress,symbol:null===(i=null===(a=l)||void 0===a?void 0:a.datatokens[0])||void 0===i?void 0:i.symbol,logo:"https://raw.githubusercontent.com/oceanprotocol/art/main/logo/datatoken.png",text:"Add ".concat(null===(r=null===(s=l)||void 0===s?void 0:s.datatokens[0])||void 0===r?void 0:r.symbol," to wallet"),className:lo().add,minimal:!0})})]})]})}var uo=n(44715),vo=n(52327),po=n(47703),mo=n.n(po);function fo(e){var t,n=e.asset,a=e.nftPublisher,i=Boolean((0,ye.in)(n,"compute"))?"compute":"access",s=null===n||void 0===n||null===(t=n.nft)||void 0===t?void 0:t.owner;return(0,o.jsxs)("div",{className:mo().wrapper,children:[(0,o.jsx)(uo.Z,{type:null===n||void 0===n?void 0:n.metadata.type,accessType:i,className:mo().assetType}),(0,o.jsx)("div",{className:mo().byline,children:(0,o.jsxs)("p",{children:["Published ",(0,o.jsx)(vo.Z,{date:null===n||void 0===n?void 0:n.metadata.created,relative:!0}),a&&a!==s&&(0,o.jsxs)("span",{children:[" by "," ",(0,o.jsx)(c.Z,{account:a})]}),(null===n||void 0===n?void 0:n.metadata.created)!==(null===n||void 0===n?void 0:n.metadata.updated)&&(0,o.jsxs)(o.Fragment,{children:[" \u2014 ",(0,o.jsxs)("span",{className:mo().updated,children:["updated ",(0,o.jsx)(vo.Z,{date:null===n||void 0===n?void 0:n.metadata.updated,relative:!0})]})]})]})})]})}var ho=n(10130),xo=n(16211),bo=n(22507),yo=n(38798),go=n(34902),_o=n.n(go),ko=n(52053),wo=n.n(ko),jo=[1,137],So=[4];function Ao(e){var t=e.nft,n=e.address,a=e.chainId,i=e.isBlockscoutExplorer,s=jo.concat(So).includes(a),r=s?So.includes(a)?"https://testnets.opensea.io":"https://opensea.io":void 0,l="".concat(r,"/assets/").concat(137===a?"matic":"","/").concat(n,"/1");return(0,o.jsxs)("div",{className:_o().wrapper,children:[t&&(0,o.jsx)("img",{src:t.image_data||t.image,alt:null===t||void 0===t?void 0:t.name}),(0,o.jsxs)("div",{className:_o().info,children:[t&&(0,o.jsx)("h5",{children:t.name}),n&&(0,o.jsxs)("span",{title:n,className:_o().address,children:[(0,_t.XC)(n)," ",(0,o.jsx)(bo.Z,{text:n})]}),(0,o.jsxs)("div",{className:_o().links,children:[n&&(0,o.jsx)(Bt.Z,{networkId:a,path:i?"tokens/".concat(n):"token/".concat(n),children:"View on Explorer"}),s&&n&&(0,o.jsxs)("a",{href:l,target:"_blank",rel:"noreferrer",className:wo().link,children:["View on OpenSea ",(0,o.jsx)(yo.Z,{})]})]}),!(null===t||void 0===t?void 0:t.image_data)&&!(null===t||void 0===t?void 0:t.image)&&(0,o.jsx)("p",{className:_o().fallback,children:"This Data NFT has no image set."})]})]})}var Do=n(43867),To=n.n(Do);function Fo(e){var t,n,a,i,s,r=e.isBlockscoutExplorer,l=(0,d.Gs)().asset,c=(0,ho.Lo)(null===l||void 0===l||null===(t=l.nft)||void 0===t?void 0:t.tokenURI),u=(0,R.u6)(),v=(null===c||void 0===c?void 0:c.image_data)?c.image_data:(null===c||void 0===c?void 0:c.image)?c.image:(null===u||void 0===u||null===(n=u.values)||void 0===n||null===(a=n.metadata)||void 0===a||null===(i=a.nft)||void 0===i?void 0:i.image_data)?u.values.metadata.nft.image_data:null;return(0,o.jsxs)("div",{className:To().nftImage,children:[v?(0,o.jsx)("img",{src:v,alt:null===l||void 0===l||null===(s=l.nft)||void 0===s?void 0:s.name}):(0,o.jsx)(xo.Z,{noWordmark:!0}),(c||(null===l||void 0===l?void 0:l.nftAddress))&&(0,o.jsx)(ee.Z,{className:To().tooltip,content:(0,o.jsx)(Ao,{nft:c,address:null===l||void 0===l?void 0:l.nftAddress,chainId:null===l||void 0===l?void 0:l.chainId,isBlockscoutExplorer:r})})]})}var Oo=[1287,2021e3,2021001,44787,246,1285];function Po(e){var t=e.asset,n=e.nftPublisher,a=Oo.includes(null===t||void 0===t?void 0:t.chainId);return(0,o.jsxs)("aside",{className:io().meta,children:[(0,o.jsxs)("header",{className:io().asset,children:[(0,o.jsx)(Fo,{isBlockscoutExplorer:a}),(0,o.jsx)(co,{asset:t,isBlockscoutExplorer:a})]}),(0,o.jsx)(fo,{asset:t,nftPublisher:n})]})}var No=n(92432),Co=n(77599),Io=n.n(Co);function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,i=[],s=!0,r=!1;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(l){r=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(r)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(){var e,t,n=(e=["\n  query NftUpdate($address: String!) {\n    nftUpdates(\n      where: { nft: $address }\n      orderBy: timestamp\n      orderDirection: desc\n    ) {\n      id\n      nft {\n        address\n        owner\n      }\n      tx\n      timestamp\n      type\n    }\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Zo=function(){return n},n}var qo=(0,at.Ps)(Zo());function Mo(e){var t=e.receipts,n=e.setReceipts,i=function(e){switch(e){case"METADATA_CREATED":return"published";case"METADATA_UPDATED":return"updated";case"STATE_UPDATED":return"state updated";case"TOKENURI_UPDATED":return"NFT metadata updated";default:return""}},s=(0,d.Gs)().asset,r=(0,a.useState)(),l=r[0],c=r[1];(0,a.useEffect)((function(){if(s){var e=(0,ot.Lk)(s.chainId);c(e)}}),[s]);var u=Eo((0,No.aM)({query:qo,variables:{address:null===s||void 0===s?void 0:s.nft.address.toLowerCase()},context:l,pause:!s||!l}),1)[0].data;return(0,a.useEffect)((function(){if(u&&0!==u.nftUpdates.length){var e=u.nftUpdates;n(e)}}),[u,n]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h3",{className:Io().title,children:"Metadata History"}),(0,o.jsx)("ul",{className:Io().history,children:null===t||void 0===t?void 0:t.map((function(e){return(0,o.jsx)("li",{className:Io().item,children:(0,o.jsxs)(Bt.Z,{networkId:null===s||void 0===s?void 0:s.chainId,path:"/tx/".concat(e.tx),children:[i(e.type)," ",(0,o.jsx)(vo.Z,{date:"".concat(e.timestamp),relative:!0,isUnix:!0})]})},e.id)}))})]})}var Bo=n(35853),Ro=n.n(Bo),zo=n(65450),Uo=n(56815),Ko=n(3283),Go=n.n(Ko);function Wo(e){var t,n=e.asset,s=(0,d.Gs)(),r=s.isInPurgatory,l=s.purgatoryData,c=s.isOwner,v=s.isAssetNetwork,p=(0,Rt.o)().debug,m=(0,a.useState)([]),f=m[0],h=m[1],x=(0,a.useState)(),b=x[0],y=x[1];return(0,a.useEffect)((function(){var e,t;y(Go().utils.toChecksumAddress(null===(e=null===f||void 0===f?void 0:f.find((function(e){return"METADATA_CREATED"===e.type})))||void 0===e||null===(t=e.nft)||void 0===t?void 0:t.owner))}),[f]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:Ro().networkWrap,children:(0,o.jsx)(zo.Z,{networkId:null===n||void 0===n?void 0:n.chainId,className:Ro().network})}),(0,o.jsxs)("article",{className:Ro().grid,children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:Ro().content,children:[(0,o.jsx)(Po,{asset:n,nftPublisher:b}),null!==(null===n||void 0===n||null===(t=n.accessDetails)||void 0===t?void 0:t.datatoken)&&(0,o.jsx)(no,{did:null===n||void 0===n?void 0:n.id}),!0===r?(0,o.jsx)(M.Z,{title:Uo.p.T,badge:"Reason: ".concat(null===l||void 0===l?void 0:l.reason),text:Uo.p.W,state:"error"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{className:Ro().description,text:(null===n||void 0===n?void 0:n.metadata.description)||""}),(0,o.jsx)(k,{ddo:n})]}),(0,o.jsx)(u,{ddo:n}),(0,o.jsx)(Mo,{receipts:f,setReceipts:h}),!0===p&&(0,o.jsx)(oo.Z,{title:"DDO",output:n})]})}),(0,o.jsxs)("div",{className:Ro().actions,children:[(0,o.jsx)(Vn,{asset:n}),c&&v&&(0,o.jsx)("div",{className:Ro().ownerActions,children:(0,o.jsx)(g.Z,{style:"text",size:"small",to:"/asset/".concat(null===n||void 0===n?void 0:n.id,"/edit"),children:"Edit Asset"})})]})]})]})}},35421:function(e){e.exports={button:"AddToken_button__yKqNb",logoWrap:"AddToken_logoWrap__rxP_2",logo:"AddToken_logo__6YJWy",text:"AddToken_text__3FcUU",minimal:"AddToken_minimal__wpSsz"}},54560:function(e){e.exports={display:"AssetComputeList_display__2svmE AssetSelection_selection__0QeG0",scroll:"AssetComputeList_scroll__Uw9MD AssetSelection_scroll__AQZW5",row:"AssetComputeList_row__TGxSd AssetSelection_row__lYejF",info:"AssetComputeList_info__gG7p3",title:"AssetComputeList_title__cFWOy AssetSelection_title__T3kIe",hover:"AssetComputeList_hover__yf9MG",price:"AssetComputeList_price__R7ZI7 AssetSelection_price__D6uti",did:"AssetComputeList_did__9YBUc AssetSelection_did__WmO4h",empty:"AssetComputeList_empty__IHZ4G AssetSelection_empty__b2nLH"}},2979:function(e){e.exports={actions:"ButtonBuy_actions__JNpFD",actionsCenter:"ButtonBuy_actionsCenter__UV8wK",help:"ButtonBuy_help__B4gDr"}},60309:function(e){e.exports={file:"FileIcon_file__33py8",empty:"FileIcon_empty__xFFpU",small:"FileIcon_small__mLFh2",loaderWrap:"FileIcon_loaderWrap__RT62J"}},20690:function(e){e.exports={tags:"Tags_tags__FTcdj",tag:"Tags_tag__fMibn",more:"Tags_more__oOx1_"}},78283:function(e){e.exports={actions:"AssetActionHistoryTable_actions__krfCK Section_section__eLoDt Section_container__Vdq7m",title:"AssetActionHistoryTable_title__tQj9n Title_title__CV1LA",toggle:"AssetActionHistoryTable_toggle__MPFFM",open:"AssetActionHistoryTable_open__cQVV0"}},26242:function(e){e.exports={stats:"AssetStats_stats__fPXBx",number:"AssetStats_number__DvFMJ"}},21220:function(e){e.exports={datasetsContainer:"AlgorithmDatasetsListForCompute_datasetsContainer__J85qv",text:"AlgorithmDatasetsListForCompute_text__nBKTF"}},7410:function(e){e.exports={form:"FormComputeDataset_form__aoQzS",warning:"FormComputeDataset_warning__Z5sRS"}},5245:function(e){e.exports={priceComponent:"PriceOutput_priceComponent__xXHZu",calculation:"PriceOutput_calculation__zmxUC",timeout:"PriceOutput_timeout___hnJq",price:"PriceOutput_price__KMUyr",priceRow:"PriceOutput_priceRow__1mY4Z",sign:"PriceOutput_sign__tsy_i",type:"PriceOutput_type__EQZp7"}},50134:function(e){e.exports={info:"Compute_info__bb_Ap",feedback:"Compute_feedback__iKLvt"}},14623:function(e){e.exports={consume:"Download_consume__4u7Aa",info:"Download_info__OzAR4",filewrapper:"Download_filewrapper__9oieL",feedback:"Download_feedback__HD_GV"}},43060:function(e){e.exports={header:"Header_header__COusS",headerTitle:"Header_headerTitle__xYH93",back:"Header_back__RlxJn"}},59508:function(e){e.exports={actions:"Actions_actions__aA_x7",success:"Actions_success__k4Xrl"}},4067:function(e){e.exports={type:"Nav_type__HxeU4",button:"Nav_button__jNNGa",active:"Nav_active__4ZCbr"}},82218:function(e){e.exports={graphWrap:"Graph_graphWrap__JbCgH Section_container__Vdq7m"}},85567:function(e){e.exports={removeInput:"Remove_removeInput__C02bi",range:"Remove_range__iXaG6",slider:"Remove_slider__aw_qP",maximum:"Remove_maximum__wM69P",toggle:"Remove_toggle__x71XP",output:"Remove_output__x10Rr Section_container__Vdq7m",slippage:"Remove_slippage__7dgh1 Slippage_slippage__5aJ5E"}},96141:function(e){e.exports={title:"Title_title__CV1LA",titlePostfix:"Title_titlePostfix__8RpFz"}},10306:function(e){e.exports={container:"Section_container__Vdq7m",section:"Section_section__eLoDt Section_container__Vdq7m",highlight:"Section_highlight__b3YjZ",grid:"Section_grid__nSvPv"}},83912:function(e){e.exports={update:"Update_update__DBnnl",pulse:"Update_pulse__gfjlI",button:"Update_button__cJ28A"}},29417:function(e){e.exports={dataToken:"Sections_dataToken__2FPF0",dataTokenLinks:"Sections_dataTokenLinks__yFWRC",fees:"Sections_fees__sTlHF"}},89308:function(e){e.exports={userLiquidity:"UserLiquidity_userLiquidity__P8JMk"}},56465:function(e){e.exports={actions:"AssetActions_actions__Wz8GB Box_box__l77_J"}},59714:function(e){e.exports={bookmark:"Bookmark_bookmark__KQLrM",active:"Bookmark_active__G39Q4"}},77599:function(e){e.exports={title:"EditHistory_title__tG4qP MetaItem_title__sm45z",history:"EditHistory_history__9vepi",item:"EditHistory_item__XR4kJ"}},78494:function(e){e.exports={metaFull:"MetaFull_metaFull__oZqqu"}},47068:function(e){e.exports={wrapper:"MetaAsset_wrapper__RzYAm",datatoken:"MetaAsset_datatoken__mOUuI",owner:"MetaAsset_owner__5xJWR",addWrap:"MetaAsset_addWrap__vAna_",add:"MetaAsset_add__kTmB0"}},47703:function(e){e.exports={wrapper:"MetaInfo_wrapper__LER7e",assetType:"MetaInfo_assetType__TSDSx",byline:"MetaInfo_byline__6U3AJ",updated:"MetaInfo_updated__ExSmR"}},82581:function(e){e.exports={meta:"MetaMain_meta__xaRzo",asset:"MetaMain_asset__tfSEv"}},68111:function(e){e.exports={metaSecondary:"MetaSecondary_metaSecondary__KRrpK",samples:"MetaSecondary_samples__j_ejN"}},34902:function(e){e.exports={wrapper:"NftTooltip_wrapper__PQGRr",info:"NftTooltip_info__SObZS",address:"NftTooltip_address__wq7D_",links:"NftTooltip_links__D0tz8",fallback:"NftTooltip_fallback__OQFVJ"}},43867:function(e){e.exports={nftImage:"Nft_nftImage__WZ7Ro",tooltip:"Nft_tooltip__cSxtE"}},35853:function(e){e.exports={networkWrap:"AssetContent_networkWrap__0BTDe",grid:"AssetContent_grid__Ip6RM",content:"AssetContent_content__1YKv5 Box_box__l77_J",actions:"AssetContent_actions__Iv8bM",ownerActions:"AssetContent_ownerActions__jfjFN"}},88129:function(e){"use strict";e.exports=JSON.parse('{"Ue":{"Bd":{"title":"Fixed","info":"Set your price for accessing this data set. The datatoken for this data set will be worth the entered amount of OCEAN.","tooltips":{"communityFee":"Goes to Ocean DAO for teams to improve the tools, build apps, do outreach, and more. A small fraction is used to burn OCEAN. This fee is collected when downloading or using an asset in a compute job.","marketplaceFee":"Goes to the marketplace owner that is hosting and providing the marketplace and is collected when downloading or using an asset in a compute job. In Ocean Market, it is treated as network revenue that goes to the Ocean community."}},"gd":{"title":"Free","info":"Set your data set as free. The datatoken for this data set will be given for free via creating a faucet.","fields":[{"name":"freeAgreement","type":"checkbox","options":["I want this asset to be free. I understand network fees are still to be paid"]}]}},"d_":{"j":{"nt":"The price is determined by an automated market maker, which is a type of decentralized exchange protocol that relies on a mathematical formula. It is an alternative to a traditional order book.","sO":"Providing liquidity will earn you SWAPFEE% on every transaction in this pool, proportionally to your share of the pool.","bh":"Give the smart contract permission to spend your COIN which has to be done for each transaction. You can optionally set this to infinite in your user preferences.","rX":"Give the smart contract permission to spend infinte amounts of your COIN so you have to do this only once. You can disable allowing infinite amounts in your user preferences."},"O":{"TN":"Remove Liquidity","lC":"Set the amount of your pool shares to spend. You will get the equivalent value in OCEAN, limited to maximum amount for pool protection.","J8":{"s":"Expected output","k":"Minimum received"},"aD":"Remove"}}}')}}]);