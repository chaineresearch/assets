(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{55204:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/publish/[step]",function(){return r(96773)}])},94795:function(e,t,r){"use strict";function n(e,t){return t.filter((function(t){return t.name===e}))[0]}r.d(t,{R:function(){return n}})},81517:function(e,t,r){"use strict";function n(e){var t=decodeURI(e).trim().toLowerCase();return t.startsWith("javascript:")||t.startsWith("data:")||t.startsWith("vbscript:")?"about:blank":e}r.d(t,{N:function(){return n}})},96773:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ar}});var n=r(85893),a=r(67294),i=r(34051),o=r.n(i),s=r(82580),c=r(54302),u=JSON.parse('{"Pu":{"T":"Metadata","X":[{"name":"nft","label":"Data NFT","type":"nft","help":"All metadata is stored on-chain in a newly deployed ERC-721 contract representing this asset, created with this name, symbol, description and image.","required":true},{"name":"type","label":"Asset Type","type":"boxSelection","options":["Dataset","Algorithm"],"required":true},{"name":"name","label":"Title","placeholder":"e.g. Shapes of Desert Plants","required":true},{"name":"description","label":"Description","help":"Add a thorough description with as much detail as possible. You can use [Markdown](https://daringfireball.net/projects/markdown/basics). You can change the description at any time. If you provide personal data, please note that it will remain in the transaction history. For more information on how personal data is handled within the metadata, please refer to our [privacy policy](/privacy/en).","type":"textarea","required":true},{"name":"author","label":"Author","placeholder":"e.g. Jelly McJellyfish","help":"Give proper attribution for your data set. You are welcome to use a pseudonym, and you can change your author name at any time. Please note that it will remain in the transaction history. For more information on how personal data is handled within the metadata, please refer to our [privacy policy](/privacy/en).","required":true},{"name":"tags","label":"Tags","placeholder":"e.g. logistics, ai","help":"Separate tags with comma."},{"name":"dockerImage","label":"Docker Image","help":"Please select an image to run your algorithm.","type":"boxSelection","options":["populated from algorithmContainerPresets in Publish/_constants"],"required":true},{"name":"dockerImageCustom","label":"Docker Image URL","placeholder":"e.g. oceanprotocol/algo_dockers or https://example.com/image_path","help":"Provide the name of a public Docker image or the full url if you have it hosted in a 3rd party repo","required":true},{"name":"dockerImageCustomTag","label":"Docker Image Tag","placeholder":"e.g. latest","help":"Provide the tag for your Docker image.","required":true},{"name":"dockerImageCustomEntrypoint","label":"Docker Entrypoint","placeholder":"e.g. python $ALGO","help":"Provide the entrypoint for your algorithm.","required":true},{"name":"termsAndConditions","label":"Terms & Conditions","type":"checkbox","options":["I agree to the Terms and Conditions"],"required":true}]},"uZ":{"T":"Access","X":[{"name":"dataTokenOptions","label":"Datatoken","type":"datatoken","help":"The datatoken used for accessing this asset will be created with this name & symbol.","required":true},{"name":"providerUrl","label":"Provider URL","type":"providerUrl","help":"Enter the URL for your custom [provider](https://github.com/oceanprotocol/provider/) or leave as is to use the default one. If you change your provider URL after adding your file, please add & validate your file again.","placeholder":"e.g. https://provider.oceanprotocol.com/","required":true},{"name":"files","label":"File","placeholder":"e.g. https://file.com/file.json","help":"This URL will be stored encrypted after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.** For a compute data set, your file should match the file type required by the algorithm, and should not exceed 1 GB in file size. ","prominentHelp":true,"type":"files","required":true},{"name":"links","label":"Sample file","placeholder":"e.g. https://file.com/samplefile.json","help":"This file should reveal the data structure of your data set, e.g. by including the header and one line of a CSV file. This file URL will be publicly available after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.**","prominentHelp":true,"type":"files"},{"name":"algorithmPrivacy","label":"Algorithm Privacy","type":"checkbox","options":["Keep my algorithm private"],"help":"By default, your algorithm can be downloaded for a fixed or dynamic price in addition to running in compute jobs. Enabling this option will prevent downloading, so your algorithm can only be run as part of a compute job on a data set.","required":false},{"name":"access","label":"Access Type","help":"Choose how you want your files to be accessible for the specified price.","type":"boxSelection","options":["Access","Compute"],"required":true,"disclaimer":"Please do not provide downloadable personal data without the consent of the data subjects.","disclaimerValues":["Download"]},{"name":"timeout","label":"Timeout","help":"Define how long buyers should be able to download the data set again after the initial purchase.","type":"select","options":["Forever","1 day","1 week","1 month","1 year"],"sortOptions":false,"required":true}]},"D":{"T":"Pricing"},"RN":{"T":"Preview"},"I8":{"T":"Submit"}}'),l=r(4210),d=r(35253),p=r(71323),m=r(67481),f=r(15360),h=r.n(f);function v(e){var t=e.meta;return t.error?(0,n.jsx)("div",{className:h().error,children:t.error}):null}var g=r(54665),y=r(87699),b=r.n(y),x=r(94795);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){k(e,t,r[t])}))}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){var t=e.firstPrice,r=e.content,a=_((0,s.U$)("pricing.price"),2),i=a[0],o=a[1],c=(0,s.u6)().values,u=c.services[0].dataTokenOptions;return(0,n.jsx)("div",{className:b().price,children:"free"===c.pricing.type?(0,n.jsx)("div",{className:b().free,children:(0,n.jsx)(s.gN,j({},(0,x.R)("freeAgreement",r.fields),{component:m.Z,name:"pricing.freeAgreement"}))}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:b().grid,children:[(0,n.jsxs)("div",{className:b().form,children:[(0,n.jsx)(m.Z,j({type:"number",min:"1",placeholder:"0",prefix:"OCEAN"},i)),(0,n.jsx)(v,{meta:o})]}),(0,n.jsx)("div",{className:b().datatoken,children:(0,n.jsxs)("h4",{children:["= ",(0,n.jsx)("strong",{children:"1"})," ",u.symbol," ",(0,n.jsx)(p.Z,{price:i.value,className:b().conversion})]})})]}),t&&(0,n.jsxs)("aside",{className:b().firstPrice,children:["Expected first price:"," ",(0,n.jsx)(g.Z,{price:Number(t)>0?t:"-",size:"small",conversion:!0})]})]})})}var O=r(35073),N=r(1611),T=r.n(N),F=r(51781),C=r(13674),I=r(71132),A=r(69016),Z=r.n(A);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){R(e,t,r[t])}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(e){var t=e.title,r=e.name,a=e.tooltip,i=e.value;return(0,n.jsx)(m.Z,{label:(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)(O.Z,{content:a})]}),value:i,name:r,postfix:"%",readOnly:!0,size:"small"})};function M(e){var t=e.tooltips,r=e.pricingType,i=E((0,s.U$)("pricing.swapFee"),2),o=i[0],c=i[1],u=(0,a.useState)(""),l=u[0],d=u[1],p=(0,C.$6)().chainId,f=(0,I.c8)().appConfig;return(0,a.useEffect)((function(){(0,F.cA)(p||1).then((function(e){d((null===e||void 0===e?void 0:e.swapOceanFee)?new(Z())(e.swapOceanFee).mul(100).toString():"0")}))}),[p]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:T().fees,children:["dynamic"===r&&(0,n.jsx)(m.Z,S({label:(0,n.jsxs)(n.Fragment,{children:["Swap Fee",(0,n.jsx)(O.Z,{content:t.swapFee})]}),type:"number",postfix:"%",min:"0.1",max:"10",step:"0.1",size:"small"},o,{additionalComponent:(0,n.jsx)(v,{meta:c})})),(0,n.jsx)(q,{title:"Community Swap Fee",name:"communityFee",tooltip:t.communityFee,value:l}),(0,n.jsx)(q,{title:"Marketplace Fee",name:"marketplaceFee",tooltip:t.marketplaceFee,value:"dynamic"===r?null===f||void 0===f?void 0:f.publisherMarketPoolSwapFee:null===f||void 0===f?void 0:f.publisherMarketFixedSwapFee})]})})}var U=r(6259),H=r.n(U);function L(e){var t=e.content;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{children:t.info}),(0,n.jsx)("h4",{className:H().title,children:"Price"}),(0,n.jsx)(P,{}),(0,n.jsx)(M,{tooltips:t.tooltips,pricingType:"fixed"})]})}function X(e){var t=e.content,r=(0,s.u6)(),i=r.values,o=r.setFieldValue;return(0,a.useEffect)((function(){i.pricing.freeAgreement?(o("pricing.price",1),o("pricing.amountDataToken",1e3)):(o("pricing.price",0),o("pricing.amountDataToken",0))}),[o,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{children:t.info}),(0,n.jsx)("h4",{className:H().title,children:"Price"}),(0,n.jsx)(P,{content:t})]})}var V,K=r(88129),W=r(31139),z=r.n(W);function B(){var e=(0,I.c8)().appConfig,t=(0,s.u6)(),r=t.values,i=t.setFieldValue,o=r.pricing,c=o.price,u=o.type;(0,a.useEffect)((function(){i("pricing.price",c),i("pricing.type",u)}),[c,i,u]);var d=["true"===e.allowFixedPricing?{title:K.Ue.Bd.title,content:(0,n.jsx)(L,{content:K.Ue.Bd})}:void 0,"true"===e.allowFreePricing?{title:K.Ue.gd.title,content:(0,n.jsx)(X,{content:K.Ue.gd})}:void 0].filter((function(e){return void 0!==e}));return(0,n.jsx)(l.Z,{items:d,handleTabChange:function(e){var t=e.toLowerCase();i("pricing.type",t),i("pricing.price",0),i("pricing.freeAgreement",!1),"free"!==t&&i("pricing.amountDataToken",1e3)},defaultIndex:"free"===u?1:0,className:z().pricing,showRadio:!0})}function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$.apply(this,arguments)}var J,G=function(e){return a.createElement("svg",$({width:"1em",height:"1em",viewBox:"0 0 15 12",xmlns:"http://www.w3.org/2000/svg"},e),V||(V=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.846.356H0v2.859h2.846V.356Zm0 4.288H0v2.858h2.846V4.644ZM0 9h2.846v2.858H0V9ZM8.538.356H5.692v2.859h2.846V.356ZM5.692 4.644h2.846v2.858H5.692V4.644ZM8.538 9H5.692v2.858h2.846V9ZM11.384.356h2.846v2.859h-2.846V.356Zm2.846 4.288h-2.846v2.858h2.846V4.644ZM11.384 9h2.846v2.858h-2.846V9Z"})))};function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y.apply(this,arguments)}var Q=function(e){return a.createElement("svg",Y({width:"1em",height:"1em",viewBox:"0 0 15 9",xmlns:"http://www.w3.org/2000/svg"},e),J||(J=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.57.512a.75.75 0 0 0-1.14.976L3.013 4.5.431 7.512a.75.75 0 0 0 1.138.976l3-3.5a.75.75 0 0 0 0-.976l-3-3.5ZM9 4.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5H9Z"})))},ee=r(77011),te=r.n(ee),re=r(411);function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ne(e,t,r[t])}))}return e}var ie=(0,x.R)("type",u.Pu.X).options;function oe(){var e=(0,I.c8)().siteContent,t=(0,s.u6)(),r=t.values,i=t.setFieldValue,o=[{name:ie[0].toLowerCase(),title:ie[0],checked:r.metadata.type===ie[0].toLowerCase(),icon:(0,n.jsx)(G,{})},{name:ie[1].toLowerCase(),title:ie[1],checked:r.metadata.type===ie[1].toLowerCase(),icon:(0,n.jsx)(Q,{})}],c=tt.map((function(e){return{name:"".concat(e.image,":").concat(e.tag),title:"".concat(e.image,":").concat(e.tag),checked:r.metadata.dockerImage==="".concat(e.image,":").concat(e.tag)}}));return(0,a.useEffect)((function(){i("services[0].access","algorithm"===r.metadata.type?"compute":"access"),i("services[0].algorithmPrivacy","algorithm"===r.metadata.type)}),[r.metadata.type]),c.push({name:"custom",title:"Custom",checked:!1}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,ae({},(0,x.R)("nft",u.Pu.X),{component:m.Z,name:"metadata.nft"})),(0,n.jsx)(s.gN,ae({},(0,x.R)("type",u.Pu.X),{component:m.Z,name:"metadata.type",options:o})),"compute"===r.services[0].access&&(0,n.jsx)(re.Z,{className:te().fieldWarning,state:"info",text:e.warning.ctd}),(0,n.jsx)(s.gN,ae({},(0,x.R)("name",u.Pu.X),{component:m.Z,name:"metadata.name"})),(0,n.jsx)(s.gN,ae({},(0,x.R)("description",u.Pu.X),{component:m.Z,name:"metadata.description",rows:7})),(0,n.jsx)(s.gN,ae({},(0,x.R)("author",u.Pu.X),{component:m.Z,name:"metadata.author"})),(0,n.jsx)(s.gN,ae({},(0,x.R)("tags",u.Pu.X),{component:m.Z,name:"metadata.tags"})),"algorithm"===r.metadata.type&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,ae({},(0,x.R)("dockerImage",u.Pu.X),{component:m.Z,name:"metadata.dockerImage",options:c})),"custom"===r.metadata.dockerImage&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,ae({},(0,x.R)("dockerImageCustom",u.Pu.X),{component:m.Z,name:"metadata.dockerImageCustom"})),(0,n.jsx)(s.gN,ae({},(0,x.R)("dockerImageCustomTag",u.Pu.X),{component:m.Z,name:"metadata.dockerImageCustomTag"})),(0,n.jsx)(s.gN,ae({},(0,x.R)("dockerImageCustomEntrypoint",u.Pu.X),{component:m.Z,name:"metadata.dockerImageCustomEntrypoint"}))]})]}),(0,n.jsx)(s.gN,ae({},(0,x.R)("termsAndConditions",u.Pu.X),{component:m.Z,name:"metadata.termsAndConditions"})),(0,n.jsx)("a",{className:te().termsLink,href:"/terms",rel:"noopener noreferrer",target:"_blank",children:"View Terms and Conditions"})]})}var se=r(30331),ce=r(39697),ue=r(39178),le=r.n(ue);function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){de(e,t,r[t])}))}return e}var me=(0,x.R)("access",u.uZ.X).options;function fe(){var e=(0,I.c8)().siteContent,t=(0,s.u6)(),r=t.values,i=t.setFieldValue,o=[{name:"download",value:me[0].toLowerCase(),title:"Download",icon:(0,n.jsx)(se.Z,{}),checked:r.services[0].access===me[0].toLowerCase()},{name:me[1].toLowerCase(),value:me[1].toLowerCase(),title:me[1],icon:(0,n.jsx)(ce.Z,{}),checked:r.services[0].access===me[1].toLowerCase()}];return(0,a.useEffect)((function(){null!==r.services[0].algorithmPrivacy&&void 0!==r.services[0].algorithmPrivacy&&i("services[0].access",!0===r.services[0].algorithmPrivacy?"compute":"access")}),[r.services[0].algorithmPrivacy,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,pe({},(0,x.R)("dataTokenOptions",u.uZ.X),{component:m.Z,name:"services[0].dataTokenOptions"})),"algorithm"===r.metadata.type?(0,n.jsx)(s.gN,pe({},(0,x.R)("algorithmPrivacy",u.uZ.X),{component:m.Z,name:"services[0].algorithmPrivacy"})):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,pe({},(0,x.R)("access",u.uZ.X),{component:m.Z,name:"services[0].access",options:o})),"compute"===r.services[0].access&&(0,n.jsx)(re.Z,{className:le().fieldWarning,state:"info",text:e.warning.ctd})]}),(0,n.jsx)(s.gN,pe({},(0,x.R)("providerUrl",u.uZ.X),{component:m.Z,name:"services[0].providerUrl"})),(0,n.jsx)(s.gN,pe({},(0,x.R)("files",u.uZ.X),{component:m.Z,name:"services[0].files"})),(0,n.jsx)(s.gN,pe({},(0,x.R)("links",u.uZ.X),{component:m.Z,name:"services[0].links"})),(0,n.jsx)(s.gN,pe({},(0,x.R)("timeout",u.uZ.X),{component:m.Z,name:"services[0].timeout"}))]})}var he=r(63637),ve=r.n(he),ge=r(33501),ye=r(76110),be=r(46051),xe=r(10130),we=r(86256),ke=r(31304),je=r.n(ke),_e=r(81517);function Pe(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Pe(i,n,a,o,s,"next",e)}function s(e){Pe(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ne(e,t,r[t])}))}return e}function Fe(e){var t=e.split(".");return t[t.length-1]}function Ce(e){if(""!==e)return tt.find((function(t){return"".concat(t.image,":").concat(t.tag)===e}))}function Ie(e){return e.toISOString().replace(/\.[0-9]{3}Z/,"Z")}function Ae(e){var t=null===e||void 0===e?void 0:e.split(",");return null===t||void 0===t?void 0:t.map((function(e){return je()(e).toLowerCase()}))}function Ze(e,t,r){return De.apply(this,arguments)}function De(){return(De=Oe(o().mark((function e(t,r,n){var a,i,s,c,u,l,d,p,m,f,h,v,g,y,b,x,w,k,j,_,P,O,N,T,F,C,I,A,Z,D,R;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.metadata,i=t.services,s=t.user,c=s.chainId,u=s.accountId,l=a.type,d=a.name,p=a.description,m=a.tags,f=a.author,h=a.termsAndConditions,v=a.dockerImage,g=a.dockerImageCustom,y=a.dockerImageCustomTag,b=a.dockerImageCustomEntrypoint,a.dockerImageCustomChecksum,x=i[0],w=x.access,k=x.files,j=x.links,_=x.providerUrl,P=x.timeout,O=n?(0,ye.Kt)(n,c):"0x...",N=Ie(new Date),T=!r&&!n,F=(null===k||void 0===k?void 0:k.length)&&k[0].valid&&[(0,_e.N)(k[0].url)],C=(null===j||void 0===j?void 0:j.length)&&j[0].valid&&[(0,_e.N)(j[0].url)],I=Te({created:N,updated:N,type:l,name:d,description:p,tags:Ae(m),author:f,license:"https://market.oceanprotocol.com/terms",links:C,additionalInformation:{termsAndConditions:h}},"algorithm"===l&&""!==v&&{algorithm:{language:(null===F||void 0===F?void 0:F.length)?Fe(F[0]):"",version:"0.1",container:{entrypoint:"custom"===v?b:Ce(v).entrypoint,image:"custom"===v?g:Ce(v).image,tag:"custom"===v?y:Ce(v).tag,checksum:"custom"===v?"":Ce(v).checksum}}}),A={nftAddress:n,datatokenAddress:r,files:[{type:"url",index:0,url:k[0].url,method:"GET"}]},e.t0=!T&&(null===k||void 0===k?void 0:k.length)&&k[0].valid,!e.t0){e.next=16;break}return e.next=15,(0,we.HH)(A,_.url);case 15:e.t0=e.sent;case 16:return Z=e.t0,D=Te({id:(0,ye.XR)(r+Z),type:w,files:Z||"",datatokenAddress:r,serviceEndpoint:_.url,timeout:(0,be.s4)(P)},"compute"===w&&{compute:t.services[0].computeOptions}),R=Te({"@context":["https://w3id.org/did/v1"],id:O,nftAddress:n,version:"4.1.0",chainId:c,metadata:I,services:[D]},!r&&{datatokens:[{name:t.services[0].dataTokenOptions.name,symbol:t.services[0].dataTokenOptions.symbol}],nft:Te({},(0,xe.x$)(null===t||void 0===t?void 0:t.metadata.nft,u))}),e.abrupt("return",R);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t,r,n,a){return Se.apply(this,arguments)}function Se(){return Se=Oe(o().mark((function e(t,r,n,a,i){var s,u,l,d,p,m,f,h,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,xe.x$)(t.metadata.nft,r,t.metadata.transferable),ye.KF.log("[publish] Creating NFT with metadata",s),u={templateIndex:2,minter:r,paymentCollector:r,mpFeeAddress:c.marketFeeAddress,feeToken:n.oceanTokenAddress,feeAmount:c.publisherMarketOrderFee,cap:"115792089237316195423570985008687907853269984665640564039457",name:t.services[0].dataTokenOptions.name,symbol:t.services[0].dataTokenOptions.symbol},ye.KF.log("[publish] Creating datatoken with ercParams",u),e.t0=t.pricing.type,e.next="fixed"===e.t0?8:"free"===e.t0?18:28;break;case 8:return m={fixedRateAddress:n.fixedRateExchangeAddress,baseTokenAddress:n.oceanTokenAddress,owner:r,marketFeeCollector:c.marketFeeAddress,baseTokenDecimals:18,datatokenDecimals:18,fixedRate:t.pricing.price.toString(),marketFee:c.publisherMarketFixedSwapFee,withMint:!0},ye.KF.log("[publish] Creating fixed pricing with freParams",m),e.next=12,a.createNftErc20WithFixedRate(r,s,u,m);case 12:return f=e.sent,l=f.events.NFTCreated.returnValues[0],d=f.events.TokenCreated.returnValues[0],p=f.transactionHash,ye.KF.log("[publish] createNftErcWithFixedRate tx",p),e.abrupt("break",28);case 18:return h={dispenserAddress:n.dispenserAddress,maxTokens:i.utils.toWei("1"),maxBalance:i.utils.toWei("1"),withMint:!0,allowedSwapper:ye.r_},ye.KF.log("[publish] Creating free pricing with dispenserParams",h),e.next=22,a.createNftErc20WithDispenser(r,s,u,h);case 22:return v=e.sent,l=v.events.NFTCreated.returnValues[0],d=v.events.TokenCreated.returnValues[0],p=v.transactionHash,ye.KF.log("[publish] createNftErcWithDispenser tx",p),e.abrupt("break",28);case 28:return e.abrupt("return",{erc721Address:l,datatokenAddress:d,txHash:p});case 29:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}function Ee(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function qe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ee(i,n,a,o,s,"next",e)}function s(e){Ee(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Me(){var e=(0,a.useState)(),t=e[0],r=e[1],i=(0,s.u6)().values;return(0,a.useEffect)((function(){function e(){return(e=qe(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(i);case 2:(t=e.sent).accessDetails={type:i.pricing.type,addressOrId:ye.r_,price:i.pricing.price,baseToken:{address:ye.r_,name:"OCEAN",symbol:"OCEAN"},datatoken:{address:ye.r_,name:"",symbol:""},isPurchasable:!0,isOwned:!1,validOrderTx:""},r(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i]),(0,n.jsxs)("div",{className:ve().preview,children:[(0,n.jsx)("h2",{className:ve().previewTitle,children:"Preview"}),(0,n.jsx)("h3",{className:ve().assetTitle,children:i.metadata.name}),t&&(0,n.jsx)(ge.Z,{asset:t})]})}var Ue=r(69127),He=r.n(Ue),Le=r(66128),Xe=r.n(Le),Ve=r(98056),Ke=r(42361),We=r.n(Ke);function ze(e){var t=e.txCount,r=e.chainId,a=e.txHash;return a?(0,n.jsx)(Ve.Z,{networkId:r,path:"/tx/".concat(a),className:We().txHash,children:"View Transaction"}):(0,n.jsxs)("span",{className:We().txHash,children:[t," Transaction",t>1?"s":""]})}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(){var e=(0,s.u6)().values,t=Object.entries(e.feedback).map((function(t,r){var a=$e(t,2),i=(a[0],a[1]);return(0,n.jsxs)("li",{className:Xe()[i.status],children:[(0,n.jsx)("h3",{className:Xe().title,children:i.name}),(0,n.jsx)("div",{className:Xe().txs,children:i.txCount>0&&(0,n.jsx)(ze,{txCount:i.txCount,chainId:e.user.chainId,txHash:i.txHash})}),(0,n.jsx)("p",{className:Xe().description,children:i.description}),i.errorMessage&&(0,n.jsx)("span",{title:i.errorMessage,className:Xe().errorMessage,children:i.errorMessage})]},r)}));return(0,n.jsx)("ol",{className:Xe().feedback,children:t})}function Ge(){return(0,n.jsx)("div",{className:He().submission,children:(0,n.jsx)(Je,{})})}var Ye=JSON.parse('{"1":{"name":"Create Tokens & Pricing","description":"The Data NFT representing your asset, the Datatokens defining access to it, and the pricing schema are all created in a single transaction.","status":"pending","txCount":1},"2":{"name":"Construct & Encrypt DDO","description":"Entered metadata is transformed into a structured document (DDO) where the file URLs, and the whole DDO itself are encrypted.","status":"pending","txCount":0},"3":{"name":"Publish DDO","description":"The encrypted DDO is stored on-chain as part of the Data NFT. Indexers like Aquarius can decrypt the DDO for displaying purposes, but the file URLs can only be decrypted by exchanging the respective datatokens for this asset.","status":"pending","txCount":1}}'),Qe=[{step:1,title:u.Pu.T,component:(0,n.jsx)(oe,{})},{step:2,title:u.uZ.T,component:(0,n.jsx)(fe,{})},{step:3,title:u.D.T,component:(0,n.jsx)(B,{})},{step:4,title:u.RN.T,component:(0,n.jsx)(Me,{})},{step:5,title:u.I8.T,component:(0,n.jsx)(Ge,{})}],et={user:{stepCurrent:1,chainId:1,accountId:""},metadata:{nft:{name:"",symbol:"",description:"",image_data:""},transferable:!0,type:"dataset",name:"",author:"",description:"",tags:"",termsAndConditions:!1,dockerImage:"",dockerImageCustom:"",dockerImageCustomTag:"",dockerImageCustomEntrypoint:""},services:[{files:[{url:""}],links:[{url:""}],dataTokenOptions:{name:"",symbol:""},timeout:"",access:"access",providerUrl:{url:"https://provider.mainnet.oceanprotocol.com",valid:!0,custom:!1},computeOptions:{allowRawAlgorithm:!1,allowNetworkAccess:!0,publisherTrustedAlgorithmPublishers:[],publisherTrustedAlgorithms:[]}}],pricing:{price:0,type:"true"===c.allowFixedPricing?"fixed":"free",amountDataToken:1e3,amountOcean:100,weightOnOcean:"5",weightOnDataToken:"5",swapFee:.1,freeAgreement:!1}},tt=[{image:"node",tag:"latest",entrypoint:"node $ALGO",checksum:""},{image:"python",tag:"latest",entrypoint:"python $ALGO",checksum:""}],rt=Ye,nt=r(69534),at=r(24519),it=r(65450),ot=r(53874),st=r.n(ot),ct=JSON.parse('{"title":"Publish","description":"Highlight the important features of your data set or algorithm to make it more discoverable and catch the interest of data consumers.","warning":"Publishing into a test network first is strongly recommended. Please familiarize yourself with [the market](https://oceanprotocol.com/technology/marketplaces), [the risks](https://blog.oceanprotocol.com/on-staking-on-data-in-ocean-market-3d8e09eb0a13), and the [Terms of Use](/terms).","tooltipAvailableNetworks":"Assets are published to the network your wallet is connected to. These networks are currently supported:"}'),ut=r(7461),lt=r(16098),dt=r.n(lt),pt=r(83618),mt=r.n(pt),ft=r(21159),ht=r(55670),vt=r(7390);function gt(e){var t=e.chainId,r=(0,ht.ZP)().networksList,a=(0,C.$6)().web3Provider;return(0,n.jsx)(ft.Z,{style:"text",className:mt().button,onClick:function(){return function(e){var t=r.find((function(t){return t.chainId===e}));(0,vt.Pj)(a,t)}(t)},children:(0,n.jsx)(it.Z,{networkId:t},t)})}function yt(){var e=(0,ht.ZP)().networksList,t=(0,I.c8)().appConfig,r=[{title:"Main",data:(0,ht.xc)("mainnet",t.chainIdsSupported,e)},{title:"Test",data:(0,ht.xc)("testnet",t.chainIdsSupported,e)}];return(0,n.jsxs)("div",{className:dt().content,children:[ct.tooltipAvailableNetworks,r.map((function(e){return e.data.length>0&&(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("h4",{className:dt().title,children:e.title}),(0,n.jsx)("ul",{className:dt().networks,children:(t=e.data,t.map((function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(gt,{chainId:e})},e)})))})]},e.title);var t}))]})}function bt(e){var t=e.networkId,r=(0,C.$6)(),a=r.isSupportedOceanNetwork,i=r.accountId;return(0,n.jsxs)(n.Fragment,{children:[ct.title," ",t&&(0,n.jsxs)(n.Fragment,{children:["into",(0,n.jsx)(it.Z,{networkId:t,className:a||!i?st().network:"".concat(st().network," ").concat(st().error)}),(0,n.jsx)(O.Z,{content:(0,n.jsx)(yt,{}),className:a||!i?st().tooltip:"".concat(st().tooltip," ").concat(st().error),children:(0,n.jsx)(ut.Z,{className:st().infoIcon})})]})]})}var xt=r(70351),wt=r.n(xt),kt=r(58952),jt=r(11163),_t=r.n(jt),Pt=r(23964);function Ot(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Nt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ot(i,n,a,o,s,"next",e)}function s(e){Ot(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Tt(e){var t,r,a,i=e.scrollToRef,c=e.did,u=function(e){var t=l.query.step;l.push({pathname:"".concat(l.pathname),query:{step:parseInt(t)+("next"===e?1:-1)}}),i.current.scrollIntoView()},l=(0,jt.useRouter)(),d=(0,C.$6)().isSupportedOceanNetwork,p=(0,s.u6)(),m=p.values,f=p.errors,h=p.isValid,v=p.isSubmitting,g=(0,C.$6)(),y=g.connect,b=g.accountId;function x(){return(x=Nt(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=1===m.user.stepCurrent&&void 0!==f.metadata||2===m.user.stepCurrent&&void 0!==f.services||3===m.user.stepCurrent&&void 0!==f.pricing,k="error"===(null===(t=m.feedback)||void 0===t?void 0:t[1].status)||"error"===(null===(r=m.feedback)||void 0===r?void 0:r[2].status)||"error"===(null===(a=m.feedback)||void 0===a?void 0:a[3].status);return(0,n.jsx)("footer",{className:wt().actions,children:c?(0,n.jsx)(kt.Z,{success:"Successfully published!",action:(0,n.jsx)(ft.Z,{style:"primary",to:"/asset/".concat(c),children:"View Asset"})}):(0,n.jsxs)(n.Fragment,{children:[m.user.stepCurrent>1&&(0,n.jsx)(ft.Z,{onClick:function(e){e.preventDefault(),u("prev")},disabled:v,children:"Back"}),m.user.stepCurrent<Qe.length?(0,n.jsx)(ft.Z,{style:"primary",onClick:function(e){e.preventDefault(),u("next")},disabled:w,children:"Continue"}):b?d?(0,n.jsx)(ft.Z,{type:"submit",style:"primary",disabled:v||!h,children:v?(0,n.jsx)(Pt.Z,{white:!0}):k?"Retry":"Submit"}):(0,n.jsx)(O.Z,{content:(0,n.jsx)(yt,{}),children:(0,n.jsxs)(ft.Z,{type:"submit",style:"primary",disabled:!0,className:wt().infoButton,children:["Unsupported Network ",(0,n.jsx)(ut.Z,{className:wt().infoIcon})]})}):(0,n.jsx)(ft.Z,{type:"submit",style:"primary",onClick:function(e){return x.apply(this,arguments)},children:"Connect Wallet"})]})})}var Ft=r(48842),Ct=r(35165),It=r.n(Ct);function At(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Zt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){At(i,n,a,o,s,"next",e)}function s(e){At(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Dt(){var e=(0,s.u6)().values,t=(0,a.useState)(),r=t[0],i=t[1];return(0,a.useEffect)((function(){function t(){return t=Zt(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ze(e);case 2:r=t.sent,i(r);case 4:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),(0,n.jsxs)("div",{className:It().debug,children:[(0,n.jsx)(Ft.Z,{title:"Collected Form Values",output:e}),(0,n.jsx)(Ft.Z,{title:"Transformed DDO Values",output:r})]})}var Rt=r(68112),St=r.n(Rt);function Et(){var e=function(e){r.push("/publish/".concat(e))},t=function(e){var t,r,n=void 0===c.metadata,a=void 0===c.services,i=void 0===c.pricing&&((null===(t=u.pricing)||void 0===t?void 0:t.price)||(null===(r=u.pricing)||void 0===r?void 0:r.freeAgreement));return 1===e&&n||2===e&&a||3===e&&i||4===e&&(n&&a&&i)?St().success:null},r=(0,jt.useRouter)(),i=(0,s.u6)(),o=i.values,c=i.errors,u=i.touched,l=i.setFieldValue;return(0,a.useEffect)((function(){var t,n=1;if(null===(t=r.query)||void 0===t?void 0:t.step){var a=r.query.step,i=parseInt(a);i<=Qe.length?n=i:e(1)}l("user.stepCurrent",n)}),[r]),(0,n.jsx)("nav",{className:St().navigation,children:(0,n.jsx)("ol",{children:Qe.map((function(r){return(0,n.jsx)("li",{onClick:function(){return e(r.step)},className:"".concat(o.user.stepCurrent===r.step?St().current:null," ").concat(t(r.step)),children:r.title},r.title)}))})})}var qt=r(99436);function Mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Mt(e,t,r[t])}))}return e}function Ht(e){var t,r,n=e.feedback,i=(0,C.$6)(),o=i.chainId,c=i.accountId,u=(0,s.u6)(),l=u.values,d=u.setFieldValue,p=u.touched,m=u.setTouched;return(0,a.useEffect)((function(){o&&c&&(d("user.chainId",o),d("user.accountId",c))}),[o,c,d]),(0,a.useEffect)((function(){d("feedback",n)}),[n,d]),(0,a.useEffect)((function(){d("feedback",Ut({},n,{1:Ut({},n[1],{txCount:"dynamic"===l.pricing.type?2:1,description:"dynamic"===l.pricing.type?n[1].description.replace("a single transaction","a single transaction, after an initial approve transaction"):rt[1].description})}))}),[l.pricing.type,n,d]),(0,a.useEffect)((function(){var e,t;if((null===l||void 0===l||null===(e=l.user)||void 0===e?void 0:e.chainId)&&!0!==(null===(t=null===l||void 0===l?void 0:l.services[0])||void 0===t?void 0:t.providerUrl.custom)){var r=(0,qt.HJ)(l.user.chainId);r&&d("services[0].providerUrl",{url:r.providerUri,valid:!0,custom:!1}),m(Ut({},p,{services:[{providerUrl:{url:!0}}]}))}}),[null===l||void 0===l||null===(t=l.user)||void 0===t?void 0:t.chainId,null===(r=null===l||void 0===l?void 0:l.services[0])||void 0===r?void 0:r.providerUrl.custom,d,m]),Qe.filter((function(e){return e.step===l.user.stepCurrent}))[0].component}var Lt=r(7810),Xt=r(7551),Vt=r(13778),Kt=r(74231),Wt=r(30508),zt={type:Kt.Z_().matches(/dataset|algorithm/g,{excludeEmptyString:!0}).required("Required"),name:Kt.Z_().min(4,(function(e){return"Title must be at least ".concat(e.min," characters")})).required("Required"),description:Kt.Z_().min(10,(function(e){return"Description must be at least ".concat(e.min," characters")})).max(5e3,(function(e){return"Description must have maximum ".concat(e.max," characters")})).required("Required"),author:Kt.Z_().required("Required"),tags:Kt.Z_().nullable(),termsAndConditions:Kt.O7().required("Required").isTrue("Please agree to the Terms and Conditions.")},Bt={files:Kt.IX().of(Kt.Ry().shape({url:Kt.Z_().url("Must be a valid URL.").required("Required"),valid:Kt.O7().isTrue().required("File must be valid.")})).min(1,(function(e){return"At least one file is required."})).required("Enter a valid URL and click ADD FILE."),links:Kt.IX().of(Kt.Ry().shape({url:Kt.Z_().url("Must be a valid URL."),valid:Kt.O7()})).nullable(),dataTokenOptions:Kt.Ry().shape({name:Kt.Z_(),symbol:Kt.Z_()}),timeout:Kt.Z_().required("Required"),access:Kt.Z_().matches(/compute|access/g).required("Required"),providerUrl:Kt.Ry().shape({url:Kt.Z_().url("Must be a valid URL.").required("Required"),valid:Kt.O7().isTrue().required("Valid Provider is required."),custom:Kt.O7()})},$t={type:Kt.Z_().matches(/fixed|dynamic|free/g,{excludeEmptyString:!0}).required("Required"),price:Kt.Rx().min(1,(function(e){return"Must be more or equal to ".concat(e.min)})).max(1e6,(function(e){return"Must be less than or equal to ".concat(e.max)})).test("maxDigitsAfterDecimal","Must have maximum ".concat(Vt.z," decimal digits"),(function(e){return(0,Wt.FD)(Vt.z).test(null===e||void 0===e?void 0:e.toString())})).required("Required"),amountDataToken:Kt.Rx().required("Required"),amountOcean:Kt.Rx().test("validator-min-amountOcean","",(function(e){if("fixed"===this.parent.type)return!0;var t=this.parent.price>0?new(Z())(this.parent.price).mul(this.parent.weightOnOcean).mul(10).mul(2).toDecimalPlaces(Vt.z).toString():et.pricing.amountOcean.toString();return!(e<parseInt(t))||this.createError({message:"Must be more or equal to ".concat(t,", as at least ").concat(et.pricing.amountDataToken," datatokens are required for this pool to work properly")})})).max(1e6,(function(e){return"Must be less than or equal to ".concat(e.max)})).test("maxDigitsAfterDecimal","Must have maximum ".concat(Vt.z," decimal digits"),(function(e){return(0,Wt.FD)(Vt.z).test(null===e||void 0===e?void 0:e.toString())})).required("Required"),weightOnDataToken:Kt.Z_().required("Required"),weightOnOcean:Kt.Z_().required("Required"),swapFee:Kt.Rx().min(.1,(function(e){return"Must be more or equal to ".concat(e.min)})).max(10,"Maximum is 10%").test("maxDigitsAfterDecimal","Must have maximum ".concat(Vt.z," decimal digits"),(function(e){return(0,Wt.FD)(Vt.z).test(null===e||void 0===e?void 0:e.toString())})).required("Required")},Jt=Kt.Ry().shape({user:Kt.Ry().shape({stepCurrent:Kt.Rx(),chainId:Kt.Rx().required("Required"),accountId:Kt.Z_().required("Required")}),metadata:Kt.Ry().shape(zt),services:Kt.IX().of(Kt.Ry().shape(Bt)),pricing:Kt.Ry().shape($t)}),Gt=r(94523);function Yt(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Qt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Yt(i,n,a,o,s,"next",e)}function s(e){Yt(i,n,a,o,s,"throw",e)}o(void 0)}))}}function er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){er(e,t,r[t])}))}return e}function rr(e){var t=e.content,r=(0,Lt.o)().debug,i=(0,C.$6)(),c=i.accountId,u=i.web3,l=i.chainId,d=(0,nt.I)(c),p=d.isInPurgatory,m=d.purgatoryData,f=(0,a.useRef)(),h=(0,Xt.Z)(),v=(0,Gt.E)(),g=(0,a.useState)(rt),y=g[0],b=g[1],x=(0,a.useState)(),w=x[0],k=x[1],j=(0,a.useState)(),_=j[0],P=j[1],O=(0,a.useState)(),N=O[0],T=O[1],F=(0,a.useState)(),I=F[0],A=F[1],Z=(0,a.useState)(),D=Z[0],R=Z[1];function S(e){return E.apply(this,arguments)}function E(){return(E=Qt(o().mark((function e(t){var r,n,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b((function(e){return tr({},e,{1:tr({},e[1],{status:"active",errorMessage:null})})})),e.prev=1,r=(0,qt.HJ)(l),ye.KF.log("[publish] using config: ",r),e.next=6,Re(t,c,r,h,u);case 6:if(n=e.sent,a=n.erc721Address,i=n.datatokenAddress,s=n.txHash,Boolean(a&&i&&s)){e.next=13;break}throw new Error("No Token created. Please try again.");case 13:return ye.KF.log("[publish] createTokensAndPricing tx",s),ye.KF.log("[publish] erc721Address",a),ye.KF.log("[publish] datatokenAddress",i),b((function(e){return tr({},e,{1:tr({},e[1],{status:"success",txHash:s})})})),e.abrupt("return",{erc721Address:a,datatokenAddress:i});case 20:e.prev=20,e.t0=e.catch(1),ye.KF.error("[publish] error",e.t0.message),e.t0.message.length>65&&(e.t0.message="No Token created. Please try again."),b((function(t){return tr({},t,{1:tr({},t[1],{status:"error",errorMessage:e.t0.message})})}));case 25:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function q(e,t,r){return M.apply(this,arguments)}function M(){return M=Qt(o().mark((function e(t,r,n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b((function(e){return tr({},e,{2:tr({},e[2],{status:"active",errorMessage:null})})})),e.prev=1,n&&r){e.next=4;break}throw new Error("No NFT or Datatoken received. Please try again.");case 4:return e.next=6,Ze(t,n,r);case 6:if(a=e.sent){e.next=9;break}throw new Error("No DDO received. Please try again.");case 9:return T(a),ye.KF.log("[publish] Got new DDO",a),e.next=13,ye.ag.encrypt(a,t.services[0].providerUrl.url,v());case 13:if(i=e.sent){e.next=16;break}throw new Error("No encrypted DDO received. Please try again.");case 16:return A(i),ye.KF.log("[publish] Got encrypted DDO",i),b((function(e){return tr({},e,{2:tr({},e[2],{status:"success"})})})),e.abrupt("return",{ddo:a,ddoEncrypted:i});case 22:e.prev=22,e.t0=e.catch(1),ye.KF.error("[publish] error",e.t0.message),b((function(t){return tr({},t,{2:tr({},t[2],{status:"error",errorMessage:e.t0.message})})}));case 26:case"end":return e.stop()}}),e,null,[[1,22]])}))),M.apply(this,arguments)}function U(e,t,r){return H.apply(this,arguments)}function H(){return H=Qt(o().mark((function e(t,r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b((function(e){return tr({},e,{3:tr({},e[3],{status:"active",errorMessage:null})})})),e.prev=1,r&&n){e.next=4;break}throw new Error("No DDO received. Please try again.");case 4:return e.next=6,(0,xe.MI)(r,c,u,t.metadata.nft,v());case 6:if(null===(a=e.sent)||void 0===a?void 0:a.transactionHash){e.next=9;break}throw new Error("Metadata could not be written into the NFT. Please try again.");case 9:return ye.KF.log("[publish] setMetadata result",a),b((function(e){return tr({},e,{3:tr({},e[3],{status:a?"success":"error",txHash:null===a||void 0===a?void 0:a.transactionHash})})})),e.abrupt("return",{did:r.id});case 14:e.prev=14,e.t0=e.catch(1),ye.KF.error("[publish] error",e.t0.message),b((function(t){return tr({},t,{3:tr({},t[3],{status:"error",errorMessage:e.t0.message})})}));case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))),H.apply(this,arguments)}function L(e){return X.apply(this,arguments)}function X(){return X=Qt(o().mark((function e(t){var r,n,a,i,s,c,u,l,d,p,m,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_,a=N,i=I,s=D,(r=w)&&n){e.next=15;break}return e.next=8,S(t);case 8:c=e.sent,u=c.erc721Address,l=c.datatokenAddress,r=u,n=l,k(u),P(l);case 15:if(a&&i){e.next=25;break}return e.next=18,q(t,r,n);case 18:d=e.sent,p=d.ddo,m=d.ddoEncrypted,a=p,i=m,T(p),A(m);case 25:if(s){e.next=31;break}return e.next=28,U(t,a,i);case 28:f=e.sent.did,s=f,R(f);case 31:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}return p&&m?null:(0,n.jsx)(s.J9,{initialValues:et,validationSchema:Jt,onSubmit:function(){var e=Qt(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var a=e.values;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(at.Z,{title:(0,n.jsx)(bt,{networkId:a.user.chainId}),description:t.description}),(0,n.jsxs)(s.l0,{className:le().form,ref:f,children:[(0,n.jsx)(Et,{}),(0,n.jsx)(Ht,{feedback:y}),(0,n.jsx)(Tt,{scrollToRef:f,did:D})]}),r&&(0,n.jsx)(Dt,{})]})}})}var nr=r(16240);function ar(){var e=ct.title,t=ct.description;return(0,n.jsx)(nr.Z,{title:e,description:t,uri:_t().route,noPageHeader:!0,children:(0,n.jsx)(rr,{content:ct})})}},70351:function(e){e.exports={actions:"Actions_actions__QFXHB",infoIcon:"Actions_infoIcon__zwDh8",infoButton:"Actions_infoButton__8G3fj"}},83618:function(e){e.exports={button:"Network_button__5TtqP"}},16098:function(e){e.exports={networks:"AvailableNetworks_networks__nO8MI",title:"AvailableNetworks_title__Wjrr8",content:"AvailableNetworks_content__1WaCm"}},35165:function(e){e.exports={debug:"Debug_debug__HKPSH"}},77011:function(e){e.exports={termsLink:"Metadata_termsLink__Xxq6H",fieldWarning:"Metadata_fieldWarning__QQwEP Publish_fieldWarning__z5bFR"}},68112:function(e){e.exports={navigation:"Navigation_navigation__Ynw3J",current:"Navigation_current__LJfnX",success:"Navigation_success__4fl6W"}},63637:function(e){e.exports={preview:"Preview_preview__bFPsi",previewTitle:"Preview_previewTitle__3EsFN",assetTitle:"Preview_assetTitle__QYWM9"}},6259:function(e){e.exports={title:"Dynamic_title__hodkR",tokens:"Dynamic_tokens__CDdbj",subtitle:"Dynamic_subtitle__pBb_r",alertArea:"Dynamic_alertArea__YUcVA"}},1611:function(e){e.exports={fees:"Fees_fees__A53Ij"}},87699:function(e){e.exports={form:"Price_form__aMXjr",price:"Price_price__HX81j",grid:"Price_grid__TFEgU",fixed:"Price_fixed__rAoqh",datatoken:"Price_datatoken___sNDD",firstPrice:"Price_firstPrice__M1EJA",conversion:"Price_conversion__6KDfp",free:"Price_free__LtJMx"}},31139:function(e){e.exports={pricing:"Pricing_pricing__799Sb"}},66128:function(e){e.exports={feedback:"Feedback_feedback__oXosl",active:"Feedback_active__7KKGy",loader:"Feedback_loader__rrt0N",success:"Feedback_success__HE9hu",error:"Feedback_error__n_BTy",title:"Feedback_title__EZzth",txs:"Feedback_txs___JVB5",description:"Feedback_description__8JZvp",errorMessage:"Feedback_errorMessage__xi8Wr"}},42361:function(e){e.exports={txHash:"TransactionCount_txHash__9NMP5"}},69127:function(){},53874:function(e){e.exports={network:"Title_network__FFYls",tooltip:"Title_tooltip___IRtU",error:"Title_error__E3skD",infoIcon:"Title_infoIcon__moj1D Actions_infoIcon__zwDh8"}},39178:function(e){e.exports={form:"Publish_form__4Jt8S Box_box__l77_J",fieldWarning:"Publish_fieldWarning__z5bFR"}}},function(e){e.O(0,[570,966,951,44,766,410,50,674,32,949,707,774,888,179],(function(){return t=55204,e(e.s=t);var t}));var t=e.O();_N_E=t}]);